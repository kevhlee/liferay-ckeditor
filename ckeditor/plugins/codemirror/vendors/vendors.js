(function(Q,da){"object"===typeof exports&&"undefined"!==typeof module?module.exports=da():false&&"function"===typeof define&&define.amd?define(da):(Q=Q||self,Q.CodeMirror=da())})(this,function(){function Q(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function da(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function Z(a,b){return da(a).appendChild(b)}function r(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));
else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function y(a,b,c,d){a=r(a,b,c,d);a.setAttribute("role","presentation");return a}function A(a,b){3==b.nodeType&&(b=b.parentNode);if(a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)}function m(){var a;try{a=document.activeElement}catch(b){a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a}function B(a,b){var c=a.className;Q(b).test(c)||
(a.className+=(c?" ":"")+b)}function n(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!Q(c[d]).test(b)&&(b+=" "+c[d]);return b}function f(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function k(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function I(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var g=a.indexOf("\t",d);if(0>g||g>=b)return e+(b-d);
e+=g-d;e+=c-e%c;d=g+1}}function v(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function J(a,b,c){for(var d=0,e=0;;){var g=a.indexOf("\t",d);-1==g&&(g=a.length);var h=g-d;if(g==a.length||e+h>=b)return d+Math.min(h,b-e);e+=g-d;e+=c-e%c;d=g+1;if(e>=b)return d}}function G(a){for(;nc.length<=a;)nc.push(z(nc)+" ");return nc[a]}function z(a){return a[a.length-1]}function Fa(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function oc(a,b,c){for(var d=0,e=c(b);d<a.length&&c(a[d])<=
e;)d++;a.splice(d,0,b)}function ua(){}function t(a,b){var c;Object.create?c=Object.create(a):(ua.prototype=a,c=new ua);b&&k(b,c);return c}function C(a){return/\w/.test(a)||""<a&&(a.toUpperCase()!=a.toLowerCase()||eg.test(a))}function H(a,b){return b?-1<b.source.indexOf("\\w")&&C(a)?!0:b.test(a):C(a)}function gb(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function V(a){return 768<=a.charCodeAt(0)&&fg.test(a)}function Bb(a,b,c){for(;(0>c?0<b:b<a.length)&&V(a.charAt(b));)b+=c;return b}
function ra(a,b,c){for(var d=b>c?-1:1;;){if(b==c)return b;var e=(b+c)/2,e=0>d?Math.ceil(e):Math.floor(e);if(e==b)return a(e)?b:c;a(e)?c=e:b=e+d}}function Ka(a,b,c,d){if(!a)return d(b,c,"ltr",0);for(var e=!1,g=0;g<a.length;++g){var h=a[g];if(h.from<c&&h.to>b||b==c&&h.to==b)d(Math.max(h.from,b),Math.min(h.to,c),1==h.level?"rtl":"ltr",g),e=!0}e||d(b,c,"ltr")}function U(a,b,c){var d;Cb=null;for(var e=0;e<a.length;++e){var g=a[e];if(g.from<b&&g.to>b)return e;g.to==b&&(g.from!=g.to&&"before"==c?d=e:Cb=
e);g.from==b&&(g.from!=g.to&&"before"!=c?d=e:Cb=e)}return null!=d?d:Cb}function na(a,b){var c=a.order;null==c&&(c=a.order=gg(a.text,b));return c}function R(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=(a=a._handlers)&&a[b];d&&(c=v(d,c),-1<c&&(a[b]=d.slice(0,c).concat(d.slice(c+1))))}}function X(a,b){var c=a._handlers&&a._handlers[b]||pc;if(c.length)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,
d)}function aa(a,b,c){"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}});X(a,c||b.type,a,b);return Vc(b)||b.codemirrorIgnore}function Yd(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==v(a,b[c])&&a.push(b[c])}}function sa(a,b){return 0<(a._handlers&&a._handlers[b]||pc).length}function hb(a){a.prototype.on=function(a,c){E(this,a,c)};a.prototype.off=function(a,
c){R(this,a,c)}}function ja(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Zd(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Vc(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function Db(a){ja(a);Zd(a)}function $d(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));ta&&a.ctrlKey&&1==b&&(b=3);return b}function hg(a){if(null==Wc){var b=r("span","​");Z(a,r("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&
(Wc=1>=b.offsetWidth&&2<b.offsetHeight&&!(M&&8>S))}a=Wc?r("span","​"):r("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");a.setAttribute("cm-text","");return a}function ig(a,b){2<arguments.length&&(b.dependencies=Array.prototype.slice.call(arguments,2));Xc[a]=b}function qc(a){if("string"==typeof a&&ib.hasOwnProperty(a))a=ib[a];else if(a&&"string"==typeof a.name&&ib.hasOwnProperty(a.name)){var b=ib[a.name];"string"==typeof b&&(b={name:b});a=t(b,a);a.name=b.name}else{if("string"==
typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return qc("application/xml");if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return qc("application/json")}return"string"==typeof a?{name:a}:a||{name:"null"}}function Yc(a,b){b=qc(b);var c=Xc[b.name];if(!c)return Yc(a,"text/plain");c=c(a,b);if(jb.hasOwnProperty(b.name)){var d=jb[b.name],e;for(e in d)d.hasOwnProperty(e)&&(c.hasOwnProperty(e)&&(c["_"+e]=c[e]),c[e]=d[e])}c.name=b.name;b.helperType&&(c.helperType=b.helperType);if(b.modeProps)for(var g in b.modeProps)c[g]=
b.modeProps[g];return c}function jg(a,b){var c=jb.hasOwnProperty(a)?jb[a]:jb[a]={};k(b,c)}function Ta(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c}function Zc(a,b){for(var c;a.innerMode;){c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}}function ae(a,b,c){return a.startState?a.startState(b,c):!0}function D(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+
(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],g=e.chunkSize();if(b<g){c=e;break}b-=g}return c.lines[b]}function Ua(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function $c(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function za(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function O(a){if(null==a.parent)return null;
var b=a.parent;a=v(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Va(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],g=e.height;if(b<g){a=e;continue a}b-=g;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function Eb(a,b){return b>=a.first&&b<a.first+a.size}function ad(a,b){return String(a.lineNumberFormatter(b+
a.firstLineNumber))}function w(a,b,c){void 0===c&&(c=null);if(!(this instanceof w))return new w(a,b,c);this.line=a;this.ch=b;this.sticky=c}function K(a,b){return a.line-b.line||a.ch-b.ch}function bd(a,b){return a.sticky==b.sticky&&0==K(a,b)}function cd(a){return w(a.line,a.ch)}function rc(a,b){return 0>K(a,b)?b:a}function sc(a,b){return 0>K(a,b)?a:b}function L(a,b){if(b.line<a.first)return w(a.first,0);var c=a.first+a.size-1;if(b.line>c)return w(c,D(a,c).text.length);var c=D(a,b.line).text.length,
d=b.ch,c=null==d||d>c?w(b.line,c):0>d?w(b.line,0):b;return c}function be(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=L(a,b[d]);return c}function ce(a,b,c,d){var e=[a.state.modeGen],g={};de(a,b.text,a.doc.mode,c,function(a,b){return e.push(a,b)},g,d);var h=c.state;d=function(d){c.baseTokens=e;var l=a.state.overlays[d],F=1,f=0;c.state=!0;de(a,b.text,l.mode,c,function(a,b){for(var d=F;f<a;){var c=e[F];c>a&&e.splice(F,1,a,e[F+1],c);F+=2;f=Math.min(a,c)}if(b)if(l.opaque)e.splice(d,F-d,a,"overlay "+b),F=
d+2;else for(;d<F;d+=2)c=e[d+1],e[d+1]=(c?c+" ":"")+"overlay "+b},g);c.state=h;c.baseTokens=null;c.baseTokenPos=1};for(var l=0;l<a.state.overlays.length;++l)d(l);return{styles:e,classes:g.bgClass||g.textClass?g:null}}function ee(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=Fb(a,O(b)),e=b.text.length>a.options.maxHighlightLength&&Ta(a.doc.mode,d.state),g=ce(a,b,d);e&&(d.state=e);b.stateAfter=d.save(!e);b.styles=g.styles;g.classes?b.styleClasses=g.classes:b.styleClasses&&(b.styleClasses=
null);c===a.doc.highlightFrontier&&(a.doc.modeFrontier=Math.max(a.doc.modeFrontier,++a.doc.highlightFrontier))}return b.styles}function Fb(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return new Aa(d,!0,b);var g=kg(a,b,c),h=g>d.first&&D(d,g-1).stateAfter,l=h?Aa.fromSaved(d,h,g):new Aa(d,ae(d.mode),g);d.iter(g,b,function(d){dd(a,d.text,l);var c=l.line;d.stateAfter=c==b-1||0==c%5||c>=e.viewFrom&&c<e.viewTo?l.save():null;l.nextLine()});c&&(d.modeFrontier=l.line);return l}function dd(a,b,c,d){var e=
a.doc.mode;a=new Y(b,a.options.tabSize,c);a.start=a.pos=d||0;for(""==b&&fe(e,c.state);!a.eol();)ed(e,a,c.state),a.start=a.pos}function fe(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode){var c=Zc(a,b);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function ed(a,b,c,d){for(var e=0;10>e;e++){d&&(d[0]=Zc(a,c).mode);var g=a.token(b,c);if(b.pos>b.start)return g}throw Error("Mode "+a.name+" failed to advance stream.");}function ge(a,b,c,d){var e=a.doc,g=e.mode,h;b=L(e,b);var l=D(e,b.line);
c=Fb(a,b.line,c);a=new Y(l.text,a.options.tabSize,c);var p;for(d&&(p=[]);(d||a.pos<b.ch)&&!a.eol();)a.start=a.pos,h=ed(g,a,c.state),d&&p.push(new he(a,h,Ta(e.mode,c.state)));return d?p:new he(a,h,c.state)}function ie(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|\\s)"+c[2]+"(?:$|\\s)")).test(b[d])||(b[d]+=" "+c[2])}return a}function de(a,b,c,
d,e,g,h){var l=c.flattenSpans;null==l&&(l=a.options.flattenSpans);var p=0,u=null,F=new Y(b,a.options.tabSize,d),f,q=a.options.addModeClass&&[null];for(""==b&&ie(fe(c,d.state),g);!F.eol();){F.pos>a.options.maxHighlightLength?(l=!1,h&&dd(a,b,d,F.pos),F.pos=b.length,f=null):f=ie(ed(c,F,d.state,q),g);if(q){var x=q[0].name;x&&(f="m-"+(f?x+" "+f:x))}if(!l||u!=f){for(;p<F.start;)p=Math.min(F.start,p+5E3),e(p,u);u=f}F.start=F.pos}for(;p<F.pos;)a=Math.min(F.pos,p+5E3),e(a,u),p=a}function kg(a,b,c){for(var d,
e,g=a.doc,h=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>h;--b){if(b<=g.first)return g.first;var l=D(g,b-1),p=l.stateAfter;if(p&&(!c||b+(p instanceof tc?p.lookAhead:0)<=g.modeFrontier))return b;l=I(l.text,null,a.options.tabSize);if(null==e||d>l)e=b-1,d=l}return e}function lg(a,b){a.modeFrontier=Math.min(a.modeFrontier,b);if(!(a.highlightFrontier<b-10)){for(var c=a.first,d=b-1;d>c;d--){var e=D(a,d).stateAfter;if(e&&(!(e instanceof tc)||d+e.lookAhead<b)){c=d+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,
c)}}function uc(a,b,c){this.marker=a;this.from=b;this.to=c}function Gb(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function fd(a,b){if(b.full)return null;var c=Eb(a,b.from.line)&&D(a,b.from.line).markedSpans,d=Eb(a,b.to.line)&&D(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,g=b.to.ch,h=0==K(b.from,b.to),l;if(c)for(var p=0;p<c.length;++p){var u=c[p],F=u.marker;if(null==u.from||(F.inclusiveLeft?u.from<=e:u.from<e)||!(u.from!=e||"bookmark"!=F.type||h&&u.marker.insertLeft)){var f=
null==u.to||(F.inclusiveRight?u.to>=e:u.to>e);(l||(l=[])).push(new uc(F,u.from,f?null:u.to))}}var c=l,q;if(d)for(l=0;l<d.length;++l)if(p=d[l],u=p.marker,null==p.to||(u.inclusiveRight?p.to>=g:p.to>g)||p.from==g&&"bookmark"==u.type&&(!h||p.marker.insertLeft))F=null==p.from||(u.inclusiveLeft?p.from<=g:p.from<g),(q||(q=[])).push(new uc(u,F?null:p.from-g,null==p.to?null:p.to-g));d=q;g=1==b.text.length;h=z(b.text).length+(g?e:0);if(c)for(q=0;q<c.length;++q)if(l=c[q],null==l.to)(p=Gb(d,l.marker),p)?g&&(l.to=
null==p.to?null:p.to+h):l.to=e;if(d)for(e=0;e<d.length;++e)q=d[e],null!=q.to&&(q.to+=h),null==q.from?Gb(c,q.marker)||(q.from=h,g&&(c||(c=[])).push(q)):(q.from+=h,g&&(c||(c=[])).push(q));c&&(c=je(c));d&&d!=c&&(d=je(d));e=[c];if(!g){var g=b.text.length-2,x;if(0<g&&c)for(h=0;h<c.length;++h)null==c[h].to&&(x||(x=[])).push(new uc(c[h].marker,null,null));for(c=0;c<g;++c)e.push(x);e.push(d)}return e}function je(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&
a.splice(b--,1)}return a.length?a:null}function mg(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=v(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),g=0;g<a.length;++g){var h=a[g];if(!(0>K(h.to,e.from)||0<K(h.from,e.to))){var l=[g,1],p=K(h.from,e.from),u=K(h.to,e.to);(0>p||!c.inclusiveLeft&&!p)&&l.push({from:h.from,to:e.from});
(0<u||!c.inclusiveRight&&!u)&&l.push({from:e.to,to:h.to});a.splice.apply(a,l);g+=l.length-3}}}return a}function ke(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function le(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function gd(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=K(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=K(c.to,d.to)||
(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function kb(a,b){var c=Ga&&a.markedSpans,d;if(c)for(var e=void 0,g=0;g<c.length;++g)e=c[g],e.marker.collapsed&&null==(b?e.from:e.to)&&(!d||0>gd(d,e.marker))&&(d=e.marker);return d}function me(a,b,c,d,e){a=D(a,b);if(a=Ga&&a.markedSpans)for(b=0;b<a.length;++b){var g=a[b];if(g.marker.collapsed){var h=g.marker.find(0),l=K(h.from,c)||(g.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),p=K(h.to,d)||(g.marker.inclusiveRight?1:0)-(e.inclusiveRight?
1:0);if(!(0<=l&&0>=p||0>=l&&0<=p)&&(0>=l&&(g.marker.inclusiveRight&&e.inclusiveLeft?0<=K(h.to,c):0<K(h.to,c))||0<=l&&(g.marker.inclusiveRight&&e.inclusiveLeft?0>=K(h.from,d):0>K(h.from,d))))return!0}}}function Ba(a){for(var b;b=kb(a,!0);)a=b.find(-1,!0).line;return a}function hd(a,b){var c=D(a,b),d=Ba(c);return c==d?b:O(d)}function ne(a,b){if(b>a.lastLine())return b;var c=D(a,b),d;if(!La(a,c))return b;for(;d=kb(c,!1);)c=d.find(1,!0).line;return O(c)+1}function La(a,b){var c=Ga&&b.markedSpans;if(c)for(var d=
void 0,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&id(a,b,d)))return!0}function id(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),id(a,b.line,Gb(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d=void 0,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&
id(a,b,d))return!0}function Ca(a){a=Ba(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;return b}function vc(a){if(0==a.height)return 0;for(var b=a.text.length,c,d=a;c=kb(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=kb(d,!1);)a=c.find(0,!0),b-=d.text.length-a.from.ch,d=a.to.line,b+=d.text.length-a.to.ch;return b}function jd(a){var b=
a.display;a=a.doc;b.maxLine=D(a,a.first);b.maxLineLength=vc(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var d=vc(a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function oe(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?ng:og;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$\x26"))}function pe(a,b){var c=y("span",null,null,ga?"padding-right: .1px":null),c={pre:y("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,trailingSpace:!1,splitSpaces:a.getOption("lineWrapping")};b.measure=
{};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:b.line,g=void 0;c.pos=0;c.addToken=pg;var h;h=a.display.measure;if(null!=kd)h=kd;else{var l=Z(h,document.createTextNode("AخA")),p=lb(l,0,1).getBoundingClientRect(),l=lb(l,1,2).getBoundingClientRect();da(h);h=p&&p.left!=p.right?kd=3>l.right-p.right:!1}h&&(g=na(e,a.doc.direction))&&(c.addToken=qg(c.addToken,g));c.map=[];h=b!=a.display.externalMeasured&&O(e);a:{g=c;h=ee(a,e,h);var u=e.markedSpans,p=e.text,l=0;if(u)for(var F=p.length,
f=0,q=1,x="",k=void 0,t=void 0,C=0,m=void 0,I=void 0,v=void 0,H=void 0,B=void 0;;){if(C==f){for(var m=I=v=t="",H=B=null,C=Infinity,w=[],r=void 0,R=0;R<u.length;++R){var z=u[R],J=z.marker;if("bookmark"==J.type&&z.from==f&&J.widgetNode)w.push(J);else if(z.from<=f&&(null==z.to||z.to>f||J.collapsed&&z.to==f&&z.from==f)){null!=z.to&&z.to!=f&&C>z.to&&(C=z.to,I="");J.className&&(m+=" "+J.className);J.css&&(t=(t?t+";":"")+J.css);J.startStyle&&z.from==f&&(v+=" "+J.startStyle);J.endStyle&&z.to==C&&(r||(r=[])).push(J.endStyle,
z.to);J.title&&((B||(B={})).title=J.title);if(J.attributes)for(var G in J.attributes)(B||(B={}))[G]=J.attributes[G];J.collapsed&&(!H||0>gd(H.marker,J))&&(H=z)}else z.from>f&&C>z.from&&(C=z.from)}if(r)for(R=0;R<r.length;R+=2)r[R+1]==C&&(I+=" "+r[R]);if(!H||H.from==f)for(r=0;r<w.length;++r)qe(g,0,w[r]);if(H&&(H.from||0)==f){qe(g,(null==H.to?F+1:H.to)-f,H.marker,null==H.from);if(null==H.to)break a;H.to==f&&(H=!1)}}if(f>=F)break;for(w=Math.min(F,C);;){if(x){r=f+x.length;H||(R=r>w?x.slice(0,w-f):x,g.addToken(g,
R,k?k+m:m,v,f+R.length==C?I:"",t,B));if(r>=w){x=x.slice(w-f);f=w;break}f=r;v=""}x=p.slice(l,l=h[q++]);k=oe(h[q++],g.cm.options)}}else for(u=1;u<h.length;u+=2)g.addToken(g,p.slice(l,l=h[u]),oe(h[u+1],g.cm.options))}e.styleClasses&&(e.styleClasses.bgClass&&(c.bgClass=n(e.styleClasses.bgClass,c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=n(e.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(hg(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache=
{}):((b.measure.maps||(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}ga&&(G=c.content.lastChild,/\bcm-tab\b/.test(G.className)||G.querySelector&&G.querySelector(".cm-tab"))&&(c.content.className="cm-tab-wrap-hack");X(a,"renderLine",a,b.line,c.pre);c.pre.className&&(c.textClass=n(c.pre.className,c.textClass||""));return c}function rg(a){var b=r("span","•","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);b.setAttribute("aria-label",b.title);return b}
function pg(a,b,c,d,e,g,h){if(b){var l;if(a.splitSpaces)if(l=a.trailingSpace,1<b.length&&!/  /.test(b))l=b;else{for(var p="",u=0;u<b.length;u++){var F=b.charAt(u);" "!=F||!l||u!=b.length-1&&32!=b.charCodeAt(u+1)||(F=" ");p+=F;l=" "==F}l=p}else l=b;p=l;u=a.cm.state.specialChars;F=!1;if(u.test(b)){l=document.createDocumentFragment();for(var f=0;;){u.lastIndex=f;var q=u.exec(b),x=q?q.index-f:b.length-f;if(x){var k=document.createTextNode(p.slice(f,f+x));M&&9>S?l.appendChild(r("span",[k])):l.appendChild(k);
a.map.push(a.pos,a.pos+x,k);a.col+=x;a.pos+=x}if(!q)break;f+=x+1;x=void 0;"\t"==q[0]?(q=a.cm.options.tabSize,q-=a.col%q,x=l.appendChild(r("span",G(q),"cm-tab")),x.setAttribute("role","presentation"),x.setAttribute("cm-text","\t"),a.col+=q):("\r"==q[0]||"\n"==q[0]?(x=l.appendChild(r("span","\r"==q[0]?"␍":"␤","cm-invalidchar")),x.setAttribute("cm-text",q[0])):(x=a.cm.options.specialCharPlaceholder(q[0]),x.setAttribute("cm-text",q[0]),M&&9>S?l.appendChild(r("span",[x])):l.appendChild(x)),a.col+=1);a.map.push(a.pos,
a.pos+1,x);a.pos++}}else a.col+=b.length,l=document.createTextNode(p),a.map.push(a.pos,a.pos+b.length,l),M&&9>S&&(F=!0),a.pos+=b.length;a.trailingSpace=32==p.charCodeAt(b.length-1);if(c||d||e||F||g){b=c||"";d&&(b+=d);e&&(b+=e);d=r("span",[l],b,g);if(h)for(var t in h)h.hasOwnProperty(t)&&"style"!=t&&"class"!=t&&d.setAttribute(t,h[t]);return a.content.appendChild(d)}a.content.appendChild(l)}}function qg(a,b){return function(c,d,e,g,h,l,p){e=e?e+" cm-force-border":"cm-force-border";for(var u=c.pos,F=
u+d.length;;){for(var f=void 0,q=0;q<b.length&&!(f=b[q],f.to>u&&f.from<=u);q++);if(f.to>=F)return a(c,d,e,g,h,l,p);a(c,d.slice(0,f.to-u),e,g,null,l,p);g=null;d=d.slice(f.to-u);u=f.to}}}function qe(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e);!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id));e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e));a.pos+=b;a.trailingSpace=!1}function re(a,
b,c){for(var d=this.line=b,e;d=kb(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);this.size=(this.rest=e)?O(z(this.rest))-c+1:1;this.node=this.text=null;this.hidden=La(a,b)}function wc(a,b,c){var d=[],e;for(e=b;e<c;)b=new re(a.doc,D(a.doc,e),e),e+=b.size,d.push(b);return d}function sg(a,b){var c=a.ownsGroup;if(c)try{var d=c.delayedCallbacks,e=0;do{for(;e<d.length;e++)d[e].call(null);for(var g=0;g<c.ops.length;g++){var h=c.ops[g];if(h.cursorActivityHandlers)for(;h.cursorActivityCalled<h.cursorActivityHandlers.length;)h.cursorActivityHandlers[h.cursorActivityCalled++].call(null,
h.cm)}}while(e<d.length)}finally{mb=null,b(c)}}function ea(a,b){var c=a._handlers&&a._handlers[b]||pc;if(c.length){var d=Array.prototype.slice.call(arguments,2),e;mb?e=mb.delayedCallbacks:Hb?e=Hb:(e=Hb=[],setTimeout(tg,0));for(var g=function(a){e.push(function(){return c[a].apply(null,d)})},h=0;h<c.length;++h)g(h)}}function tg(){var a=Hb;Hb=null;for(var b=0;b<a.length;++b)a[b]()}function se(a,b,c,d){for(var e=0;e<b.changes.length;e++){var g=b.changes[e];if("text"==g){var g=a,h=b,l=h.text.className,
p=te(g,h);h.text==h.node&&(h.node=p.pre);h.text.parentNode.replaceChild(p.pre,h.text);h.text=p.pre;p.bgClass!=h.bgClass||p.textClass!=h.textClass?(h.bgClass=p.bgClass,h.textClass=p.textClass,ld(g,h)):l&&(h.text.className=l)}else if("gutter"==g)ue(a,b,c,d);else if("class"==g)ld(a,b);else if("widget"==g){g=a;h=b;l=d;h.alignable&&(h.alignable=null);for(var p=Q("CodeMirror-linewidget"),u=h.node.firstChild,F=void 0;u;u=F)F=u.nextSibling,p.test(u.className)&&h.node.removeChild(u);ve(g,h,l)}}b.changes=null}
function Ib(a){a.node==a.text&&(a.node=r("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),M&&8>S&&(a.node.style.zIndex=2));return a.node}function te(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):pe(a,b)}function ld(a,b){var c=b.bgClass?b.bgClass+" "+(b.line.bgClass||""):b.line.bgClass;c&&(c+=" CodeMirror-linebackground");if(b.background)c?
b.background.className=c:(b.background.parentNode.removeChild(b.background),b.background=null);else if(c){var d=Ib(b);b.background=d.insertBefore(r("div",null,c),d.firstChild);a.display.input.setUneditable(b.background)}b.line.wrapClass?Ib(b).className=b.line.wrapClass:b.node!=b.text&&(b.node.className="");b.text.className=(b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass)||""}function ue(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);b.gutterBackground&&(b.node.removeChild(b.gutterBackground),
b.gutterBackground=null);if(b.line.gutterClass){var e=Ib(b);b.gutterBackground=r("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px");a.display.input.setUneditable(b.gutterBackground);e.insertBefore(b.gutterBackground,b.text)}e=b.line.gutterMarkers;if(a.options.lineNumbers||e){var g=Ib(b),h=b.gutter=r("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+
"px");a.display.input.setUneditable(h);g.insertBefore(h,b.text);b.line.gutterClass&&(h.className+=" "+b.line.gutterClass);!a.options.lineNumbers||e&&e["CodeMirror-linenumbers"]||(b.lineNumber=h.appendChild(r("div",ad(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px")));if(e)for(b=0;b<a.display.gutterSpecs.length;++b)c=a.display.gutterSpecs[b].className,(g=e.hasOwnProperty(c)&&e[c])&&h.appendChild(r("div",
[g],"CodeMirror-gutter-elt","left: "+d.gutterLeft[c]+"px; width: "+d.gutterWidth[c]+"px"))}}function ug(a,b,c,d){var e=te(a,b);b.text=b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);ld(a,b);ue(a,b,c,d);ve(a,b,d);return b.node}function ve(a,b,c){we(a,b.line,b,c,!0);if(b.rest)for(var d=0;d<b.rest.length;d++)we(a,b.rest[d],b,c,!1)}function we(a,b,c,d,e){if(b.widgets){var g=Ib(c),h=0;for(b=b.widgets;h<b.length;++h){var l=b[h],p=r("div",[l.node],"CodeMirror-linewidget"+
(l.className?" "+l.className:""));l.handleMouseEvents||p.setAttribute("cm-ignore-events","true");var u=l,F=p,f=d;if(u.noHScroll){(c.alignable||(c.alignable=[])).push(F);var q=f.wrapperWidth;F.style.left=f.fixedPos+"px";u.coverGutter||(q-=f.gutterTotalWidth,F.style.paddingLeft=f.gutterTotalWidth+"px");F.style.width=q+"px"}u.coverGutter&&(F.style.zIndex=5,F.style.position="relative",u.noHScroll||(F.style.marginLeft=-f.gutterTotalWidth+"px"));a.display.input.setUneditable(p);e&&l.above?g.insertBefore(p,
c.gutter||c.text):g.appendChild(p);ea(l,"redraw")}}}function Jb(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!A(document.body,a.node)){var c="position: relative;";a.coverGutter&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;");a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;");Z(b.display.measure,r("div",[a.node],null,c))}return a.height=a.node.parentNode.offsetHeight}function Ha(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||
1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==a.sizer&&c!=a.mover)return!0}function md(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function xe(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=Z(a.measure,r("pre","x","CodeMirror-line-like")),b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function Da(a){return 50-
a.display.nativeBarWidth}function Wa(a){return a.display.scroller.clientWidth-Da(a)-a.display.barWidth}function nd(a){return a.display.scroller.clientHeight-Da(a)-a.display.barHeight}function ye(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(b=0;b<a.rest.length;b++)if(O(a.rest[b])>c)return{map:a.measure.maps[b],cache:a.measure.caches[b],before:!0}}function od(a,b){if(b>=
a.display.viewFrom&&b<a.display.viewTo)return a.display.view[Xa(a,b)];var c=a.display.externalMeasured;if(c&&b>=c.lineN&&b<c.lineN+c.size)return c}function Ya(a,b){var c=O(b),d=od(a,c);d&&!d.text?d=null:d&&d.changes&&(se(a,d,c,pd(a)),a.curOp.forceUpdate=!0);if(!d){var e;e=Ba(b);d=O(e);e=a.display.externalMeasured=new re(a.doc,e,d);e.lineN=d;d=e.built=pe(a,e);e.text=d.pre;Z(a.display.lineMeasure,d.pre);d=e}c=ye(d,b,c);return{line:b,view:d,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}
function va(a,b,c,d,e){b.before&&(c=-1);var g=c+(d||"");if(b.cache.hasOwnProperty(g))a=b.cache[g];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var h=b.view,l=b.rect,p=a.options.lineWrapping,u=p&&Wa(a);if(!h.measure.heights||p&&h.measure.width!=u){var f=h.measure.heights=[];if(p)for(h.measure.width=u,h=h.text.firstChild.getClientRects(),p=0;p<h.length-1;p++){var u=h[p],k=h[p+1];2<Math.abs(u.bottom-k.bottom)&&f.push((u.bottom+k.top)/2-l.top)}f.push(l.bottom-l.top)}b.hasHeights=
!0}f=d;h=ze(b.map,c,f);d=h.node;l=h.start;p=h.end;c=h.collapse;var q;if(3==d.nodeType){for(var x=0;4>x;x++){for(;l&&V(b.line.text.charAt(h.coverStart+l));)--l;for(;h.coverStart+p<h.coverEnd&&V(b.line.text.charAt(h.coverStart+p));)++p;if(M&&9>S&&0==l&&p==h.coverEnd-h.coverStart)q=d.parentNode.getBoundingClientRect();else{q=lb(d,l,p).getClientRects();p=Ae;if("left"==f)for(u=0;u<q.length&&(p=q[u]).left==p.right;u++);else for(u=q.length-1;0<=u&&(p=q[u]).left==p.right;u--);q=p}if(q.left||q.right||0==l)break;
p=l;--l;c="right"}M&&11>S&&((x=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=qd?x=qd:(f=Z(a.display.measure,r("span","x")),x=f.getBoundingClientRect(),f=lb(f,0,1).getBoundingClientRect(),x=qd=1<Math.abs(x.left-f.left)),x=!x),x||(x=screen.logicalXDPI/screen.deviceXDPI,f=screen.logicalYDPI/screen.deviceYDPI,q={left:q.left*x,right:q.right*x,top:q.top*f,bottom:q.bottom*f}))}else 0<l&&(c=f="right"),q=a.options.lineWrapping&&1<(x=d.getClientRects()).length?x["right"==
f?x.length-1:0]:d.getBoundingClientRect();!(M&&9>S)||l||q&&(q.left||q.right)||(q=(q=d.parentNode.getClientRects()[0])?{left:q.left,right:q.left+nb(a.display),top:q.top,bottom:q.bottom}:Ae);d=q.top-b.rect.top;l=q.bottom-b.rect.top;x=(d+l)/2;f=b.view.measure.heights;for(h=0;h<f.length-1&&!(x<f[h]);h++);c={left:("right"==c?q.right:q.left)-b.rect.left,right:("left"==c?q.left:q.right)-b.rect.left,top:h?f[h-1]:0,bottom:f[h]};q.left||q.right||(c.bogus=!0);a.options.singleCursorHeightPerLine||(c.rtop=d,c.rbottom=
l);a=c;a.bogus||(b.cache[g]=a)}return{left:a.left,right:a.right,top:e?a.rtop:a.top,bottom:e?a.rbottom:a.bottom}}function ze(a,b,c){for(var d,e,g,h,l,p,u=0;u<a.length;u+=3){l=a[u];p=a[u+1];if(b<l)e=0,g=1,h="left";else if(b<p)e=b-l,g=e+1;else if(u==a.length-3||b==p&&a[u+3]>b)g=p-l,e=g-1,b>=p&&(h="right");if(null!=e){d=a[u+2];l==p&&c==(d.insertLeft?"left":"right")&&(h=c);if("left"==c&&0==e)for(;u&&a[u-2]==a[u-3]&&a[u-1].insertLeft;)d=a[(u-=3)+2],h="left";if("right"==c&&e==p-l)for(;u<a.length-3&&a[u+
3]==a[u+4]&&!a[u+5].insertLeft;)d=a[(u+=3)+2],h="right";break}}return{node:d,start:e,end:g,collapse:h,coverStart:l,coverEnd:p}}function Be(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function Ce(a){a.display.externalMeasure=null;da(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)Be(a.display.view[b])}function Kb(a){Ce(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||
(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function De(){return xc&&yc?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ee(){return xc&&yc?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function rd(a){var b=0;if(a.widgets)for(var c=
0;c<a.widgets.length;++c)a.widgets[c].above&&(b+=Jb(a.widgets[c]));return b}function zc(a,b,c,d,e){e||(e=rd(b),c.top+=e,c.bottom+=e);if("line"==d)return c;d||(d="local");b=Ca(b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==d?0:Ee()),d=a.left+("window"==d?0:De()),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function Fe(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=
De(),b-=Ee()):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function sd(a,b,c,d,e){d||(d=D(a.doc,b.line));var g=d;b=b.ch;d=va(a,Ya(a,d),b,e);return zc(a,g,d,c)}function wa(a,b,c,d,e,g){function h(b,h){var l=va(a,e,b,h?"right":"left",g);h?l.left=l.right:l.right=l.left;return zc(a,d,l,c)}function l(a,b,d){return h(d?a-1:a,1==p[b].level!=d)}d=d||D(a.doc,b.line);e||(e=Ya(a,d));var p=na(d,a.doc.direction),
u=b.ch;b=b.sticky;u>=d.text.length?(u=d.text.length,b="before"):0>=u&&(u=0,b="after");if(!p)return h("before"==b?u-1:u,"before"==b);var f=U(p,u,b),k=Cb,f=l(u,f,"before"==b);null!=k&&(f.other=l(u,k,"before"!=b));return f}function Ge(a,b){var c=0;b=L(a.doc,b);a.options.lineWrapping||(c=nb(a.display)*b.ch);var d=D(a.doc,b.line),e=Ca(d)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:e,bottom:e+d.height}}function td(a,b,c,d,e){a=w(a,b,c);a.xRel=e;d&&(a.outside=d);return a}function ud(a,b,c){var d=
a.doc;c+=a.display.viewOffset;if(0>c)return td(d.first,0,null,-1,-1);var e=Va(d,c),g=d.first+d.size-1;if(e>g)return td(d.first+d.size-1,D(d,g).text.length,null,1,1);0>b&&(b=0);for(var h=D(d,e);;){var g=vg(a,h,e,b,c),l;l=g.ch+(0<g.xRel||0<g.outside?1:0);var h=Ga&&h.markedSpans,p=void 0;if(h)for(var u=0;u<h.length;++u){var f=h[u];f.marker.collapsed&&(null==f.from||f.from<l)&&(null==f.to||f.to>l)&&(!p||0>gd(p,f.marker))&&(p=f.marker)}l=p;if(!l)return g;g=l.find(1);if(g.line==e)return g;h=D(d,e=g.line)}}
function He(a,b,c,d){d-=rd(b);b=b.text.length;var e=ra(function(b){return va(a,c,b-1).bottom<=d},b,0);b=ra(function(b){return va(a,c,b).top>d},e,b);return{begin:e,end:b}}function Ie(a,b,c,d){c||(c=Ya(a,b));d=zc(a,b,va(a,c,d),"line").top;return He(a,b,c,d)}function vd(a,b,c,d){return a.bottom<=c?!1:a.top>c?!0:(d?a.left:a.right)>b}function vg(a,b,c,d,e){e-=Ca(b);var g=Ya(a,b),h=rd(b),l=0,p=b.text.length,u=!0,f=na(b,a.doc.direction);f&&(f=(a.options.lineWrapping?wg:xg)(a,b,c,g,f,d,e),l=(u=1!=f.level)?
f.from:f.to-1,p=u?f.to:f.from-1);var k=null,q=null,f=ra(function(b){var c=va(a,g,b);c.top+=h;c.bottom+=h;if(!vd(c,d,e,!1))return!1;c.top<=e&&c.left<=d&&(k=b,q=c);return!0},l,p),x=!1;q?(l=d-q.left<q.right-d,u=l==u,f=k+(u?0:1),u=u?"after":"before",l=l?q.left:q.right):(u||f!=p&&f!=l||f++,u=0==f?"after":f==b.text.length?"before":va(a,g,f-(u?1:0)).bottom+h<=e==u?"after":"before",x=wa(a,w(c,f,u),"line",b,g),l=x.left,x=e<x.top?-1:e>=x.bottom?1:0);f=Bb(b.text,f,1);return td(c,f,u,x,d-l)}function xg(a,b,c,
d,e,g,h){var l=ra(function(l){l=e[l];var p=1!=l.level;return vd(wa(a,w(c,p?l.to:l.from,p?"before":"after"),"line",b,d),g,h,!0)},0,e.length-1),p=e[l];if(0<l){var u=1!=p.level,u=wa(a,w(c,u?p.from:p.to,u?"after":"before"),"line",b,d);vd(u,g,h,!0)&&u.top>h&&(p=e[l-1])}return p}function wg(a,b,c,d,e,g,h){h=He(a,b,d,h);c=h.begin;h=h.end;/\s/.test(b.text.charAt(h-1))&&h--;for(var l=b=null,p=0;p<e.length;p++){var u=e[p];if(!(u.from>=h||u.to<=c)){var f=va(a,d,1!=u.level?Math.min(h,u.to)-1:Math.max(c,u.from)).right,
f=f<g?g-f+1E9:f-g;if(!b||l>f)b=u,l=f}}b||(b=e[e.length-1]);b.from<c&&(b={from:c,to:b.to,level:b.level});b.to>h&&(b={from:b.from,to:h,level:b.level});return b}function ob(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Za){Za=r("pre",null,"CodeMirror-line-like");for(var b=0;49>b;++b)Za.appendChild(document.createTextNode("x")),Za.appendChild(r("br"));Za.appendChild(document.createTextNode("x"))}Z(a.measure,Za);b=Za.offsetHeight/50;3<b&&(a.cachedTextHeight=b);da(a.measure);return b||
1}function nb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=r("span","xxxxxxxxxx"),c=r("pre",[b],"CodeMirror-line-like");Z(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;2<b&&(a.cachedCharWidth=b);return b||10}function pd(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,g=b.gutters.firstChild,h=0;g;g=g.nextSibling,++h){var l=a.display.gutterSpecs[h].className;c[l]=g.offsetLeft+g.clientLeft+e;d[l]=g.clientWidth}return{fixedPos:wd(b),gutterTotalWidth:b.gutters.offsetWidth,
gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function wd(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function Je(a){var b=ob(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/nb(a.display)-3);return function(e){if(La(a.doc,e))return 0;var g=0;if(e.widgets)for(var h=0;h<e.widgets.length;h++)e.widgets[h].height&&(g+=e.widgets[h].height);return c?g+(Math.ceil(e.text.length/d)||1)*b:g+b}}function xd(a){var b=
a.doc,c=Je(a);b.iter(function(a){var b=c(a);b!=a.height&&za(a,b)})}function $a(a,b,c,d){var e=a.display;if(!c&&"true"==(b.target||b.srcElement).getAttribute("cm-not-content"))return null;var g,h;c=e.lineSpace.getBoundingClientRect();try{g=b.clientX-c.left,h=b.clientY-c.top}catch(l){return null}b=ud(a,g,h);var p;d&&0<b.xRel&&(p=D(a.doc,b.line).text).length==b.ch&&(d=I(p,p.length,a.options.tabSize)-p.length,b=w(b.line,Math.max(0,Math.round((g-xe(a.display).left)/nb(a.display))-d)));return b}function Xa(a,
b){if(b>=a.display.viewTo)return null;b-=a.display.viewFrom;if(0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,0>b)return d}function ka(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=e.viewTo)Ga&&hd(a.doc,b)<e.viewTo&&Ma(a);else if(c<=e.viewFrom)Ga&&ne(a.doc,c+d)>e.viewFrom?Ma(a):(e.viewFrom+=d,e.viewTo+=
d);else if(b<=e.viewFrom&&c>=e.viewTo)Ma(a);else if(b<=e.viewFrom){var g=Ac(a,c,c+d,1);g?(e.view=e.view.slice(g.index),e.viewFrom=g.lineN,e.viewTo+=d):Ma(a)}else if(c>=e.viewTo)(g=Ac(a,b,b,-1))?(e.view=e.view.slice(0,g.index),e.viewTo=g.lineN):Ma(a);else{var g=Ac(a,b,b,-1),h=Ac(a,c,c+d,1);g&&h?(e.view=e.view.slice(0,g.index).concat(wc(a,g.lineN,h.lineN)).concat(e.view.slice(h.index)),e.viewTo+=d):Ma(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+a.size&&(e.externalMeasured=null)}function Na(a,
b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[Xa(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==v(a,c)&&a.push(c)))}function Ma(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function Ac(a,b,c,d){var e=Xa(a,b),g=a.display.view;if(!Ga||c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var h=a.display.viewFrom,l=0;l<e;l++)h+=
g[l].size;if(h!=b){if(0<d){if(e==g.length-1)return null;b=h+g[e].size-b;e++}else b=h-b;c+=b}for(;hd(a.doc,c)!=c;){if(e==(0>d?0:g.length-1))return null;c+=d*g[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function Ke(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&!d.changes||++b}return b}function Lb(a){a.display.input.showSelection(a.display.input.prepareSelection())}function Le(a,b){void 0===b&&(b=!0);for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),
g=d.selection=document.createDocumentFragment(),h=0;h<c.sel.ranges.length;h++)if(b||h!=c.sel.primIndex){var l=c.sel.ranges[h];if(!(l.from().line>=a.display.viewTo||l.to().line<a.display.viewFrom)){var p=l.empty();(p||a.options.showCursorWhenSelecting)&&Me(a,l.head,e);p||yg(a,l,g)}}return d}function Me(a,b,c){b=wa(a,b,"div",null,null,!a.options.singleCursorHeightPerLine);var d=c.appendChild(r("div"," ","CodeMirror-cursor"));d.style.left=b.left+"px";d.style.top=b.top+"px";d.style.height=Math.max(0,
b.bottom-b.top)*a.options.cursorHeight+"px";b.other&&(a=c.appendChild(r("div"," ","CodeMirror-cursor CodeMirror-secondarycursor")),a.style.display="",a.style.left=b.other.left+"px",a.style.top=b.other.top+"px",a.style.height=.85*(b.other.bottom-b.other.top)+"px")}function Bc(a,b){return a.top-b.top||a.left-b.left}function yg(a,b,c){function d(a,b,d,c){0>b&&(b=0);b=Math.round(b);c=Math.round(c);l.appendChild(r("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px;\n                             top: "+
b+"px; width: "+(null==d?f-a:d)+"px;\n                             height: "+(c-b)+"px"))}function e(b,c,e){function g(d,c){return sd(a,w(b,d),"div",p,c)}function l(b,d,c){b=Ie(a,p,null,b);d="ltr"==d==("after"==c)?"left":"right";c="after"==c?b.begin:b.end-(/\s/.test(p.text.charAt(b.end-1))?2:1);return g(c,d)[d]}var p=D(h,b),q=p.text.length,t,n,C=na(p,h.direction);Ka(C,c||0,null==e?q:e,function(a,b,h,p){var x="ltr"==h,m=g(a,x?"left":"right"),H=g(b-1,x?"right":"left"),I=null==c&&0==a,v=null==e&&b==
q,na=0==p;p=!C||p==C.length-1;3>=H.top-m.top?(b=(k?I:v)&&na?u:(x?m:H).left,d(b,m.top,((k?v:I)&&p?f:(x?H:m).right)-b,m.bottom)):(x?(x=k&&I&&na?u:m.left,I=k?f:l(a,h,"before"),a=k?u:l(b,h,"after"),v=k&&v&&p?f:H.right):(x=k?l(a,h,"before"):u,I=!k&&I&&na?f:m.right,a=!k&&v&&p?u:H.left,v=k?l(b,h,"after"):f),d(x,m.top,I-x,m.bottom),m.bottom<H.top&&d(u,m.bottom,null,H.top),d(a,H.top,v-a,H.bottom));if(!t||0>Bc(m,t))t=m;0>Bc(H,t)&&(t=H);if(!n||0>Bc(m,n))n=m;0>Bc(H,n)&&(n=H)});return{start:t,end:n}}var g=a.display,
h=a.doc,l=document.createDocumentFragment(),p=xe(a.display),u=p.left,f=Math.max(g.sizerWidth,Wa(a)-g.sizer.offsetLeft)-p.right,k="ltr"==h.direction,g=b.from();b=b.to();if(g.line==b.line)e(g.line,g.ch,b.ch);else{var q=D(h,g.line),p=D(h,b.line),p=Ba(q)==Ba(p),g=e(g.line,g.ch,p?q.text.length+1:null).end;b=e(b.line,p?0:null,b.ch).start;p&&(g.top<b.top-2?(d(g.right,g.top,null,g.bottom),d(u,b.top,b.left,b.bottom)):d(g.right,g.top,b.left-g.right,g.bottom));g.bottom<b.top&&d(u,g.bottom,null,b.top)}c.appendChild(l)}
function yd(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){return b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function Ne(a){a.state.focused||(a.display.input.focus(),zd(a))}function Oe(a){a.state.delayingBlurEvent=!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=
!1,Mb(a))},100)}function zd(a,b){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(X(a,"focus",a,b),a.state.focused=!0,B(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),ga&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),yd(a))}function Mb(a,b){a.state.delayingBlurEvent||(a.state.focused&&(X(a,"blur",a,b),a.state.focused=!1,ab(a.display.wrapper,
"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function Cc(a){for(var b=a.display,c=b.lineDiv.offsetTop,d=0;d<b.view.length;d++){var e=b.view[d],g=a.options.lineWrapping,h=void 0,l=0;if(!e.hidden){if(M&&8>S)g=e.node.offsetTop+e.node.offsetHeight,h=g-c,c=g;else{var p=e.node.getBoundingClientRect(),h=p.bottom-p.top;!g&&e.text.firstChild&&(l=e.text.firstChild.getBoundingClientRect().right-p.left-1)}g=e.line.height-h;if(.005<
g||-.005>g)if(za(e.line,h),Pe(e.line),e.rest)for(h=0;h<e.rest.length;h++)Pe(e.rest[h]);l>a.display.sizerWidth&&(l=Math.ceil(l/nb(a.display)),l>a.display.maxLineLength&&(a.display.maxLineLength=l,a.display.maxLine=e.line,a.display.maxLineChanged=!0))}}}function Pe(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b){var c=a.widgets[b],d=c.node.parentNode;d&&(c.height=d.offsetHeight)}}function Dc(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop,d=Math.floor(d-a.lineSpace.offsetTop),
e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,d=Va(b,d),e=Va(b,e);if(c&&c.ensure){var g=c.ensure.from.line;c=c.ensure.to.line;g<d?(d=g,e=Va(b,Ca(D(b,g))+a.wrapper.clientHeight)):Math.min(c,b.lastLine())>=e&&(d=Va(b,Ca(D(b,c))-a.wrapper.clientHeight),e=c)}return{from:d,to:Math.max(e,d+1)}}function Ad(a,b){var c=a.display,d=ob(a.display);0>b.top&&(b.top=0);var e=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:c.scroller.scrollTop,g=nd(a),h={};b.bottom-b.top>g&&(b.bottom=b.top+g);var l=a.doc.height+
md(c),p=b.top<d,d=b.bottom>l-d;b.top<e?h.scrollTop=p?0:b.top:b.bottom>e+g&&(g=Math.min(b.top,(d?l:b.bottom)-g),g!=e&&(h.scrollTop=g));e=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:c.scroller.scrollLeft;c=Wa(a)-(a.options.fixedGutter?c.gutters.offsetWidth:0);if(g=b.right-b.left>c)b.right=b.left+c;10>b.left?h.scrollLeft=0:b.left<e?h.scrollLeft=Math.max(0,b.left-(g?0:10)):b.right>c+e-3&&(h.scrollLeft=b.right+(g?0:10)-c);return h}function Ec(a,b){null!=b&&(Fc(a),a.curOp.scrollTop=(null==a.curOp.scrollTop?
a.doc.scrollTop:a.curOp.scrollTop)+b)}function pb(a){Fc(a);var b=a.getCursor();a.curOp.scrollToPos={from:b,to:b,margin:a.options.cursorScrollMargin}}function Nb(a,b,c){null==b&&null==c||Fc(a);null!=b&&(a.curOp.scrollLeft=b);null!=c&&(a.curOp.scrollTop=c)}function Fc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=Ge(a,b.from),d=Ge(a,b.to);Qe(a,c,d,b.margin)}}function Qe(a,b,c,d){b=Ad(a,{left:Math.min(b.left,c.left),top:Math.min(b.top,c.top)-d,right:Math.max(b.right,c.right),bottom:Math.max(b.bottom,
c.bottom)+d});Nb(a,b.scrollLeft,b.scrollTop)}function Ob(a,b){2>Math.abs(a.doc.scrollTop-b)||(Ia||Bd(a,{top:b}),Re(a,b,!0),Ia&&Bd(a),Pb(a,100))}function Re(a,b,c){b=Math.max(0,Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,b));if(a.display.scroller.scrollTop!=b||c)a.doc.scrollTop=b,a.display.scrollbars.setScrollTop(b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b)}function bb(a,b,c,d){b=Math.max(0,Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth));
(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))&&!d||(a.doc.scrollLeft=b,Se(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function Qb(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+md(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:
0,docHeight:d,scrollHeight:d+Da(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function qb(a,b){b||(b=Qb(a));var c=a.display.barWidth,d=a.display.barHeight;Te(a,b);for(var e=0;4>e&&c!=a.display.barWidth||d!=a.display.barHeight;e++)c!=a.display.barWidth&&a.options.lineWrapping&&Cc(a),Te(a,Qb(a)),c=a.display.barWidth,d=a.display.barHeight}function Te(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px";c.sizer.style.paddingBottom=(c.barHeight=
d.bottom)+"px";c.heightForcer.style.borderBottom=d.bottom+"px solid transparent";d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="";d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function Ue(a){a.display.scrollbars&&
(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&ab(a.display.wrapper,a.display.scrollbars.addClass));a.display.scrollbars=new Ve[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller);E(b,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?bb(a,b):Ob(a,b)},a);a.display.scrollbars.addClass&&B(a.display.wrapper,a.display.scrollbars.addClass)}
function cb(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++zg};a=a.curOp;mb?mb.ops.push(a):a.ownsGroup=mb={ops:[a],delayedCallbacks:[]}}function db(a){(a=a.curOp)&&sg(a,function(a){for(var c=0;c<a.ops.length;c++)a.ops[c].cm.curOp=null;a=a.ops;for(c=0;c<a.length;c++){var d=a[c],e=d.cm,g=
e.display,h=e.display;!h.scrollbarsClipped&&h.scroller.offsetWidth&&(h.nativeBarWidth=h.scroller.offsetWidth-h.scroller.clientWidth,h.heightForcer.style.height=Da(e)+"px",h.sizer.style.marginBottom=-h.nativeBarWidth+"px",h.sizer.style.borderRightWidth=Da(e)+"px",h.scrollbarsClipped=!0);d.updateMaxLine&&jd(e);d.mustUpdate=d.viewChanged||d.forceUpdate||null!=d.scrollTop||d.scrollToPos&&(d.scrollToPos.from.line<g.viewFrom||d.scrollToPos.to.line>=g.viewTo)||g.maxLineChanged&&e.options.lineWrapping;d.update=
d.mustUpdate&&new Gc(e,d.mustUpdate&&{top:d.scrollTop,ensure:d.scrollToPos},d.forceUpdate)}for(c=0;c<a.length;c++)d=a[c],d.updatedDisplay=d.mustUpdate&&Cd(d.cm,d.update);for(c=0;c<a.length;c++)if(d=a[c],e=d.cm,g=e.display,d.updatedDisplay&&Cc(e),d.barMeasure=Qb(e),g.maxLineChanged&&!e.options.lineWrapping&&(h=void 0,h=g.maxLine.text.length,h=va(e,Ya(e,g.maxLine),h,void 0),d.adjustWidthTo=h.left+3,e.display.sizerWidth=d.adjustWidthTo,d.barMeasure.scrollWidth=Math.max(g.scroller.clientWidth,g.sizer.offsetLeft+
d.adjustWidthTo+Da(e)+e.display.barWidth),d.maxScrollLeft=Math.max(0,g.sizer.offsetLeft+d.adjustWidthTo-Wa(e))),d.updatedDisplay||d.selectionChanged)d.preparedSelection=g.input.prepareSelection();for(c=0;c<a.length;c++)d=a[c],e=d.cm,null!=d.adjustWidthTo&&(e.display.sizer.style.minWidth=d.adjustWidthTo+"px",d.maxScrollLeft<e.doc.scrollLeft&&bb(e,Math.min(e.display.scroller.scrollLeft,d.maxScrollLeft),!0),e.display.maxLineChanged=!1),g=d.focus&&d.focus==m(),d.preparedSelection&&e.display.input.showSelection(d.preparedSelection,
g),(d.updatedDisplay||d.startHeight!=e.doc.height)&&qb(e,d.barMeasure),d.updatedDisplay&&Dd(e,d.barMeasure),d.selectionChanged&&yd(e),e.state.focused&&d.updateInput&&e.display.input.reset(d.typing),g&&Ne(d.cm);for(c=0;c<a.length;c++){d=a[c];e=d.cm;g=e.display;h=e.doc;d.updatedDisplay&&We(e,d.update);null==g.wheelStartX||null==d.scrollTop&&null==d.scrollLeft&&!d.scrollToPos||(g.wheelStartX=g.wheelStartY=null);null!=d.scrollTop&&Re(e,d.scrollTop,d.forceScroll);null!=d.scrollLeft&&bb(e,d.scrollLeft,
!0,!0);if(d.scrollToPos){var l=L(h,d.scrollToPos.from),p=L(h,d.scrollToPos.to),u=d.scrollToPos.margin;null==u&&(u=0);var f=void 0;e.options.lineWrapping||l!=p||(l=l.ch?w(l.line,"before"==l.sticky?l.ch-1:l.ch,"after"):l,p="before"==l.sticky?w(l.line,l.ch+1,"before"):l);for(var k=0;5>k;k++){var q=!1,f=wa(e,l),x=p&&p!=l?wa(e,p):f,f={left:Math.min(f.left,x.left),top:Math.min(f.top,x.top)-u,right:Math.max(f.left,x.left),bottom:Math.max(f.bottom,x.bottom)+u},x=Ad(e,f),t=e.doc.scrollTop,n=e.doc.scrollLeft;
null!=x.scrollTop&&(Ob(e,x.scrollTop),1<Math.abs(e.doc.scrollTop-t)&&(q=!0));null!=x.scrollLeft&&(bb(e,x.scrollLeft),1<Math.abs(e.doc.scrollLeft-n)&&(q=!0));if(!q)break}p=f;aa(e,"scrollCursorIntoView")||(u=e.display,k=u.sizer.getBoundingClientRect(),l=null,0>p.top+k.top?l=!0:p.bottom+k.top>(window.innerHeight||document.documentElement.clientHeight)&&(l=!1),null==l||Ag||(p=r("div","​",null,"position: absolute;\n                         top: "+(p.top-u.viewOffset-e.display.lineSpace.offsetTop)+"px;\n                         height: "+
(p.bottom-p.top+Da(e)+u.barHeight)+"px;\n                         left: "+p.left+"px; width: "+Math.max(2,p.right-p.left)+"px;"),e.display.lineSpace.appendChild(p),p.scrollIntoView(l),e.display.lineSpace.removeChild(p)))}p=d.maybeHiddenMarkers;l=d.maybeUnhiddenMarkers;if(p)for(u=0;u<p.length;++u)p[u].lines.length||X(p[u],"hide");if(l)for(p=0;p<l.length;++p)l[p].lines.length&&X(l[p],"unhide");g.wrapper.offsetHeight&&(h.scrollTop=e.display.scroller.scrollTop);d.changeObjs&&X(e,"changes",e,d.changeObjs);
d.update&&d.update.finish()}})}function ma(a,b){if(a.curOp)return b();cb(a);try{return b()}finally{db(a)}}function ba(a,b){return function(){if(a.curOp)return b.apply(a,arguments);cb(a);try{return b.apply(a,arguments)}finally{db(a)}}}function ha(a){return function(){if(this.curOp)return a.apply(this,arguments);cb(this);try{return a.apply(this,arguments)}finally{db(this)}}}function ca(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);cb(b);try{return a.apply(this,arguments)}finally{db(b)}}}
function Pb(a,b){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(b,f(Bg,a))}function Bg(a){var b=a.doc;if(!(b.highlightFrontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=Fb(a,b.highlightFrontier),e=[];b.iter(d.line,Math.min(b.first+b.size,a.display.viewTo+500),function(g){if(d.line>=a.display.viewFrom){var h=g.styles,l=g.text.length>a.options.maxHighlightLength?Ta(b.mode,d.state):null,p=ce(a,g,d,!0);l&&(d.state=l);g.styles=p.styles;l=g.styleClasses;(p=p.classes)?g.styleClasses=
p:l&&(g.styleClasses=null);p=!h||h.length!=g.styles.length||l!=p&&(!l||!p||l.bgClass!=p.bgClass||l.textClass!=p.textClass);for(l=0;!p&&l<h.length;++l)p=h[l]!=g.styles[l];p&&e.push(d.line);g.stateAfter=d.save()}else g.text.length<=a.options.maxHighlightLength&&dd(a,g.text,d),g.stateAfter=0==d.line%5?d.save():null;d.nextLine();if(+new Date>c)return Pb(a,a.options.workDelay),!0});b.highlightFrontier=d.line;b.modeFrontier=Math.max(b.modeFrontier,d.line);e.length&&ma(a,function(){for(var b=0;b<e.length;b++)Na(a,
e[b],"text")})}}function Cd(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return Ma(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==Ke(a))return!1;Xe(a)&&(Ma(a),b.dims=pd(a));var e=d.first+d.size,g=Math.max(b.visible.from-a.options.viewportMargin,d.first),h=Math.min(e,b.visible.to+a.options.viewportMargin);c.viewFrom<g&&20>g-c.viewFrom&&(g=Math.max(d.first,c.viewFrom));c.viewTo>h&&20>c.viewTo-
h&&(h=Math.min(e,c.viewTo));Ga&&(g=hd(a.doc,g),h=ne(a.doc,h));d=g!=c.viewFrom||h!=c.viewTo||c.lastWrapHeight!=b.wrapperHeight||c.lastWrapWidth!=b.wrapperWidth;e=a.display;0==e.view.length||g>=e.viewTo||h<=e.viewFrom?(e.view=wc(a,g,h),e.viewFrom=g):(e.viewFrom>g?e.view=wc(a,g,e.viewFrom).concat(e.view):e.viewFrom<g&&(e.view=e.view.slice(Xa(a,g))),e.viewFrom=g,e.viewTo<h?e.view=e.view.concat(wc(a,e.viewTo,h)):e.viewTo>h&&(e.view=e.view.slice(0,Xa(a,h))));e.viewTo=h;c.viewOffset=Ca(D(a.doc,c.viewFrom));
a.display.mover.style.top=c.viewOffset+"px";h=Ke(a);if(!d&&0==h&&!b.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;a.hasFocus()?g=null:(g=m())&&A(a.display.lineDiv,g)?(g={activeElt:g},window.getSelection&&(e=window.getSelection(),e.anchorNode&&e.extend&&A(a.display.lineDiv,e.anchorNode)&&(g.anchorNode=e.anchorNode,g.anchorOffset=e.anchorOffset,g.focusNode=e.focusNode,g.focusOffset=e.focusOffset))):g=null;4<h&&(c.lineDiv.style.display="none");Cg(a,
c.updateLineNumbers,b.dims);4<h&&(c.lineDiv.style.display="");c.renderedView=c.view;(h=g)&&h.activeElt&&h.activeElt!=m()&&(h.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(h.activeElt.nodeName)&&h.anchorNode&&A(document.body,h.anchorNode)&&A(document.body,h.focusNode)&&(g=window.getSelection(),e=document.createRange(),e.setEnd(h.anchorNode,h.anchorOffset),e.collapse(!1),g.removeAllRanges(),g.addRange(e),g.extend(h.focusNode,h.focusOffset)));da(c.cursorDiv);da(c.selectionDiv);c.gutters.style.height=
c.sizer.style.minHeight=0;d&&(c.lastWrapHeight=b.wrapperHeight,c.lastWrapWidth=b.wrapperWidth,Pb(a,400));c.updateLineNumbers=null;return!0}function We(a,b){for(var c=b.viewport,d=!0;;d=!1){if(d&&a.options.lineWrapping&&b.oldDisplayWidth!=Wa(a))d&&(b.visible=Dc(a.display,a.doc,c));else if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+md(a.display)-nd(a),c.top)}),b.visible=Dc(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!Cd(a,b))break;Cc(a);d=Qb(a);
Lb(a);qb(a,d);Dd(a,d);b.force=!1}b.signal(a,"update",a);if(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo}function Bd(a,b){var c=new Gc(a,b);if(Cd(a,c)){Cc(a);We(a,c);var d=Qb(a);Lb(a);qb(a,d);Dd(a,d);c.finish()}}function Cg(a,b,c){function d(b){var d=b.nextSibling;ga&&ta&&a.display.currentWheelTarget==
b?b.style.display="none":b.parentNode.removeChild(b);return d}for(var e=a.display,g=a.options.lineNumbers,h=e.lineDiv,l=h.firstChild,p=e.view,e=e.viewFrom,u=0;u<p.length;u++){var f=p[u];if(!f.hidden)if(f.node&&f.node.parentNode==h){for(;l!=f.node;)l=d(l);l=g&&null!=b&&b<=e&&f.lineNumber;f.changes&&(-1<v(f.changes,"gutter")&&(l=!1),se(a,f,e,c));l&&(da(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(ad(a.options,e))));l=f.node.nextSibling}else{var k=ug(a,f,e,c);h.insertBefore(k,l)}e+=
f.size}for(;l;)l=d(l)}function Ed(a){a.sizer.style.marginLeft=a.gutters.offsetWidth+"px"}function Dd(a,b){a.display.sizer.style.minHeight=b.docHeight+"px";a.display.heightForcer.style.top=b.docHeight+"px";a.display.gutters.style.height=b.docHeight+a.display.barHeight+Da(a)+"px"}function Se(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=wd(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,g=d+"px",h=0;h<c.length;h++)if(!c[h].hidden){a.options.fixedGutter&&
(c[h].gutter&&(c[h].gutter.style.left=g),c[h].gutterBackground&&(c[h].gutterBackground.style.left=g));var l=c[h].alignable;if(l)for(var p=0;p<l.length;p++)l[p].style.left=g}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function Xe(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=ad(a.options,b.first+b.size-1),c=a.display;if(b.length!=c.lineNumChars){var d=c.measure.appendChild(r("div",[r("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth,d=d.offsetWidth-
e;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(e,c.lineGutter.offsetWidth-d)+1;c.lineNumWidth=c.lineNumInnerWidth+d;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";Ed(a.display);return!0}return!1}function Fd(a,b){for(var c=[],d=!1,e=0;e<a.length;e++){var g=a[e],h=null;"string"!=typeof g&&(h=g.style,g=g.className);if("CodeMirror-linenumbers"==g)if(b)d=!0;else continue;c.push({className:g,style:h})}b&&!d&&c.push({className:"CodeMirror-linenumbers",
style:null});return c}function Ye(a){var b=a.gutters,c=a.gutterSpecs;da(b);a.lineGutter=null;for(var d=0;d<c.length;++d){var e=c[d],g=e.className,e=e.style,h=b.appendChild(r("div",null,"CodeMirror-gutter "+g));e&&(h.style.cssText=e);"CodeMirror-linenumbers"==g&&(a.lineGutter=h,h.style.width=(a.lineNumWidth||1)+"px")}b.style.display=c.length?"":"none";Ed(a)}function Rb(a){Ye(a.display);ka(a);Se(a)}function Dg(a,b,c,d){this.input=c;this.scrollbarFiller=r("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content",
"true");this.gutterFiller=r("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=y("div",null,"CodeMirror-code");this.selectionDiv=r("div",null,null,"position: relative; z-index: 1");this.cursorDiv=r("div",null,"CodeMirror-cursors");this.measure=r("div",null,"CodeMirror-measure");this.lineMeasure=r("div",null,"CodeMirror-measure");this.lineSpace=y("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");
var e=y("div",[this.lineSpace],"CodeMirror-lines");this.mover=r("div",[e],null,"position: relative");this.sizer=r("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=r("div",null,null,"position: absolute; height: 50px; width: 1px;");this.gutters=r("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=r("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=r("div",[this.scrollbarFiller,
this.gutterFiller,this.scroller],"CodeMirror");M&&8>S&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);ga||Ia&&Sb||(this.scroller.draggable=!0);a&&(a.appendChild?a.appendChild(this.wrapper):a(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=
!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;this.gutterSpecs=Fd(d.gutters,d.lineNumbers);Ye(this);c.init(this)}function Ze(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&
(b=a.detail);null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta);return{x:b,y:c}}function Eg(a){a=Ze(a);a.x*=oa;a.y*=oa;return a}function $e(a,b){var c=Ze(b),d=c.x,c=c.y,e=a.display,g=e.scroller,h=g.scrollWidth>g.clientWidth,l=g.scrollHeight>g.clientHeight;if(d&&h||c&&l){if(c&&ta&&ga){var h=b.target,p=e.view;a:for(;h!=g;h=h.parentNode)for(var f=0;f<p.length;f++)if(p[f].node==h){a.display.currentWheelTarget=h;break a}}!d||Ia||xa||null==oa?(c&&null!=oa&&(l=c*oa,h=a.doc.scrollTop,
p=h+e.wrapper.clientHeight,0>l?h=Math.max(0,h+l-50):p=Math.min(a.doc.height,p+l+50),Bd(a,{top:h,bottom:p})),20>Hc&&(null==e.wheelStartX?(e.wheelStartX=g.scrollLeft,e.wheelStartY=g.scrollTop,e.wheelDX=d,e.wheelDY=c,setTimeout(function(){if(null!=e.wheelStartX){var a=g.scrollLeft-e.wheelStartX,b=g.scrollTop-e.wheelStartY,a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(oa=(oa*Hc+a)/(Hc+1),++Hc)}},200)):(e.wheelDX+=d,e.wheelDY+=c))):(c&&l&&Ob(a,Math.max(0,g.scrollTop+
c*oa)),bb(a,Math.max(0,g.scrollLeft+d*oa)),(!c||c&&l)&&ja(b),e.wheelStartX=null)}}function ya(a,b,c){a=a&&a.options.selectionsMayTouch;c=b[c];b.sort(function(a,b){return K(a.from(),b.from())});c=v(b,c);for(var d=1;d<b.length;d++){var e=b[d],g=b[d-1],h=K(g.to(),e.from());if(a&&!e.empty()?0<h:0<=h){var h=sc(g.from(),e.from()),l=rc(g.to(),e.to()),e=g.empty()?e.from()==e.head:g.from()==g.head;d<=c&&--c;b.splice(--d,2,new N(e?l:h,e?h:l))}}return new pa(b,c)}function Ja(a,b){return new pa([new N(a,b||a)],
0)}function Oa(a){return a.text?w(a.from.line+a.text.length-1,z(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function af(a,b){if(0>K(a,b.from))return a;if(0>=K(a,b.to))return Oa(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=Oa(b).ch-b.to.ch);return w(c,d)}function Gd(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new N(af(e.anchor,b),af(e.head,b)))}return ya(a.cm,c,a.sel.primIndex)}function bf(a,b,c){return a.line==b.line?
w(c.line,a.ch-b.ch+c.ch):w(c.line+(a.line-b.line),a.ch)}function Hd(a){a.doc.mode=Yc(a.options,a.doc.modeOption);Tb(a)}function Tb(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first;Pb(a,100);a.state.modeGen++;a.curOp&&ka(a)}function cf(a,b){return 0==b.from.ch&&0==b.to.ch&&""==z(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Id(a,b,c,d){function e(a,c,e){a.text=c;a.stateAfter&&(a.stateAfter=
null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);ke(a);le(a,e);c=d?d(a):1;c!=a.height&&za(a,c);ea(a,"change",a,b)}function g(a,b){for(var e=[],g=a;g<b;++g)e.push(new rb(p[g],c?c[g]:null,d));return e}var h=b.from,l=b.to,p=b.text,f=D(a,h.line),k=D(a,l.line),t=z(p),q=c?c[p.length-1]:null,x=l.line-h.line;b.full?(a.insert(0,g(0,p.length)),a.remove(p.length,a.size-p.length)):cf(a,b)?(l=g(0,p.length-1),e(k,k.text,q),x&&a.remove(h.line,x),l.length&&a.insert(h.line,l)):f==k?1==p.length?e(f,f.text.slice(0,
h.ch)+t+f.text.slice(l.ch),q):(x=g(1,p.length-1),x.push(new rb(t+f.text.slice(l.ch),q,d)),e(f,f.text.slice(0,h.ch)+p[0],c?c[0]:null),a.insert(h.line+1,x)):1==p.length?(e(f,f.text.slice(0,h.ch)+p[0]+k.text.slice(l.ch),c?c[0]:null),a.remove(h.line+1,x)):(e(f,f.text.slice(0,h.ch)+p[0],c?c[0]:null),e(k,t+k.text.slice(l.ch),q),q=g(1,p.length-1),1<x&&a.remove(h.line+1,x-1),a.insert(h.line+1,q));ea(a,"change",a,b)}function Pa(a,b,c){function d(a,g,h){if(a.linked)for(var l=0;l<a.linked.length;++l){var p=
a.linked[l];if(p.doc!=g){var f=h&&p.sharedHist;if(!c||f)b(p.doc,f),d(p.doc,a,f)}}}d(a,null,!0)}function df(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;xd(a);Hd(a);ef(a);a.options.lineWrapping||jd(a);a.options.mode=b.modeOption;ka(a)}function ef(a){("rtl"==a.doc.direction?B:ab)(a.display.lineDiv,"CodeMirror-rtl")}function Fg(a){ma(a,function(){ef(a);ka(a)})}function Ic(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=
this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function Jd(a,b){var c={from:cd(b.from),to:Oa(b),text:Ua(a,b.from,b.to)};ff(a,c,b.from.line,b.to.line+1);Pa(a,function(a){return ff(a,c,b.from.line,b.to.line+1)},!0);return c}function gf(a){for(;a.length;)if(z(a).ranges)a.pop();else break}function hf(a,b,c,d){var e=a.history;e.undone.length=0;var g=+new Date,h,l,p;if(p=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&e.lastModTime>g-
(a.cm?a.cm.options.historyEventDelay:500)||"*"==b.origin.charAt(0)))e.lastOp==d?(gf(e.done),h=z(e.done)):e.done.length&&!z(e.done).ranges?h=z(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),h=z(e.done)):h=void 0,p=h;if(p)l=z(h.changes),0==K(b.from,b.to)&&0==K(b.from,l.to)?l.to=Oa(b):h.changes.push(Jd(a,b));else for((h=z(e.done))&&h.ranges||Jc(a.sel,e.done),h={changes:[Jd(a,b)],generation:e.generation},e.done.push(h);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||
e.done.shift();e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=g;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;l||X(a,"historyAdded")}function Jc(a,b){var c=z(b);c&&c.ranges&&c.equals(a)||b.push(a)}function ff(a,b,c,d){var e=b["spans_"+a.id],g=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[g]=c.markedSpans);++g})}function Gg(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?
b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function jf(a,b){var c;if(c=b["spans_"+a.id]){for(var d=[],e=0;e<b.text.length;++e)d.push(Gg(c[e]));c=d}else c=null;d=fd(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var g=c[e],h=d[e];if(g&&h){var l=0;a:for(;l<h.length;++l){for(var p=h[l],f=0;f<g.length;++f)if(g[f].marker==p.marker)continue a;g.push(p)}}else h&&(c[e]=h)}return c}function sb(a,b,c){for(var d=[],e=0;e<a.length;++e){var g=a[e];if(g.ranges)d.push(c?pa.prototype.deepCopy.call(g):
g);else{var g=g.changes,h=[];d.push({changes:h});for(var l=0;l<g.length;++l){var p=g[l],f=void 0;h.push({from:p.from,to:p.to,text:p.text});if(b)for(var k in p)(f=k.match(/^spans_(\d+)$/))&&-1<v(b,Number(f[1]))&&(z(h)[k]=p[k],delete p[k])}}}return d}function Kd(a,b,c,d){return d?(a=a.anchor,c&&(d=0>K(b,a),d!=0>K(c,a)?(a=b,b=c):d!=0>K(b,c)&&(b=c)),new N(a,b)):new N(c||b,b)}function Kc(a,b,c,d,e){null==e&&(e=a.cm&&(a.cm.display.shift||a.extend));fa(a,new pa([Kd(a.sel.primary(),b,c,e)],0),d)}function kf(a,
b,c){for(var d=[],e=a.cm&&(a.cm.display.shift||a.extend),g=0;g<a.sel.ranges.length;g++)d[g]=Kd(a.sel.ranges[g],b[g],null,e);b=ya(a.cm,d,a.sel.primIndex);fa(a,b,c)}function Ld(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c;fa(a,ya(a.cm,e,a.sel.primIndex),d)}function Hg(a,b,c){c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new N(L(a,b[c].anchor),L(a,b[c].head))},origin:c&&c.origin};X(a,"beforeSelectionChange",a,c);a.cm&&X(a.cm,"beforeSelectionChange",a.cm,
c);return c.ranges!=b.ranges?ya(a.cm,c.ranges,c.ranges.length-1):b}function lf(a,b,c){var d=a.history.done,e=z(d);e&&e.ranges?(d[d.length-1]=b,Lc(a,b,c)):fa(a,b,c)}function fa(a,b,c){Lc(a,b,c);b=a.sel;var d=a.cm?a.cm.curOp.id:NaN,e=a.history,g=c&&c.origin,h;if(!(h=d==e.lastSelOp)&&(h=g&&e.lastSelOrigin==g)&&!(h=e.lastModTime==e.lastSelTime&&e.lastOrigin==g)){h=z(e.done);var l=g.charAt(0);h="*"==l||"+"==l&&h.ranges.length==b.ranges.length&&h.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=
(a.cm?a.cm.options.historyEventDelay:500)}h?e.done[e.done.length-1]=b:Jc(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=g;e.lastSelOp=d;c&&!1!==c.clearRedo&&gf(e.undone)}function Lc(a,b,c){if(sa(a,"beforeSelectionChange")||a.cm&&sa(a.cm,"beforeSelectionChange"))b=Hg(a,b,c);var d=c&&c.bias||(0>K(b.primary().head,a.sel.primary().head)?-1:1);mf(a,nf(a,b,d,!0));c&&!1===c.scroll||!a.cm||pb(a.cm)}function mf(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=1,a.cm.curOp.selectionChanged=!0,
Yd(a.cm)),ea(a,"cursorActivity",a))}function of(a){mf(a,nf(a,a.sel,null,!1))}function nf(a,b,c,d){for(var e,g=0;g<b.ranges.length;g++){var h=b.ranges[g],l=b.ranges.length==a.sel.ranges.length&&a.sel.ranges[g],p=Mc(a,h.anchor,l&&l.anchor,c,d),l=Mc(a,h.head,l&&l.head,c,d);if(e||p!=h.anchor||l!=h.head)e||(e=b.ranges.slice(0,g)),e[g]=new N(p,l)}return e?ya(a.cm,e,b.primIndex):b}function tb(a,b,c,d,e){var g=D(a,b.line);if(g.markedSpans)for(var h=0;h<g.markedSpans.length;++h){var l=g.markedSpans[h],p=l.marker,
f="selectLeft"in p?!p.selectLeft:p.inclusiveLeft,k="selectRight"in p?!p.selectRight:p.inclusiveRight;if((null==l.from||(f?l.from<=b.ch:l.from<b.ch))&&(null==l.to||(k?l.to>=b.ch:l.to>b.ch))){if(e&&(X(p,"beforeCursorEnter"),p.explicitlyCleared))if(g.markedSpans){--h;continue}else break;if(p.atomic){if(c){h=p.find(0>d?1:-1);l=void 0;if(0>d?k:f)h=pf(a,h,-d,h&&h.line==b.line?g:null);if(h&&h.line==b.line&&(l=K(h,c))&&(0>d?0>l:0<l))return tb(a,h,b,d,e)}c=p.find(0>d?-1:1);if(0>d?f:k)c=pf(a,c,d,c.line==b.line?
g:null);return c?tb(a,c,b,d,e):null}}}return b}function Mc(a,b,c,d,e){d=d||1;b=tb(a,b,c,d,e)||!e&&tb(a,b,c,d,!0)||tb(a,b,c,-d,e)||!e&&tb(a,b,c,-d,!0);return b?b:(a.cantEdit=!0,w(a.first,0))}function pf(a,b,c,d){return 0>c&&0==b.ch?b.line>a.first?L(a,w(b.line-1)):null:0<c&&b.ch==(d||D(a,b.line)).text.length?b.line<a.first+a.size-1?w(b.line+1,0):null:new w(b.line,b.ch+c)}function qf(a){a.setSelection(w(a.firstLine(),0),w(a.lastLine()),Ea)}function rf(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,
origin:b.origin,cancel:function(){return d.canceled=!0}};c&&(d.update=function(b,c,h,l){b&&(d.from=L(a,b));c&&(d.to=L(a,c));h&&(d.text=h);void 0!==l&&(d.origin=l)});X(a,"beforeChange",a,d);a.cm&&X(a.cm,"beforeChange",a.cm,d);return d.canceled?(a.cm&&(a.cm.curOp.updateInput=2),null):{from:d.from,to:d.to,text:d.text,origin:d.origin}}function ub(a,b,c){if(a.cm){if(!a.cm.curOp)return ba(a.cm,ub)(a,b,c);if(a.cm.state.suppressEdits)return}if(sa(a,"beforeChange")||a.cm&&sa(a.cm,"beforeChange"))if(b=rf(a,
b,!0),!b)return;if(c=sf&&!c&&mg(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)tf(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text,origin:b.origin});else tf(a,b)}function tf(a,b){if(1!=b.text.length||""!=b.text[0]||0!=K(b.from,b.to)){var c=Gd(a,b);hf(a,b,c,a.cm?a.cm.curOp.id:NaN);Ub(a,b,c,fd(a,b));var d=[];Pa(a,function(a,c){c||-1!=v(d,a.history)||(uf(a.history,b),d.push(a.history));Ub(a,b,null,fd(a,b))})}}function Nc(a,b,c){var d=a.cm&&a.cm.state.suppressEdits;if(!d||c){for(var e=a.history,g,h=a.sel,
l="undo"==b?e.done:e.undone,p="undo"==b?e.undone:e.done,f=0;f<l.length&&(g=l[f],c?!g.ranges||g.equals(a.sel):g.ranges);f++);if(f!=l.length){for(e.lastOrigin=e.lastSelOrigin=null;;)if(g=l.pop(),g.ranges){Jc(g,p);if(c&&!g.equals(a.sel)){fa(a,g,{clearRedo:!1});return}h=g}else{if(d){l.push(g);return}break}var k=[];Jc(h,p);p.push({changes:k,generation:e.generation});e.generation=g.generation||++e.maxGeneration;var t=sa(a,"beforeChange")||a.cm&&sa(a.cm,"beforeChange");c=function(c){var d=g.changes[c];d.origin=
b;if(t&&!rf(a,d,!1))return l.length=0,{};k.push(Jd(a,d));var e=c?Gd(a,d):z(l);Ub(a,d,e,jf(a,d));!c&&a.cm&&a.cm.scrollIntoView({from:d.from,to:Oa(d)});var h=[];Pa(a,function(a,b){b||-1!=v(h,a.history)||(uf(a.history,d),h.push(a.history));Ub(a,d,null,jf(a,d))})};for(d=g.changes.length-1;0<=d;--d)if(e=c(d))return e.v}}}function vf(a,b){if(0!=b&&(a.first+=b,a.sel=new pa(Fa(a.sel.ranges,function(a){return new N(w(a.anchor.line+b,a.anchor.ch),w(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){ka(a.cm,
a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)Na(a.cm,d,"gutter")}}function Ub(a,b,c,d){if(a.cm&&!a.cm.curOp)return ba(a.cm,Ub)(a,b,c,d);if(b.to.line<a.first)vf(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);vf(a,e);b={from:w(a.first,0),to:w(b.to.line+e,b.to.ch),text:[z(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:w(e,D(a,e).text.length),text:[b.text[0]],
origin:b.origin});b.removed=Ua(a,b.from,b.to);c||(c=Gd(a,b));a.cm?Ig(a.cm,b,d):Id(a,b,d);Lc(a,c,Ea);a.cantEdit&&Mc(a,w(a.firstLine(),0))&&(a.cantEdit=!1)}}function Ig(a,b,c){var d=a.doc,e=a.display,g=b.from,h=b.to,l=!1,p=g.line;a.options.lineWrapping||(p=O(Ba(D(d,g.line))),d.iter(p,h.line+1,function(a){if(a==e.maxLine)return l=!0}));-1<d.sel.contains(b.from,b.to)&&Yd(a);Id(d,b,c,Je(a));a.options.lineWrapping||(d.iter(p,g.line+b.text.length,function(a){var b=vc(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=
b,e.maxLineChanged=!0,l=!1)}),l&&(a.curOp.updateMaxLine=!0));lg(d,g.line);Pb(a,400);c=b.text.length-(h.line-g.line)-1;b.full?ka(a):g.line!=h.line||1!=b.text.length||cf(a.doc,b)?ka(a,g.line,h.line+1,c):Na(a,g.line,"text");c=sa(a,"changes");if((d=sa(a,"change"))||c)b={from:g,to:h,text:b.text,removed:b.removed,origin:b.origin},d&&ea(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function vb(a,b,c,d,e){d||(d=c);0>K(d,c)&&(d=[d,c],c=d[0],d=d[1]);
"string"==typeof b&&(b=a.splitLines(b));ub(a,{from:c,to:d,text:b,origin:e})}function wf(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function xf(a,b,c,d){for(var e=0;e<a.length;++e){var g=a[e],h=!0;if(g.ranges)for(g.copied||(g=a[e]=g.deepCopy(),g.copied=!0),h=0;h<g.ranges.length;h++)wf(g.ranges[h].anchor,b,c,d),wf(g.ranges[h].head,b,c,d);else{for(var l=0;l<g.changes.length;++l){var p=g.changes[l];if(c<p.from.line)p.from=w(p.from.line+d,p.from.ch),p.to=w(p.to.line+d,p.to.ch);else if(b<=
p.to.line){h=!1;break}}h||(a.splice(0,e+1),e=0)}}}function uf(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;xf(a.done,c,d,e);xf(a.undone,c,d,e)}function Vb(a,b,c,d){var e=b,g=b;"number"==typeof b?g=D(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=O(b);if(null==e)return null;d(g,e)&&a.cm&&Na(a.cm,e,c);return g}function Wb(a){this.lines=a;this.parent=null;for(var b=0,c=0;c<a.length;++c)a[c].parent=this,b+=a[c].height;this.height=b}function Xb(a){this.children=a;for(var b=0,c=0,d=0;d<
a.length;++d){var e=a[d],b=b+e.chunkSize(),c=c+e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function Jg(a,b,c,d){var e=new Yb(a,c,d),g=a.cm;g&&e.noHScroll&&(g.display.alignWidgets=!0);Vb(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;g&&!La(a,b)&&(c=Ca(b)<a.scrollTop,za(b,b.height+Jb(e)),c&&Ec(g,e.height),g.curOp.forceUpdate=!0);return!0});g&&ea(g,"lineWidgetAdded",g,e,"number"==
typeof b?b:O(b));return e}function wb(a,b,c,d,e){if(d&&d.shared)return Kg(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return ba(a.cm,wb)(a,b,c,d,e);var g=new Qa(a,e);e=K(b,c);d&&k(d,g,!1);if(0<e||0==e&&!1!==g.clearWhenEmpty)return g;g.replacedWith&&(g.collapsed=!0,g.widgetNode=y("span",[g.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||g.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(g.widgetNode.insertLeft=!0));if(g.collapsed){if(me(a,b.line,b,c,g)||b.line!=c.line&&me(a,c.line,b,c,
g))throw Error("Inserting collapsed marker partially overlapping an existing one");Ga=!0}g.addToHistory&&hf(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var h=b.line,l=a.cm,p;a.iter(h,c.line+1,function(a){l&&g.collapsed&&!l.options.lineWrapping&&Ba(a)==l.display.maxLine&&(p=!0);g.collapsed&&h!=b.line&&za(a,0);var d=new uc(g,h==b.line?b.ch:null,h==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++h});g.collapsed&&a.iter(b.line,c.line+1,function(b){La(a,
b)&&za(b,0)});g.clearOnEnter&&E(g,"beforeCursorEnter",function(){return g.clear()});g.readOnly&&(sf=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());g.collapsed&&(g.id=++yf,g.atomic=!0);if(l){p&&(l.curOp.updateMaxLine=!0);if(g.collapsed)ka(l,b.line,c.line+1);else if(g.className||g.startStyle||g.endStyle||g.css||g.attributes||g.title)for(d=b.line;d<=c.line;d++)Na(l,d,"text");g.atomic&&of(l.doc);ea(l,"markerAdded",l,g)}return g}function Kg(a,b,c,d,e){d=k(d);d.shared=!1;var g=[wb(a,
b,c,d,e)],h=g[0],l=d.widgetNode;Pa(a,function(a){l&&(d.widgetNode=l.cloneNode(!0));g.push(wb(a,L(a,b),L(a,c),d,e));for(var f=0;f<a.linked.length;++f)if(a.linked[f].isParent)return;h=z(g)});return new Zb(g,h)}function zf(a){return a.findMarks(w(a.first,0),a.clipPos(w(a.lastLine())),function(a){return a.parent})}function Lg(a){for(var b=function(b){b=a[b];var c=[b.primary.doc];Pa(b.primary.doc,function(a){return c.push(a)});for(var g=0;g<b.markers.length;g++){var h=b.markers[g];-1==v(c,h.doc)&&(h.parent=
null,b.markers.splice(g--,1))}},c=0;c<a.length;c++)b(c)}function Mg(a){var b=this;Af(b);if(!aa(b,a)&&!Ha(b.display,a)){ja(a);M&&(Bf=+new Date);var c=$a(b,a,!0),d=a.dataTransfer.files;if(c&&!b.isReadOnly())if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,g=Array(e),h=0,l=function(){++h==e&&ba(b,function(){c=L(b.doc,c);var a={from:c,to:c,text:b.doc.splitLines(g.filter(function(a){return null!=a}).join(b.doc.lineSeparator())),origin:"paste"};ub(b.doc,a);lf(b.doc,Ja(L(b.doc,c),L(b.doc,
Oa(a))))})()},p=function(a,c){if(b.options.allowDropFileTypes&&-1==v(b.options.allowDropFileTypes,a.type))l();else{var d=new FileReader;d.onerror=function(){return l()};d.onload=function(){var a=d.result;/[\x00-\x08\x0e-\x1f]{2}/.test(a)||(g[c]=a);l()};d.readAsText(a)}},f=0;f<d.length;f++)p(d[f],f);else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),setTimeout(function(){return b.display.input.focus()},20);else try{if(p=a.dataTransfer.getData("Text")){b.state.draggingText&&
!b.state.draggingText.copy&&(f=b.listSelections());Lc(b.doc,Ja(c,c));if(f)for(d=0;d<f.length;++d)vb(b.doc,"",f[d].anchor,f[d].head,"drag");b.replaceSelection(p,"around","paste");b.display.input.focus()}}catch(k){}}}function Af(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function Cf(a){if(document.getElementsByClassName){for(var b=document.getElementsByClassName("CodeMirror"),c=[],d=0;d<b.length;d++){var e=b[d].CodeMirror;e&&c.push(e)}c.length&&
c[0].operation(function(){for(var b=0;b<c.length;b++)a(c[b])})}}function Ng(){var a;E(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null;Cf(Og)},100))});E(window,"blur",function(){return Cf(Mb)})}function Og(a){var b=a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null;b.scrollbarsClipped=!1;a.setSize()}function Pg(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,g,h=0;h<b.length-1;h++){var l=b[h];if(/^(cmd|meta|m)$/i.test(l))g=!0;else if(/^a(lt)?$/i.test(l))c=
!0;else if(/^(c|ctrl|control)$/i.test(l))d=!0;else if(/^s(hift)?$/i.test(l))e=!0;else throw Error("Unrecognized modifier name: "+l);}c&&(a="Alt-"+a);d&&(a="Ctrl-"+a);g&&(a="Cmd-"+a);e&&(a="Shift-"+a);return a}function Qg(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!/^(name|fallthrough|(de|at)tach)$/.test(c)){if("..."!=d)for(var e=Fa(c.split(" "),Pg),g=0;g<e.length;g++){var h=void 0,l=void 0;g==e.length-1?(l=e.join(" "),h=d):(l=e.slice(0,g+1).join(" "),h="...");var p=b[l];if(!p)b[l]=
h;else if(p!=h)throw Error("Inconsistent bindings for "+l);}delete a[c]}}for(var f in b)a[f]=b[f];return a}function xb(a,b,c,d){b=Oc(b);var e=b.call?b.call(a,d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return xb(a,b.fallthrough,c,d);for(e=0;e<b.fallthrough.length;e++){var g=xb(a,b.fallthrough[e],c,d);if(g)return g}}}function Df(a){a="string"==typeof a?a:Ra[a.keyCode];
return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function Ef(a,b,c){var d=a;b.altKey&&"Alt"!=d&&(a="Alt-"+a);(Ff?b.metaKey:b.ctrlKey)&&"Ctrl"!=d&&(a="Ctrl-"+a);(Ff?b.ctrlKey:b.metaKey)&&"Mod"!=d&&(a="Cmd-"+a);!c&&b.shiftKey&&"Shift"!=d&&(a="Shift-"+a);return a}function Gf(a,b){if(xa&&34==a.keyCode&&a["char"])return!1;var c=Ra[a.keyCode];if(null==c||a.altGraphKey)return!1;3==a.keyCode&&a.code&&(c=a.code);return Ef(c,a,b)}function Oc(a){return"string"==typeof a?$b[a]:a}function yb(a,b){for(var c=a.doc.sel.ranges,
d=[],e=0;e<c.length;e++){for(var g=b(c[e]);d.length&&0>=K(g.from,z(d).to);){var h=d.pop();if(0>K(h.from,g.from)){g.from=h.from;break}}d.push(g)}ma(a,function(){for(var b=d.length-1;0<=b;b--)vb(a.doc,"",d[b].from,d[b].to,"+delete");pb(a)})}function Md(a,b,c){b=Bb(a.text,b+c,c);return 0>b||b>a.text.length?null:b}function Nd(a,b,c){a=Md(a,b.ch,c);return null==a?null:new w(b.line,a,0>c?"after":"before")}function Od(a,b,c,d,e){if(a&&("rtl"==b.doc.direction&&(e=-e),a=na(c,b.doc.direction))){a=0>e?z(a):
a[0];var g=0>e==(1==a.level)?"after":"before",h;if(0<a.level||"rtl"==b.doc.direction){var l=Ya(b,c);h=0>e?c.text.length-1:0;var p=va(b,l,h).top;h=ra(function(a){return va(b,l,a).top==p},0>e==(1==a.level)?a.from:a.to-1,h);"before"==g&&(h=Md(c,h,1))}else h=0>e?a.to:a.from;return new w(d,h,g)}return new w(d,0>e?c.text.length:0,0>e?"before":"after")}function Rg(a,b,c,d){var e=na(b,a.doc.direction);if(!e)return Nd(b,c,d);c.ch>=b.text.length?(c.ch=b.text.length,c.sticky="before"):0>=c.ch&&(c.ch=0,c.sticky=
"after");var g=U(e,c.ch,c.sticky),h=e[g];if("ltr"==a.doc.direction&&0==h.level%2&&(0<d?h.to>c.ch:h.from<c.ch))return Nd(b,c,d);var l=function(a,c){return Md(b,a instanceof w?a.ch:a,c)},p,f=function(c){if(!a.options.lineWrapping)return{begin:0,end:b.text.length};p=p||Ya(a,b);return Ie(a,b,p,c)},k=f("before"==c.sticky?l(c,-1):c.ch);if("rtl"==a.doc.direction||1==h.level){var t=1==h.level==0>d,q=l(c,t?1:-1);if(null!=q&&(t?q<=h.to&&q<=k.end:q>=h.from&&q>=k.begin))return new w(c.line,q,t?"before":"after")}h=
function(a,b,d){for(var g=function(a,b){return b?new w(c.line,l(a,1),"before"):new w(c.line,a,"after")};0<=a&&a<e.length;a+=b){var h=e[a],p=0<b==(1!=h.level),f=p?d.begin:l(d.end,-1);if(h.from<=f&&f<h.to)return g(f,p);f=p?h.from:l(h.to,-1);if(d.begin<=f&&f<d.end)return g(f,p)}};if(g=h(g+d,d,k))return g;k=0<d?k.end:l(k.begin,-1);return null==k||0<d&&k==b.text.length||!(g=h(0<d?0:e.length-1,d,f(k)))?null:g}function Hf(a,b){var c=D(a.doc,b),d=Ba(c);d!=c&&(b=O(d));return Od(!0,a,d,b,1)}function If(a,b){var c=
Hf(a,b.line),d=D(a.doc,c.line),e=na(d,a.doc.direction);return e&&0!=e[0].level?c:(d=Math.max(c.ch,d.text.search(/\S/)),w(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d,c.sticky))}function Pc(a,b,c){if("string"==typeof b&&(b=ac[b],!b))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Qc}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function bc(a,b,c,d){var e=a.state.keySeq;if(e){if(Df(b))return"handled";
/\'$/.test(b)?a.state.keySeq=null:Sg.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())});if(Jf(a,e+" "+b,c,d))return!0}return Jf(a,b,c,d)}function Jf(a,b,c,d){a:{for(var e=0;e<a.state.keyMaps.length;e++){var g=xb(b,a.state.keyMaps[e],d,a);if(g){d=g;break a}}d=a.options.extraKeys&&xb(b,a.options.extraKeys,d,a)||xb(b,a.options.keyMap,d,a)}"multi"==d&&(a.state.keySeq=b);"handled"==d&&ea(a,"keyHandled",a,b,c);if("handled"==d||"multi"==d)ja(c),yd(a);return!!d}function Kf(a,
b){var c=Gf(b,!0);return c?b.shiftKey&&!a.state.keySeq?bc(a,"Shift-"+c,b,function(b){return Pc(a,b,!0)})||bc(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return Pc(a,b)}):bc(a,c,b,function(b){return Pc(a,b)}):!1}function Tg(a,b,c){return bc(a,"'"+c+"'",b,function(b){return Pc(a,b,!0)})}function Lf(a){if(!a.target||a.target==this.display.input.getField())if(this.curOp.focus=m(),!aa(this,a)){M&&11>S&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||
a.shiftKey;var c=Kf(this,a);xa&&(Pd=c?b:null,!c&&88==b&&!Ug&&(ta?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));Ia&&!ta&&!c&&46==b&&a.shiftKey&&!a.ctrlKey&&document.execCommand&&document.execCommand("cut");18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||Vg(this)}}function Vg(a){function b(a){18!=a.keyCode&&a.altKey||(ab(c,"CodeMirror-crosshair"),R(document,"keyup",b),R(document,"mouseover",b))}var c=a.display.lineDiv;B(c,"CodeMirror-crosshair");E(document,"keyup",
b);E(document,"mouseover",b)}function Mf(a){16==a.keyCode&&(this.doc.sel.shift=!1);aa(this,a)}function Nf(a){if(!(a.target&&a.target!=this.display.input.getField()||Ha(this.display,a)||aa(this,a)||a.ctrlKey&&!a.altKey||ta&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(xa&&b==Pd)Pd=null,ja(a);else if(!xa||a.which&&!(10>a.which)||!Kf(this,a))if(b=String.fromCharCode(null==c?b:c),"\b"!=b&&!Tg(this,a,b))this.display.input.onKeyPress(a)}}function Wg(a,b){var c=+new Date;if(cc&&cc.compare(c,a,b))return dc=
cc=null,"triple";if(dc&&dc.compare(c,a,b))return cc=new Qd(c,a,b),dc=null,"double";dc=new Qd(c,a,b);cc=null;return"single"}function Of(a){var b=this.display;if(!(aa(this,a)||b.activeTouch&&b.input.supportsTouch()))if(b.input.ensurePolled(),b.shift=a.shiftKey,Ha(b,a))ga||(b.scroller.draggable=!1,setTimeout(function(){return b.scroller.draggable=!0},100));else if(!Rc(this,a,"gutterClick",!0)){var c=$a(this,a),d=$d(a),e=c?Wg(c,d):"single";window.focus();1==d&&this.state.selectingText&&this.state.selectingText(a);
if(!c||!Xg(this,d,c,e,a))if(1==d)c?Yg(this,c,e,a):(a.target||a.srcElement)==b.scroller&&ja(a);else if(2==d)c&&Kc(this.doc,c),setTimeout(function(){return b.input.focus()},20);else if(3==d)if(Rd)this.display.input.onContextMenu(a);else Oe(this)}}function Xg(a,b,c,d,e){var g="Click";"double"==d?g="Double"+g:"triple"==d&&(g="Triple"+g);return bc(a,Ef((1==b?"Left":2==b?"Middle":"Right")+g,e),e,function(b){"string"==typeof b&&(b=ac[b]);if(!b)return!1;var d=!1;try{a.isReadOnly()&&(a.state.suppressEdits=
!0),d=b(a,c)!=Qc}finally{a.state.suppressEdits=!1}return d})}function Yg(a,b,c,d){M?setTimeout(f(Ne,a),0):a.curOp.focus=m();var e=a.getOption("configureMouse"),e=e?e(a,c,d):{};null==e.unit&&(e.unit=(Zg?d.shiftKey&&d.metaKey:d.altKey)?"rectangle":"single"==c?"char":"double"==c?"word":"line");if(null==e.extend||a.doc.extend)e.extend=a.doc.extend||d.shiftKey;null==e.addNew&&(e.addNew=ta?d.metaKey:d.ctrlKey);null==e.moveOnDrag&&(e.moveOnDrag=!(ta?d.altKey:d.ctrlKey));var g=a.doc.sel,h;a.options.dragDrop&&
$g&&!a.isReadOnly()&&"single"==c&&-1<(h=g.contains(b))&&(0>K((h=g.ranges[h]).from(),b)||0<b.xRel)&&(0<K(h.to(),b)||0>b.xRel)?ah(a,d,b,e):bh(a,d,b,e)}function ah(a,b,c,d){var e=a.display,g=!1,h=ba(a,function(b){ga&&(e.scroller.draggable=!1);a.state.draggingText=!1;R(e.wrapper.ownerDocument,"mouseup",h);R(e.wrapper.ownerDocument,"mousemove",l);R(e.scroller,"dragstart",p);R(e.scroller,"drop",h);g||(ja(b),d.addNew||Kc(a.doc,c,null,null,d.extend),ga&&!Sd||M&&9==S?setTimeout(function(){e.wrapper.ownerDocument.body.focus({preventScroll:!0});
e.input.focus()},20):e.input.focus())}),l=function(a){g=g||10<=Math.abs(b.clientX-a.clientX)+Math.abs(b.clientY-a.clientY)},p=function(){return g=!0};ga&&(e.scroller.draggable=!0);a.state.draggingText=h;h.copy=!d.moveOnDrag;e.scroller.dragDrop&&e.scroller.dragDrop();E(e.wrapper.ownerDocument,"mouseup",h);E(e.wrapper.ownerDocument,"mousemove",l);E(e.scroller,"dragstart",p);E(e.scroller,"drop",h);Oe(a);setTimeout(function(){return e.input.focus()},20)}function Pf(a,b,c){if("char"==c)return new N(b,
b);if("word"==c)return a.findWordAt(b);if("line"==c)return new N(w(b.line,0),L(a.doc,w(b.line+1,0)));a=c(a,b);return new N(a.from,a.to)}function bh(a,b,c,d){function e(b){if(0!=K(x,b))if(x=b,"rectangle"==d.unit){for(var e=[],g=a.options.tabSize,h=I(D(p,c.line).text,c.ch,g),l=I(D(p,b.line).text,b.ch,g),q=Math.min(h,l),h=Math.max(h,l),l=Math.min(c.line,b.line),n=Math.min(a.lastLine(),Math.max(c.line,b.line));l<=n;l++){var C=D(p,l).text,m=J(C,q,g);q==h?e.push(new N(w(l,m),w(l,m))):C.length>m&&e.push(new N(w(l,
m),w(l,J(C,h,g))))}e.length||e.push(new N(c,c));fa(p,ya(a,t.ranges.slice(0,k).concat(e),k),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else e=f,q=Pf(a,b,d.unit),b=e.anchor,0<K(q.anchor,b)?(g=q.head,b=sc(e.from(),q.anchor)):(g=q.anchor,b=rc(e.to(),q.head)),e=t.ranges.slice(0),e[k]=ch(a,new N(L(p,b),g)),fa(p,ya(a,e,k),Td)}function g(b){var c=++C,h=$a(a,b,!0,"rectangle"==d.unit);if(h)if(0!=K(h,x)){a.curOp.focus=m();e(h);var f=Dc(l,p);(h.line>=f.to||h.line<f.from)&&setTimeout(ba(a,function(){C==
c&&g(b)}),150)}else{var u=b.clientY<n.top?-20:b.clientY>n.bottom?20:0;u&&setTimeout(ba(a,function(){C==c&&(l.scroller.scrollTop+=u,g(b))}),50)}}function h(b){a.state.selectingText=!1;C=Infinity;b&&(ja(b),l.input.focus());R(l.wrapper.ownerDocument,"mousemove",H);R(l.wrapper.ownerDocument,"mouseup",v);p.history.lastSelOrigin=null}var l=a.display,p=a.doc;ja(b);var f,k,t=p.sel,q=t.ranges;d.addNew&&!d.extend?(k=p.sel.contains(c),f=-1<k?q[k]:new N(c,c)):(f=p.sel.primary(),k=p.sel.primIndex);"rectangle"==
d.unit?(d.addNew||(f=new N(c,c)),c=$a(a,b,!0,!0),k=-1):(b=Pf(a,c,d.unit),f=d.extend?Kd(f,b.anchor,b.head,d.extend):b);d.addNew?-1==k?(k=q.length,fa(p,ya(a,q.concat([f]),k),{scroll:!1,origin:"*mouse"})):1<q.length&&q[k].empty()&&"char"==d.unit&&!d.extend?(fa(p,ya(a,q.slice(0,k).concat(q.slice(k+1)),0),{scroll:!1,origin:"*mouse"}),t=p.sel):Ld(p,k,f,Td):(k=0,fa(p,new pa([f],0),Td),t=p.sel);var x=c,n=l.wrapper.getBoundingClientRect(),C=0,H=ba(a,function(a){0!==a.buttons&&$d(a)?g(a):h(a)}),v=ba(a,h);a.state.selectingText=
v;E(l.wrapper.ownerDocument,"mousemove",H);E(l.wrapper.ownerDocument,"mouseup",v)}function ch(a,b){var c=b.anchor,d=b.head,e=D(a.doc,c.line);if(0==K(c,d)&&c.sticky==d.sticky)return b;e=na(e);if(!e)return b;var g=U(e,c.ch,c.sticky),h=e[g];if(h.from!=c.ch&&h.to!=c.ch)return b;var l=g+(h.from==c.ch==(1!=h.level)?0:1);if(0==l||l==e.length)return b;var p;d.line!=c.line?p=0<(d.line-c.line)*("ltr"==a.doc.direction?1:-1):(p=U(e,d.ch,d.sticky),g=p-g||(d.ch-c.ch)*(1==h.level?-1:1),p=p==l-1||p==l?0>g:0<g);e=
e[l+(p?-1:0)];e=(l=p==(1==e.level))?e.from:e.to;l=l?"after":"before";return c.ch==e&&c.sticky==l?b:new N(new w(c.line,e,l),d)}function Rc(a,b,c,d){var e,g;if(b.touches)e=b.touches[0].clientX,g=b.touches[0].clientY;else try{e=b.clientX,g=b.clientY}catch(h){return!1}if(e>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&ja(b);d=a.display;var l=d.lineDiv.getBoundingClientRect();if(g>l.bottom||!sa(a,c))return Vc(b);g-=l.top-d.viewOffset;for(l=0;l<a.display.gutterSpecs.length;++l){var p=
d.gutters.childNodes[l];if(p&&p.getBoundingClientRect().right>=e)return e=Va(a.doc,g),X(a,c,a,e,a.display.gutterSpecs[l].className,b),Vc(b)}}function Qf(a,b){var c;(c=Ha(a.display,b))||(c=sa(a,"gutterContextMenu")?Rc(a,b,"gutterContextMenu",!1):!1);if(!c&&!aa(a,b,"contextmenu")&&!Rd)a.display.input.onContextMenu(b)}function Rf(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");Kb(a)}function dh(a,b,c){!b!=!(c&&c!=zb)&&
(c=a.display.dragFunctions,b=b?E:R,b(a.display.scroller,"dragstart",c.start),b(a.display.scroller,"dragenter",c.enter),b(a.display.scroller,"dragover",c.over),b(a.display.scroller,"dragleave",c.leave),b(a.display.scroller,"drop",c.drop))}function eh(a){a.options.lineWrapping?(B(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(ab(a.display.wrapper,"CodeMirror-wrap"),jd(a));xd(a);ka(a);Kb(a);setTimeout(function(){return qb(a)},100)}function T(a,b){var c=
this;if(!(this instanceof T))return new T(a,b);this.options=b=b?k(b):{};k(Sf,b,!1);var d=b.value;"string"==typeof d?d=new la(d,b.mode,null,b.lineSeparator,b.direction):b.mode&&(d.modeOption=b.mode);this.doc=d;var e=new T.inputStyles[b.inputStyle](this),e=this.display=new Dg(a,d,e,b);e.wrapper.CodeMirror=this;Rf(this);b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");Ue(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,
pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Sa,keySeq:null,specialChars:null};b.autofocus&&!Sb&&e.input.focus();M&&11>S&&setTimeout(function(){return c.display.input.reset(!0)},20);fh(this);Tf||(Ng(),Tf=!0);cb(this);this.curOp.forceUpdate=!0;df(this,d);b.autofocus&&!Sb||this.hasFocus()?setTimeout(f(zd,this),20):Mb(this);for(var g in Sc)if(Sc.hasOwnProperty(g))Sc[g](this,b[g],zb);Xe(this);b.finishInit&&b.finishInit(this);for(d=0;d<Ud.length;++d)Ud[d](this);db(this);
ga&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(e.lineDiv).textRendering&&(e.lineDiv.style.textRendering="auto")}function fh(a){function b(){d.activeTouch&&(e=setTimeout(function(){return d.activeTouch=null},1E3),g=d.activeTouch,g.end=+new Date)}function c(a,b){if(null==b.left)return!0;var c=b.left-a.left,d=b.top-a.top;return 400<c*c+d*d}var d=a.display;E(d.scroller,"mousedown",ba(a,Of));M&&11>S?E(d.scroller,"dblclick",ba(a,function(b){if(!aa(a,b)){var c=$a(a,b);!c||Rc(a,b,"gutterClick",
!0)||Ha(a.display,b)||(ja(b),b=a.findWordAt(c),Kc(a.doc,b.anchor,b.head))}})):E(d.scroller,"dblclick",function(b){return aa(a,b)||ja(b)});E(d.scroller,"contextmenu",function(b){return Qf(a,b)});E(d.input.getField(),"contextmenu",function(b){d.scroller.contains(b.target)||Qf(a,b)});var e,g={end:0};E(d.scroller,"touchstart",function(b){var c;if(c=!aa(a,b))1!=b.touches.length?c=!1:(c=b.touches[0],c=1>=c.radiusX&&1>=c.radiusY),c=!c;c&&!Rc(a,b,"gutterClick",!0)&&(d.input.ensurePolled(),clearTimeout(e),
c=+new Date,d.activeTouch={start:c,moved:!1,prev:300>=c-g.end?g:null},1==b.touches.length&&(d.activeTouch.left=b.touches[0].pageX,d.activeTouch.top=b.touches[0].pageY))});E(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)});E(d.scroller,"touchend",function(e){var g=d.activeTouch;if(g&&!Ha(d,e)&&null!=g.left&&!g.moved&&300>new Date-g.start){var h=a.coordsChar(d.activeTouch,"page"),g=!g.prev||c(g,g.prev)?new N(h,h):!g.prev.prev||c(g,g.prev.prev)?a.findWordAt(h):new N(w(h.line,
0),L(a.doc,w(h.line+1,0)));a.setSelection(g.anchor,g.head);a.focus();ja(e)}b()});E(d.scroller,"touchcancel",b);E(d.scroller,"scroll",function(){d.scroller.clientHeight&&(Ob(a,d.scroller.scrollTop),bb(a,d.scroller.scrollLeft,!0),X(a,"scroll",a))});E(d.scroller,"mousewheel",function(b){return $e(a,b)});E(d.scroller,"DOMMouseScroll",function(b){return $e(a,b)});E(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0});d.dragFunctions={enter:function(b){aa(a,b)||Db(b)},over:function(b){if(!aa(a,
b)){var c=$a(a,b);if(c){var d=document.createDocumentFragment();Me(a,c,d);a.display.dragCursor||(a.display.dragCursor=r("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv));Z(a.display.dragCursor,d)}Db(b)}},start:function(b){if(M&&(!a.state.draggingText||100>+new Date-Bf))Db(b);else if(!aa(a,b)&&!Ha(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&
!Sd)){var c=r("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw\x3d\x3d";xa&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop);b.dataTransfer.setDragImage(c,0,0);xa&&c.parentNode.removeChild(c)}},drop:ba(a,Mg),leave:function(b){aa(a,b)||Af(a)}};var h=d.input.getField();E(h,"keyup",function(b){return Mf.call(a,b)});E(h,"keydown",ba(a,Lf));E(h,"keypress",ba(a,Nf));E(h,"focus",function(b){return zd(a,
b)});E(h,"blur",function(b){return Mb(a,b)})}function ec(a,b,c,d){var e=a.doc,g;null==c&&(c="add");"smart"==c&&(e.mode.indent?g=Fb(a,b).state:c="prev");var h=a.options.tabSize,l=D(e,b),f=I(l.text,null,h);l.stateAfter&&(l.stateAfter=null);var k=l.text.match(/^\s*/)[0],t;if(!d&&!/\S/.test(l.text))t=0,c="not";else if("smart"==c&&(t=e.mode.indent(g,l.text.slice(k.length),l.text),t==Qc||150<t)){if(!d)return;c="prev"}"prev"==c?t=b>e.first?I(D(e,b-1).text,null,h):0:"add"==c?t=f+a.options.indentUnit:"subtract"==
c?t=f-a.options.indentUnit:"number"==typeof c&&(t=f+c);t=Math.max(0,t);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(t/h);a;--a)d+=h,c+="\t";d<t&&(c+=G(t-d));if(c!=k)return vb(e,c,w(b,0),w(b,k.length),"+input"),l.stateAfter=null,!0;for(h=0;h<e.sel.ranges.length;h++)if(l=e.sel.ranges[h],l.head.line==b&&l.head.ch<k.length){b=w(b,k.length);Ld(e,h,new N(b,b));break}}function Uf(a){qa=a}function Vd(a,b,c,d,e){var g=a.doc;a.display.shift=!1;d||(d=g.sel);var h=+new Date-200,l="paste"==e||a.state.pasteIncoming>
h,f=Wd(b),k=null;if(l&&1<d.ranges.length)if(qa&&qa.text.join("\n")==b){if(0==d.ranges.length%qa.text.length)for(var k=[],t=0;t<qa.text.length;t++)k.push(g.splitLines(qa.text[t]))}else f.length==d.ranges.length&&a.options.pasteLinesPerSelection&&(k=Fa(f,function(a){return[a]}));for(var t=a.curOp.updateInput,n=d.ranges.length-1;0<=n;n--){var q=d.ranges[n],x=q.from(),m=q.to();q.empty()&&(c&&0<c?x=w(x.line,x.ch-c):a.state.overwrite&&!l?m=w(m.line,Math.min(D(g,m.line).text.length,m.ch+z(f).length)):l&&
qa&&qa.lineWise&&qa.text.join("\n")==f.join("\n")&&(x=m=w(x.line,0)));q={from:x,to:m,text:k?k[n%k.length]:f,origin:e||(l?"paste":a.state.cutIncoming>h?"cut":"+input")};ub(a.doc,q);ea(a,"inputRead",a,q)}b&&!l&&Vf(a,b);pb(a);2>a.curOp.updateInput&&(a.curOp.updateInput=t);a.curOp.typing=!0;a.state.pasteIncoming=a.state.cutIncoming=-1}function Wf(a,b){var c=a.clipboardData&&a.clipboardData.getData("Text");if(c)return a.preventDefault(),b.isReadOnly()||b.options.disableInput||ma(b,function(){return Vd(b,
c,0,null,"paste")}),!0}function Vf(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;0<=d;d--){var e=c.ranges[d];if(!(100<e.head.ch||d&&c.ranges[d-1].head.line==e.head.line)){var g=a.getModeAt(e.head),h=!1;if(g.electricChars)for(var l=0;l<g.electricChars.length;l++){if(-1<b.indexOf(g.electricChars.charAt(l))){h=ec(a,e.head.line,"smart");break}}else g.electricInput&&g.electricInput.test(D(a.doc,e.head.line).text.slice(0,e.head.ch))&&(h=ec(a,e.head.line,
"smart"));h&&ea(a,"electricInput",a,e.head.line)}}}function Xf(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line,e={anchor:w(e,0),head:w(e+1,0)};c.push(e);b.push(a.getRange(e.anchor,e.head))}return{text:b,ranges:c}}function Yf(a,b,c,d){a.setAttribute("autocorrect",c?"":"off");a.setAttribute("autocapitalize",d?"":"off");a.setAttribute("spellcheck",!!b)}function Zf(){var a=r("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),
b=r("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");ga?a.style.width="1000px":a.setAttribute("wrap","off");fc&&(a.style.border="1px solid black");Yf(a);return b}function Xd(a,b,c,d,e){function g(d){var g;g=e?Rg(a.cm,f,b,c):Nd(f,b,c);if(null==g){if(d=!d)d=b.line+k,d<a.first||d>=a.first+a.size?d=!1:(b=new w(d,b.ch,b.sticky),d=f=D(a,d));if(d)b=Od(e,a.cm,f,b.line,k);else return!1}else b=g;return!0}var h=b,l=c,f=D(a,b.line),k=e&&"rtl"==a.direction?-c:c;if("char"==d)g();
else if("column"==d)g(!0);else if("word"==d||"group"==d){var t=null;d="group"==d;for(var n=a.cm&&a.cm.getHelper(b,"wordChars"),q=!0;!(0>c)||g(!q);q=!1){var x=f.text.charAt(b.ch)||"\n",x=H(x,n)?"w":d&&"\n"==x?"n":!d||/\s/.test(x)?null:"p";!d||q||x||(x="s");if(t&&t!=x){0>c&&(c=1,g(),b.sticky="after");break}x&&(t=x);if(0<c&&!g(!q))break}}l=Mc(a,b,h,l,!0);bd(h,l)&&(l.hitSide=!0);return l}function $f(a,b,c,d){var e=a.doc,g=b.left,h;"page"==d?(h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||
document.documentElement.clientHeight),h=Math.max(h-.5*ob(a.display),3),h=(0<c?b.bottom:b.top)+c*h):"line"==d&&(h=0<c?b.bottom+3:b.top-3);for(;;){b=ud(a,g,h);if(!b.outside)break;if(0>c?0>=h:h>=e.height){b.hitSide=!0;break}h+=5*c}return b}function ag(a,b){var c=od(a,b.line);if(!c||c.hidden)return null;var d=D(a.doc,b.line),c=ye(c,d,b.line),d=na(d,a.doc.direction),e="left";d&&(e=U(d,b.ch)%2?"right":"left");c=ze(c.map,b.ch,e);c.offset="right"==c.collapse?c.end:c.start;return c}function gh(a){for(;a;a=
a.parentNode)if(/CodeMirror-gutter-wrapper/.test(a.className))return!0;return!1}function Ab(a,b){b&&(a.bad=!0);return a}function hh(a,b,c,d,e){function g(a){return function(b){return b.id==a}}function h(){t&&(k+=n,q&&(k+=n),t=q=!1)}function l(a){a&&(h(),k+=a)}function f(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(c)l(c);else{var c=b.getAttribute("cm-marker"),k;if(c)b=a.findMarks(w(d,0),w(e+1,0),g(+c)),b.length&&(k=b[0].find(0))&&l(Ua(a.doc,k.from,k.to).join(n));else if("false"!=b.getAttribute("contenteditable")&&
(k=/^(pre|div|p|li|table|br)$/i.test(b.nodeName),/^br$/i.test(b.nodeName)||0!=b.textContent.length)){k&&h();for(c=0;c<b.childNodes.length;c++)f(b.childNodes[c]);/^(pre|p)$/i.test(b.nodeName)&&(q=!0);k&&(t=!0)}}}else 3==b.nodeType&&l(b.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var k="",t=!1,n=a.doc.lineSeparator(),q=!1;;){f(b);if(b==c)break;b=b.nextSibling;q=!1}return k}function Tc(a,b,c){var d;if(b==a.display.lineDiv){d=a.display.lineDiv.childNodes[c];if(!d)return Ab(a.clipPos(w(a.display.viewTo-
1)),!0);b=null;c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var g=a.display.view[e];if(g.node==d)return ih(g,b,c)}}function ih(a,b,c){function d(b,c,d){for(var e=-1;e<(k?k.length:0);e++)for(var g=0>e?f.map:k[e],h=0;h<g.length;h+=3){var l=g[h+2];if(l==b||l==c){c=O(0>e?a.line:a.rest[e]);e=g[h]+d;if(0>d||l!=b)e=g[h+(d?1:0)];return w(c,e)}}}var e=a.text.firstChild,g=!1;if(!b||!A(e,
b))return Ab(w(O(a.line),0),!0);if(b==e&&(g=!0,b=e.childNodes[c],c=0,!b))return c=a.rest?z(a.rest):a.line,Ab(w(O(c),c.text.length),g);var h=3==b.nodeType?b:null,l=b;h||1!=b.childNodes.length||3!=b.firstChild.nodeType||(h=b.firstChild,c&&(c=h.nodeValue.length));for(;l.parentNode!=e;)l=l.parentNode;var f=a.measure,k=f.maps;if(b=d(h,l,c))return Ab(b,g);e=l.nextSibling;for(h=h?h.nodeValue.length-c:0;e;e=e.nextSibling){if(b=d(e,e.firstChild,0))return Ab(w(b.line,b.ch-h),g);h+=e.textContent.length}for(l=
l.previousSibling;l;l=l.previousSibling){if(b=d(l,l.firstChild,-1))return Ab(w(b.line,b.ch+c),g);c+=l.textContent.length}}var ia=navigator.userAgent,bg=navigator.platform,Ia=/gecko\/\d/i.test(ia),cg=/MSIE \d/.test(ia),dg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ia),gc=/Edge\/(\d+)/.exec(ia),M=cg||dg||gc,S=M&&(cg?document.documentMode||6:+(gc||dg)[1]),ga=!gc&&/WebKit\//.test(ia),jh=ga&&/Qt\/\d+\.\d+/.test(ia),xc=!gc&&/Chrome\//.test(ia),xa=/Opera\//.test(ia),Sd=/Apple Computer/.test(navigator.vendor),
kh=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ia),Ag=/PhantomJS/.test(ia),fc=!gc&&/AppleWebKit/.test(ia)&&/Mobile\/\w+/.test(ia),yc=/Android/.test(ia),Sb=fc||yc||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ia),ta=fc||/Mac/.test(bg),Zg=/\bCrOS\b/.test(ia),lh=/win/i.test(bg),eb=xa&&ia.match(/Version\/(\d*\.\d*)/);eb&&(eb=Number(eb[1]));eb&&15<=eb&&(xa=!1,ga=!0);var Ff=ta&&(jh||xa&&(null==eb||12.11>eb)),Rd=Ia||M&&9<=S,ab=function(a,b){var c=a.className,d=Q(b).exec(c);if(d){var e=c.slice(d.index+
d[0].length);a.className=c.slice(0,d.index)+(e?d[1]+e:"")}},lb;lb=document.createRange?function(a,b,c,d){var e=document.createRange();e.setEnd(d||a,c);e.setStart(a,b);return e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(e){return d}d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};var hc=function(a){a.select()};fc?hc=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:M&&(hc=function(a){try{a.select()}catch(b){}});
var Sa=function(){this.f=this.id=null;this.time=0;this.handler=f(this.onTimeout,this)};Sa.prototype.onTimeout=function(a){a.id=0;a.time<=+new Date?a.f():setTimeout(a.handler,a.time-+new Date)};Sa.prototype.set=function(a,b){this.f=b;var c=+new Date+a;if(!this.id||c<this.time)clearTimeout(this.id),this.id=setTimeout(this.handler,a),this.time=c};var Qc={toString:function(){return"CodeMirror.Pass"}},Ea={scroll:!1},Td={origin:"*mouse"},ic={origin:"+move"},nc=[""],eg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,
fg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
Cb=null,gg=function(){function a(a){return 247>=a?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(a):1424<=a&&1524>=a?"R":1536<=a&&1785>=a?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(a-
1536):1774<=a&&2220>=a?"r":8192<=a&&8203>=a?"w":8204==a?"b":"L"}function b(a,b,c){this.level=a;this.from=b;this.to=c}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,g=/[Lb1n]/,h=/[1n]/;return function(l,f){var k="ltr"==f?"L":"R";if(0==l.length||"ltr"==f&&!c.test(l))return!1;for(var t=l.length,n=[],q=0;q<t;++q)n.push(a(l.charCodeAt(q)));for(var q=0,m=k;q<t;++q){var C=n[q];"m"==C?n[q]=m:m=C}q=0;for(m=k;q<t;++q)C=n[q],"1"==C&&"r"==m?n[q]="n":e.test(C)&&(m=C,"r"==C&&(n[q]="R"));
q=1;for(m=n[0];q<t-1;++q)C=n[q],"+"==C&&"1"==m&&"1"==n[q+1]?n[q]="1":","!=C||m!=n[q+1]||"1"!=m&&"n"!=m||(n[q]=m),m=C;for(q=0;q<t;++q)if(m=n[q],","==m)n[q]="N";else if("%"==m){m=void 0;for(m=q+1;m<t&&"%"==n[m];++m);for(C=q&&"!"==n[q-1]||m<t&&"1"==n[m]?"1":"N";q<m;++q)n[q]=C;q=m-1}q=0;for(m=k;q<t;++q)C=n[q],"L"==m&&"1"==C?n[q]="L":e.test(C)&&(m=C);for(m=0;m<t;++m)if(d.test(n[m])){q=void 0;for(q=m+1;q<t&&d.test(n[q]);++q);C="L"==(m?n[m-1]:k);for(C=C==("L"==(q<t?n[q]:k))?C?"L":"R":k;m<q;++m)n[m]=C;m=
q-1}for(var k=[],H,q=0;q<t;)if(g.test(n[q])){m=q;for(++q;q<t&&g.test(n[q]);++q);k.push(new b(0,m,q))}else{var v=q,m=k.length,C="rtl"==f?1:0;for(++q;q<t&&"L"!=n[q];++q);for(var I=v;I<q;)if(h.test(n[I])){v<I&&(k.splice(m,0,new b(1,v,I)),m+=C);v=I;for(++I;I<q&&h.test(n[I]);++I);k.splice(m,0,new b(2,v,I));m+=C;v=I}else++I;v<q&&k.splice(m,0,new b(1,v,q))}"ltr"==f&&(1==k[0].level&&(H=l.match(/^\s+/))&&(k[0].from=H[0].length,k.unshift(new b(0,0,H[0].length))),1==z(k).level&&(H=l.match(/\s+$/))&&(z(k).to-=
H[0].length,k.push(new b(0,t-H[0].length,t))));return"rtl"==f?k.reverse():k}}(),pc=[],E=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),a[b]=(a[b]||pc).concat(c))},$g=function(){if(M&&9>S)return!1;var a=r("div");return"draggable"in a||"dragDrop"in a}(),Wc,kd,Wd=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var g=a.slice(b,"\r"==a.charAt(e-
1)?e-1:e),h=g.indexOf("\r");-1!=h?(c.push(g.slice(0,h)),b+=h+1):(c.push(g),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},mh=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){var b;try{b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Ug=function(){var a=r("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),
qd=null,Xc={},ib={},jb={},Y=function(a,b,c){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0;this.lineOracle=c};Y.prototype.eol=function(){return this.pos>=this.string.length};Y.prototype.sol=function(){return this.pos==this.lineStart};Y.prototype.peek=function(){return this.string.charAt(this.pos)||void 0};Y.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)};Y.prototype.eat=function(a){var b=
this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b};Y.prototype.eatWhile=function(a){for(var b=this.pos;this.eat(a););return this.pos>b};Y.prototype.eatSpace=function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a};Y.prototype.skipToEnd=function(){this.pos=this.string.length};Y.prototype.skipTo=function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0};Y.prototype.backUp=function(a){this.pos-=
a};Y.prototype.column=function(){this.lastColumnPos<this.start&&(this.lastColumnValue=I(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?I(this.string,this.lineStart,this.tabSize):0)};Y.prototype.indentation=function(){return I(this.string,null,this.tabSize)-(this.lineStart?I(this.string,this.lineStart,this.tabSize):0)};Y.prototype.match=function(a,b,c){if("string"==typeof a){var d=function(a){return c?
a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}};Y.prototype.current=function(){return this.string.slice(this.start,this.pos)};Y.prototype.hideFirstChars=function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}};Y.prototype.lookAhead=function(a){var b=this.lineOracle;return b&&b.lookAhead(a)};Y.prototype.baseToken=
function(){var a=this.lineOracle;return a&&a.baseToken(this.pos)};var tc=function(a,b){this.state=a;this.lookAhead=b},Aa=function(a,b,c,d){this.state=b;this.doc=a;this.line=c;this.maxLookAhead=d||0;this.baseTokens=null;this.baseTokenPos=1};Aa.prototype.lookAhead=function(a){var b=this.doc.getLine(this.line+a);null!=b&&a>this.maxLookAhead&&(this.maxLookAhead=a);return b};Aa.prototype.baseToken=function(a){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=a;)this.baseTokenPos+=
2;var b=this.baseTokens[this.baseTokenPos+1];return{type:b&&b.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-a}};Aa.prototype.nextLine=function(){this.line++;0<this.maxLookAhead&&this.maxLookAhead--};Aa.fromSaved=function(a,b,c){return b instanceof tc?new Aa(a,Ta(a.mode,b.state),c,b.lookAhead):new Aa(a,Ta(a.mode,b),c)};Aa.prototype.save=function(a){a=!1!==a?Ta(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new tc(a,this.maxLookAhead):a};var he=function(a,b,
c){this.start=a.start;this.end=a.pos;this.string=a.current();this.type=b||null;this.state=c},sf=!1,Ga=!1,rb=function(a,b,c){this.text=a;le(this,b);this.height=c?c(this):1};rb.prototype.lineNo=function(){return O(this)};hb(rb);var og={},ng={},mb=null,Hb=null,Ae={left:0,right:0,top:0,bottom:0},Za,fb=function(a,b,c){this.cm=c;var d=this.vert=r("div",[r("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=r("div",[r("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");
d.tabIndex=e.tabIndex=-1;a(d);a(e);E(d,"scroll",function(){d.clientHeight&&b(d.scrollTop,"vertical")});E(e,"scroll",function(){e.clientWidth&&b(e.scrollLeft,"horizontal")});this.checkedZeroWidth=!1;M&&8>S&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};fb.prototype.update=function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;c?(this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0",this.vert.firstChild.style.height=Math.max(0,
a.scrollHeight-a.clientHeight+(a.viewHeight-(b?d:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");b?(this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+(a.viewWidth-a.barLeft-(c?d:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedZeroWidth&&0<a.clientHeight&&(0==d&&this.zeroWidthHack(),this.checkedZeroWidth=
!0);return{right:c?d:0,bottom:b?d:0}};fb.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")};fb.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")};fb.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=ta&&!kh?"12px":"18px";this.horiz.style.pointerEvents=
this.vert.style.pointerEvents="none";this.disableHoriz=new Sa;this.disableVert=new Sa};fb.prototype.enableZeroWidthBar=function(a,b,c){function d(){var e=a.getBoundingClientRect();("vert"==c?document.elementFromPoint(e.right-1,(e.top+e.bottom)/2):document.elementFromPoint((e.right+e.left)/2,e.bottom-1))!=a?a.style.pointerEvents="none":b.set(1E3,d)}a.style.pointerEvents="auto";b.set(1E3,d)};fb.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)};
var jc=function(){};jc.prototype.update=function(){return{bottom:0,right:0}};jc.prototype.setScrollLeft=function(){};jc.prototype.setScrollTop=function(){};jc.prototype.clear=function(){};var Ve={"native":fb,"null":jc},zg=0,Gc=function(a,b,c){var d=a.display;this.viewport=b;this.visible=Dc(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;this.wrapperWidth=d.wrapper.clientWidth;this.oldDisplayWidth=Wa(a);this.force=c;this.dims=pd(a);this.events=[]};Gc.prototype.signal=
function(a,b){sa(a,b)&&this.events.push(arguments)};Gc.prototype.finish=function(){for(var a=0;a<this.events.length;a++)X.apply(null,this.events[a])};var Hc=0,oa=null;M?oa=-.53:Ia?oa=15:xc?oa=-.7:Sd&&(oa=-1/3);var pa=function(a,b){this.ranges=a;this.primIndex=b};pa.prototype.primary=function(){return this.ranges[this.primIndex]};pa.prototype.equals=function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=
this.ranges[b],d=a.ranges[b];if(!bd(c.anchor,d.anchor)||!bd(c.head,d.head))return!1}return!0};pa.prototype.deepCopy=function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new N(cd(this.ranges[b].anchor),cd(this.ranges[b].head));return new pa(a,this.primIndex)};pa.prototype.somethingSelected=function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1};pa.prototype.contains=function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=K(b,
d.from())&&0>=K(a,d.to()))return c}return-1};var N=function(a,b){this.anchor=a;this.head=b};N.prototype.from=function(){return sc(this.anchor,this.head)};N.prototype.to=function(){return rc(this.anchor,this.head)};N.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};Wb.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var g=e;g.parent=null;ke(g);ea(e,
"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Xb.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var g=Math.min(b,
e-a),h=d.height;d.removeInner(a,g);this.height-=h-d.height;e==g&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=g))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof Wb))&&(c=[],this.collapse(c),this.children=[new Wb(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],
g=e.chunkSize();if(a<=g){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(b=a=e.lines.length%25+25;b<e.lines.length;)c=new Wb(e.lines.slice(b,b+=25)),e.height-=c.height,this.children.splice(++d,0,c),c.parent=this;e.lines=e.lines.slice(0,a);this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new Xb(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=v(a.parent.children,a);a.parent.children.splice(c+
1,0,b)}else c=new Xb(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],g=e.chunkSize();if(a<g){g=Math.min(b,g-a);if(e.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=g}}};var Yb=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a;this.node=b};Yb.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,
d=O(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var g=Jb(this);za(c,Math.max(0,c.height-g));a&&(ma(a,function(){var b=-g;Ca(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&Ec(a,b);Na(a,d,"widget")}),ea(a,"lineWidgetCleared",a,this,d))}};Yb.prototype.changed=function(){var a=this,b=this.height,c=this.doc.cm,d=this.line;this.height=null;var e=Jb(this)-b;e&&(La(this.doc,d)||za(d,d.height+e),c&&ma(c,function(){c.curOp.forceUpdate=!0;Ca(d)<(c.curOp&&
c.curOp.scrollTop||c.doc.scrollTop)&&Ec(c,e);ea(c,"lineWidgetChanged",c,a,O(d))}))};hb(Yb);var yf=0,Qa=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++yf};Qa.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&cb(a);if(sa(this,"clear")){var c=this.find();c&&ea(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var g=this.lines[e],h=Gb(g.markedSpans,this);a&&!this.collapsed?Na(a,O(g),"text"):a&&(null!=h.to&&(d=O(g)),null!=h.from&&
(c=O(g)));for(var l=g,f=g.markedSpans,k=h,t=void 0,m=0;m<f.length;++m)f[m]!=k&&(t||(t=[])).push(f[m]);l.markedSpans=t;null==h.from&&this.collapsed&&!La(this.doc,g)&&a&&za(g,ob(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)g=Ba(this.lines[e]),h=vc(g),h>a.display.maxLineLength&&(a.display.maxLine=g,a.display.maxLineLength=h,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&ka(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&
(this.doc.cantEdit=!1,a&&of(a.doc));a&&ea(a,"markerCleared",a,this,c,d);b&&db(a);this.parent&&this.parent.clear()}};Qa.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var g=this.lines[e],h=Gb(g.markedSpans,this);if(null!=h.from&&(c=w(b?g:O(g),h.from),-1==a))return c;if(null!=h.to&&(d=w(b?g:O(g),h.to),1==a))return d}return c&&{from:c,to:d}};Qa.prototype.changed=function(){var a=this,b=this.find(-1,!0),c=this,d=this.doc.cm;b&&d&&ma(d,function(){var e=
b.line,g=O(b.line);if(g=od(d,g))Be(g),d.curOp.selectionChanged=d.curOp.forceUpdate=!0;d.curOp.updateMaxLine=!0;La(c.doc,e)||null==c.height||(g=c.height,c.height=null,(g=Jb(c)-g)&&za(e,e.height+g));ea(d,"markerChanged",d,a)})};Qa.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=v(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};Qa.prototype.detachLine=function(a){this.lines.splice(v(this.lines,
a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};hb(Qa);var Zb=function(a,b){this.markers=a;this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};Zb.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();ea(this,"clear")}};Zb.prototype.find=function(a,b){return this.primary.find(a,b)};hb(Zb);var nh=0,la=function(a,b,c,d,e){if(!(this instanceof
la))return new la(a,b,c,d,e);null==c&&(c=0);Xb.call(this,[new Wb([new rb("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=c;c=w(c,0);this.sel=Ja(c);this.history=new Ic(null);this.id=++nh;this.modeOption=b;this.lineSep=d;this.direction="rtl"==e?"rtl":"ltr";this.extend=!1;"string"==typeof a&&(a=this.splitLines(a));Id(this,{from:c,to:c,text:a});fa(this,Ja(c),Ea)};la.prototype=t(Xb.prototype,{constructor:la,iter:function(a,
b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=$c(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:ca(function(a){var b=w(this.first,0),c=this.first+this.size-1;ub(this,{from:b,to:w(c,D(this,c).text.length),text:this.splitLines(a),origin:"setValue",
full:!0},!0);this.cm&&Nb(this.cm,0,0);fa(this,Ja(b),Ea)}),replaceRange:function(a,b,c,d){b=L(this,b);c=c?L(this,c):b;vb(this,a,b,c,d)},getRange:function(a,b,c){a=Ua(this,L(this,a),L(this,b));return!1===c?a:a.join(c||this.lineSeparator())},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(Eb(this,a))return D(this,a)},getLineNumber:function(a){return O(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=D(this,a));return Ba(a)},lineCount:function(){return this.size},
firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return L(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ca(function(a,b,c){a=L(this,"number"==typeof a?w(a,b||0):a);fa(this,Ja(a,null),c)}),setSelection:ca(function(a,
b,c){var d=L(this,a);a=L(this,b||a);fa(this,Ja(d,a),c)}),extendSelection:ca(function(a,b,c){Kc(this,L(this,a),b&&L(this,b),c)}),extendSelections:ca(function(a,b){kf(this,be(this,a),b)}),extendSelectionsBy:ca(function(a,b){var c=Fa(this.sel.ranges,a);kf(this,be(this,c),b)}),setSelections:ca(function(a,b,c){if(a.length){for(var d=[],e=0;e<a.length;e++)d[e]=new N(L(this,a[e].anchor),L(this,a[e].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));fa(this,ya(this.cm,d,b),c)}}),addSelection:ca(function(a,
b,c){var d=this.sel.ranges.slice(0);d.push(new N(L(this,a),L(this,b||a)));fa(this,ya(this.cm,d,d.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,c,d=0;d<b.length;d++){var e=Ua(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=Ua(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||this.lineSeparator()));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=
[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:ca(function(a,b,c){for(var d=[],e=this.sel,g=0;g<e.ranges.length;g++){var h=e.ranges[g];d[g]={from:h.from(),to:h.to(),text:this.splitLines(a[g]),origin:c}}if(a=b&&"end"!=b){a=[];e=c=w(this.first,0);for(g=0;g<d.length;g++){var l=d[g],h=bf(l.from,c,e),f=bf(Oa(l),c,e);c=l.to;e=f;"around"==b?(l=this.sel.ranges[g],l=0>K(l.head,l.anchor),a[g]=new N(l?f:h,l?h:f)):a[g]=new N(h,h)}a=new pa(a,this.sel.primIndex)}b=
a;for(a=d.length-1;0<=a;a--)ub(this,d[a]);b?lf(this,b):this.cm&&pb(this.cm)}),undo:ca(function(){Nc(this,"undo")}),redo:ca(function(){Nc(this,"redo")}),undoSelection:ca(function(){Nc(this,"undo",!0)}),redoSelection:ca(function(){Nc(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,
redo:c}},clearHistory:function(){var a=this;this.history=new Ic(this.history.maxGeneration);Pa(this,function(b){return b.history=a.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:sb(this.history.done),undone:sb(this.history.undone)}},
setHistory:function(a){var b=this.history=new Ic(this.history.maxGeneration);b.done=sb(a.done.slice(0),null,!0);b.undone=sb(a.undone.slice(0),null,!0)},setGutterMarker:ca(function(a,b,c){return Vb(this,a,"gutter",function(a){var e=a.gutterMarkers||(a.gutterMarkers={});e[b]=c;!c&&gb(e)&&(a.gutterMarkers=null);return!0})}),clearGutter:ca(function(a){var b=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&Vb(b,c,"gutter",function(){c.gutterMarkers[a]=null;gb(c.gutterMarkers)&&(c.gutterMarkers=
null);return!0})})}),lineInfo:function(a){var b;if("number"==typeof a){if(!Eb(this,a))return null;b=a;a=D(this,a);if(!a)return null}else if(b=O(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:ca(function(a,b,c){return Vb(this,a,"gutter"==b?"gutter":"class",function(a){var e="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(a[e]){if(Q(c).test(a[e]))return!1;
a[e]+=" "+c}else a[e]=c;return!0})}),removeLineClass:ca(function(a,b,c){return Vb(this,a,"gutter"==b?"gutter":"class",function(a){var e="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",g=a[e];if(g)if(null==c)a[e]=null;else{var h=g.match(Q(c));if(!h)return!1;var l=h.index+h[0].length;a[e]=g.slice(0,h.index)+(h.index&&l!=g.length?" ":"")+g.slice(l)||null}else return!1;return!0})}),addLineWidget:ca(function(a,b,c){return Jg(this,a,b,c)}),removeLineWidget:function(a){a.clear()},
markText:function(a,b,c){return wb(this,L(this,a),L(this,b),c,c&&c.type||"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};a=L(this,a);return wb(this,a,a,c,"bookmark")},findMarksAt:function(a){a=L(this,a);var b=[],c=D(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||
e.marker)}return b},findMarks:function(a,b,c){a=L(this,a);b=L(this,b);var d=[],e=a.line;this.iter(a.line,b.line+1,function(g){if(g=g.markedSpans)for(var h=0;h<g.length;h++){var l=g[h];null!=l.to&&e==a.line&&a.ch>=l.to||null==l.from&&e!=a.line||null!=l.from&&e==b.line&&l.from>=b.ch||c&&!c(l.marker)||d.push(l.marker.parent||l.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,
c=this.first,d=this.lineSeparator().length;this.iter(function(e){e=e.text.length+d;if(e>a)return b=a,!0;a-=e;++c});return L(this,w(c,b))},indexFromPos:function(a){a=L(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;var c=this.lineSeparator().length;this.iter(this.first,a.line,function(a){b+=a.text.length+c});return b},copy:function(a){var b=new la($c(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;
b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new la($c(this,b,c),a.mode||this.modeOption,b,this.lineSep,this.direction);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=zf(this);
for(c=0;c<a.length;c++){var d=a[c],e=d.find(),g=b.clipPos(e.from),e=b.clipPos(e.to);K(g,e)&&(g=wb(b,g,e,d.primary,d.primary.type),d.markers.push(g),g.parent=d)}return b},unlinkDoc:function(a){a instanceof T&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);Lg(zf(this));break}if(a.history==this.history){var c=[a.id];Pa(a,function(a){return c.push(a.id)},!0);a.history=new Ic(null);a.history.done=sb(this.history.done,c);
a.history.undone=sb(this.history.undone,c)}},iterLinkedDocs:function(a){Pa(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):Wd(a)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ca(function(a){"rtl"!=a&&(a="ltr");a!=this.direction&&(this.direction=a,this.iter(function(a){return a.order=null}),this.cm&&Fg(this.cm))})});la.prototype.eachLine=la.prototype.iter;for(var Bf=0,Tf=!1,Ra={3:"Pause",
8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"\x3d",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"\x3d",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",
63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},kc=0;10>kc;kc++)Ra[kc+48]=Ra[kc+96]=String(kc);for(var Uc=65;90>=Uc;Uc++)Ra[Uc]=String.fromCharCode(Uc);for(var lc=1;12>=lc;lc++)Ra[lc+111]=Ra[lc+63235]="F"+lc;var $b={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",
Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev",
"Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore",
"Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext",
"Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]}};$b["default"]=ta?$b.macDefault:$b.pcDefault;var ac={selectAll:qf,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Ea)},killLine:function(a){return yb(a,
function(b){if(b.empty()){var c=D(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:w(b.head.line+1,0)}:{from:b.head,to:w(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){return yb(a,function(b){return{from:w(b.from().line,0),to:L(a.doc,w(b.to().line+1,0))}})},delLineLeft:function(a){return yb(a,function(a){return{from:w(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){return yb(a,function(b){var c=a.charCoords(b.head,
"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){return yb(a,function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(w(a.firstLine(),
0))},goDocEnd:function(a){return a.extendSelection(w(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(b){return Hf(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(b){return If(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(b){b=b.head.line;var c=D(a.doc,b),d;d=c;for(var e;e=kb(d,!1);)d=e.find(1,!0).line;d!=c&&(b=O(d));return Od(!0,a,c,b,-1)},{origin:"+move",bias:-1})},
goLineRight:function(a){return a.extendSelectionsBy(function(b){b=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div")},ic)},goLineLeft:function(a){return a.extendSelectionsBy(function(b){b=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},ic)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5,c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?
If(a,b.head):c},ic)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,
"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"char")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},
indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var g=c[e].from(),g=I(a.getLine(g.line),g.ch,d);b.push(G(d-g%d))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return ma(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++)if(b[d].empty()){var e=
b[d].head,g=D(a.doc,e.line).text;if(g)if(e.ch==g.length&&(e=new w(e.line,e.ch-1)),0<e.ch)e=new w(e.line,e.ch+1),a.replaceRange(g.charAt(e.ch-1)+g.charAt(e.ch-2),w(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var h=D(a.doc,e.line-1).text;h&&(e=new w(e.line,1),a.replaceRange(g.charAt(0)+a.doc.lineSeparator()+h.charAt(h.length-1),w(e.line-1,h.length-1),e,"+transpose"))}c.push(new N(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){return ma(a,function(){for(var b=a.listSelections(),
c=b.length-1;0<=c;c--)a.replaceRange(a.doc.lineSeparator(),b[c].anchor,b[c].head,"+input");b=a.listSelections();for(c=0;c<b.length;c++)a.indentLine(b[c].from().line,null,!0);pb(a)})},openLine:function(a){return a.replaceSelection("\n","start")},toggleOverwrite:function(a){return a.toggleOverwrite()}},Sg=new Sa,Pd=null,Qd=function(a,b,c){this.time=a;this.pos=b;this.button=c};Qd.prototype.compare=function(a,b,c){return this.time+400>a&&0==K(b,this.pos)&&c==this.button};var dc,cc,zb={toString:function(){return"CodeMirror.Init"}},
Sf={},Sc={};T.defaults=Sf;T.optionHandlers=Sc;var Ud=[];T.defineInitHook=function(a){return Ud.push(a)};var qa=null,P=function(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new Sa;this.composing=null;this.gracePeriod=!1;this.readDOMTimeout=null};P.prototype.init=function(a){function b(a){for(a=a.target;a;a=a.parentNode){if(a==h)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(a.className))break}return!1}function c(a){if(b(a)&&!aa(g,
a)){if(g.somethingSelected())Uf({lineWise:!1,text:g.getSelections()}),"cut"==a.type&&g.replaceSelection("",null,"cut");else if(g.options.lineWiseCopyCut){var c=Xf(g);Uf({lineWise:!0,text:c.text});"cut"==a.type&&g.operation(function(){g.setSelections(c.ranges,0,Ea);g.replaceSelection("",null,"cut")})}else return;if(a.clipboardData){a.clipboardData.clearData();var d=qa.text.join("\n");a.clipboardData.setData("Text",d);if(a.clipboardData.getData("Text")==d){a.preventDefault();return}}var f=Zf();a=f.firstChild;
g.display.lineSpace.insertBefore(f,g.display.lineSpace.firstChild);a.value=qa.text.join("\n");var k=document.activeElement;hc(a);setTimeout(function(){g.display.lineSpace.removeChild(f);k.focus();k==h&&e.showPrimarySelection()},50)}}var d=this,e=this,g=e.cm,h=e.div=a.lineDiv;Yf(h,g.options.spellcheck,g.options.autocorrect,g.options.autocapitalize);E(h,"paste",function(a){!b(a)||aa(g,a)||Wf(a,g)||11>=S&&setTimeout(ba(g,function(){return d.updateFromDOM()}),20)});E(h,"compositionstart",function(a){d.composing=
{data:a.data,done:!1}});E(h,"compositionupdate",function(a){d.composing||(d.composing={data:a.data,done:!1})});E(h,"compositionend",function(a){d.composing&&(a.data!=d.composing.data&&d.readFromDOMSoon(),d.composing.done=!0)});E(h,"touchstart",function(){return e.forceCompositionEnd()});E(h,"input",function(){d.composing||d.readFromDOMSoon()});E(h,"copy",c);E(h,"cut",c)};P.prototype.screenReaderLabelChanged=function(a){a?this.div.setAttribute("aria-label",a):this.div.removeAttribute("aria-label")};
P.prototype.prepareSelection=function(){var a=Le(this.cm,!1);a.focus=document.activeElement==this.div;return a};P.prototype.showSelection=function(a,b){a&&this.cm.display.view.length&&((a.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(a))};P.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()};P.prototype.showPrimarySelection=function(){var a=this.getSelection(),b=this.cm,c=b.doc.sel.primary(),d=c.from(),c=c.to();if(b.display.viewTo==b.display.viewFrom||
d.line>=b.display.viewTo||c.line<b.display.viewFrom)a.removeAllRanges();else{var e=Tc(b,a.anchorNode,a.anchorOffset),g=Tc(b,a.focusNode,a.focusOffset);if(!e||e.bad||!g||g.bad||0!=K(sc(e,g),d)||0!=K(rc(e,g),c))if(e=b.display.view,d=d.line>=b.display.viewFrom&&ag(b,d)||{node:e[0].measure.map[2],offset:0},c=c.line<b.display.viewTo&&ag(b,c),c||(c=e[e.length-1].measure,c=c.maps?c.maps[c.maps.length-1]:c.map,c={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}),d&&c){var e=a.rangeCount&&a.getRangeAt(0),
h;try{h=lb(d.node,d.offset,c.offset,c.node)}catch(l){}h&&(!Ia&&b.state.focused?(a.collapse(d.node,d.offset),h.collapsed||(a.removeAllRanges(),a.addRange(h))):(a.removeAllRanges(),a.addRange(h)),e&&null==a.anchorNode?a.addRange(e):Ia&&this.startGracePeriod());this.rememberSelection()}else a.removeAllRanges()}};P.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=
!0})},20)};P.prototype.showMultipleSelections=function(a){Z(this.cm.display.cursorDiv,a.cursors);Z(this.cm.display.selectionDiv,a.selection)};P.prototype.rememberSelection=function(){var a=this.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset};P.prototype.selectionInEditor=function(){var a=this.getSelection();if(!a.rangeCount)return!1;a=a.getRangeAt(0).commonAncestorContainer;return A(this.div,a)};
P.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())};P.prototype.blur=function(){this.div.blur()};P.prototype.getField=function(){return this.div};P.prototype.supportsTouch=function(){return!0};P.prototype.receivedFocus=function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?
this.pollSelection():ma(this.cm,function(){return b.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,a)};P.prototype.selectionChanged=function(){var a=this.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset};P.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var a=this.getSelection(),b=this.cm;if(yc&&
xc&&this.cm.display.gutterSpecs.length&&gh(a.anchorNode))this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();else if(!this.composing){this.rememberSelection();var c=Tc(b,a.anchorNode,a.anchorOffset),d=Tc(b,a.focusNode,a.focusOffset);c&&d&&ma(b,function(){fa(b.doc,Ja(c,d),Ea);if(c.bad||d.bad)b.curOp.selectionChanged=!0})}}};P.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a=
this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from(),e=c.to();0==d.ch&&d.line>a.firstLine()&&(d=w(d.line-1,D(a.doc,d.line-1).length));e.ch==D(a.doc,e.line).text.length&&e.line<a.lastLine()&&(e=w(e.line+1,0));if(d.line<b.viewFrom||e.line>b.viewTo-1)return!1;var g;d.line==b.viewFrom||0==(g=Xa(a,d.line))?(c=O(b.view[0].line),g=b.view[0].node):(c=O(b.view[g].line),g=b.view[g-1].node.nextSibling);var h=Xa(a,e.line);h==b.view.length-1?(e=b.viewTo-1,b=b.lineDiv.lastChild):(e=O(b.view[h+1].line)-1,b=b.view[h+
1].node.previousSibling);if(!g)return!1;b=a.doc.splitLines(hh(a,g,b,c,e));for(g=Ua(a.doc,w(c,0),w(e,D(a.doc,e).text.length));1<b.length&&1<g.length;)if(z(b)==z(g))b.pop(),g.pop(),e--;else if(b[0]==g[0])b.shift(),g.shift(),c++;else break;for(var l=0,h=0,f=b[0],k=g[0],t=Math.min(f.length,k.length);l<t&&f.charCodeAt(l)==k.charCodeAt(l);)++l;f=z(b);k=z(g);for(t=Math.min(f.length-(1==b.length?l:0),k.length-(1==g.length?l:0));h<t&&f.charCodeAt(f.length-h-1)==k.charCodeAt(k.length-h-1);)++h;if(1==b.length&&
1==g.length&&c==d.line)for(;l&&l>d.ch&&f.charCodeAt(f.length-h-1)==k.charCodeAt(k.length-h-1);)l--,h++;b[b.length-1]=f.slice(0,f.length-h).replace(/^\u200b+/,"");b[0]=b[0].slice(l).replace(/\u200b+$/,"");d=w(c,l);c=w(e,g.length?z(g).length-h:0);if(1<b.length||b[0]||K(d,c))return vb(a.doc,b,d,c,"+input"),!0};P.prototype.ensurePolled=function(){this.forceCompositionEnd()};P.prototype.reset=function(){this.forceCompositionEnd()};P.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),
this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())};P.prototype.readFromDOMSoon=function(){var a=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){a.readDOMTimeout=null;if(a.composing)if(a.composing.done)a.composing=null;else return;a.updateFromDOM()},80))};P.prototype.updateFromDOM=function(){var a=this;!this.cm.isReadOnly()&&this.pollContent()||ma(this.cm,function(){return ka(a.cm)})};P.prototype.setUneditable=function(a){a.contentEditable="false"};
P.prototype.onKeyPress=function(a){0==a.charCode||this.composing||(a.preventDefault(),this.cm.isReadOnly()||ba(this.cm,Vd)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0))};P.prototype.readOnlyChanged=function(a){this.div.contentEditable=String("nocursor"!=a)};P.prototype.onContextMenu=function(){};P.prototype.resetPosition=function(){};P.prototype.needsContentAttribute=!0;var W=function(a){this.cm=a;this.prevInput="";this.pollingFast=!1;this.polling=new Sa;this.hasSelection=
!1;this.composing=null};W.prototype.init=function(a){function b(a){if(!aa(e,a)){if(e.somethingSelected())qa={lineWise:!1,text:e.getSelections()};else if(e.options.lineWiseCopyCut){var b=Xf(e);qa={lineWise:!0,text:b.text};"cut"==a.type?e.setSelections(b.ranges,null,Ea):(d.prevInput="",g.value=b.text.join("\n"),hc(g))}else return;"cut"==a.type&&(e.state.cutIncoming=+new Date)}}var c=this,d=this,e=this.cm;this.createField(a);var g=this.textarea;a.wrapper.insertBefore(this.wrapper,a.wrapper.firstChild);
fc&&(g.style.width="0px");E(g,"input",function(){M&&9<=S&&c.hasSelection&&(c.hasSelection=null);d.poll()});E(g,"paste",function(a){aa(e,a)||Wf(a,e)||(e.state.pasteIncoming=+new Date,d.fastPoll())});E(g,"cut",b);E(g,"copy",b);E(a.scroller,"paste",function(b){if(!Ha(a,b)&&!aa(e,b))if(g.dispatchEvent){var c=new Event("paste");c.clipboardData=b.clipboardData;g.dispatchEvent(c)}else e.state.pasteIncoming=+new Date,d.focus()});E(a.lineSpace,"selectstart",function(b){Ha(a,b)||ja(b)});E(g,"compositionstart",
function(){var a=e.getCursor("from");d.composing&&d.composing.range.clear();d.composing={start:a,range:e.markText(a,e.getCursor("to"),{className:"CodeMirror-composing"})}});E(g,"compositionend",function(){d.composing&&(d.poll(),d.composing.range.clear(),d.composing=null)})};W.prototype.createField=function(a){this.wrapper=Zf();this.textarea=this.wrapper.firstChild};W.prototype.screenReaderLabelChanged=function(a){a?this.textarea.setAttribute("aria-label",a):this.textarea.removeAttribute("aria-label")};
W.prototype.prepareSelection=function(){var a=this.cm,b=a.display,c=a.doc,d=Le(a);if(a.options.moveInputWithCursor){var a=wa(a,c.sel.primary().head,"div"),c=b.wrapper.getBoundingClientRect(),e=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+e.top-c.top));d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left))}return d};W.prototype.showSelection=function(a){var b=this.cm.display;Z(b.cursorDiv,a.cursors);Z(b.selectionDiv,a.selection);
null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")};W.prototype.reset=function(a){if(!this.contextMenuPending&&!this.composing){var b=this.cm;b.somethingSelected()?(this.prevInput="",a=b.getSelection(),this.textarea.value=a,b.state.focused&&hc(this.textarea),M&&9<=S&&(this.hasSelection=a)):a||(this.prevInput=this.textarea.value="",M&&9<=S&&(this.hasSelection=null))}};W.prototype.getField=function(){return this.textarea};W.prototype.supportsTouch=function(){return!1};
W.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Sb||m()!=this.textarea))try{this.textarea.focus()}catch(a){}};W.prototype.blur=function(){this.textarea.blur()};W.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};W.prototype.receivedFocus=function(){this.slowPoll()};W.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll();a.cm.state.focused&&a.slowPoll()})};W.prototype.fastPoll=
function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0;c.polling.set(20,a)};W.prototype.poll=function(){var a=this,b=this.cm,c=this.textarea,d=this.prevInput;if(this.contextMenuPending||!b.state.focused||mh(c)&&!d&&!this.composing||b.isReadOnly()||b.options.disableInput||b.state.keySeq)return!1;var e=c.value;if(e==d&&!b.somethingSelected())return!1;if(M&&9<=S&&this.hasSelection===e||ta&&/[\uf700-\uf7ff]/.test(e))return b.display.input.reset(),
!1;if(b.doc.sel==b.display.selForContextMenu){var g=e.charCodeAt(0);8203!=g||d||(d="​");if(8666==g)return this.reset(),this.cm.execCommand("undo")}for(var h=0,g=Math.min(d.length,e.length);h<g&&d.charCodeAt(h)==e.charCodeAt(h);)++h;ma(b,function(){Vd(b,e.slice(h),d.length-h,null,a.composing?"*compose":null);1E3<e.length||-1<e.indexOf("\n")?c.value=a.prevInput="":a.prevInput=e;a.composing&&(a.composing.range.clear(),a.composing.range=b.markText(a.composing.start,b.getCursor("to"),{className:"CodeMirror-composing"}))});
return!0};W.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)};W.prototype.onKeyPress=function(){M&&9<=S&&(this.hasSelection=null);this.fastPoll()};W.prototype.onContextMenu=function(a){function b(){if(null!=h.selectionStart){var a=e.somethingSelected(),b="​"+(a?h.value:"");h.value="⇚";h.value=b;d.prevInput=a?"":"​";h.selectionStart=1;h.selectionEnd=b.length;g.selForContextMenu=e.doc.sel}}function c(){if(d.contextMenuPending==c&&(d.contextMenuPending=!1,d.wrapper.style.cssText=
t,h.style.cssText=k,M&&9>S&&g.scrollbars.setScrollTop(g.scroller.scrollTop=f),null!=h.selectionStart)){(!M||M&&9>S)&&b();var a=0,l=function(){g.selForContextMenu==e.doc.sel&&0==h.selectionStart&&0<h.selectionEnd&&"​"==d.prevInput?ba(e,qf)(e):10>a++?g.detectingSelectAll=setTimeout(l,500):(g.selForContextMenu=null,g.input.reset())};g.detectingSelectAll=setTimeout(l,200)}}var d=this,e=d.cm,g=e.display,h=d.textarea;d.contextMenuPending&&d.contextMenuPending();var l=$a(e,a),f=g.scroller.scrollTop;if(l&&
!xa){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(l)&&ba(e,fa)(e.doc,Ja(l),Ea);var k=h.style.cssText,t=d.wrapper.style.cssText,l=d.wrapper.offsetParent.getBoundingClientRect();d.wrapper.style.cssText="position: static";h.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(a.clientY-l.top-5)+"px; left: "+(a.clientX-l.left-5)+"px;\n      z-index: 1000; background: "+(M?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity\x3d5);";
var m;ga&&(m=window.scrollY);g.input.focus();ga&&window.scrollTo(null,m);g.input.reset();e.somethingSelected()||(h.value=d.prevInput=" ");d.contextMenuPending=c;g.selForContextMenu=e.doc.sel;clearTimeout(g.detectingSelectAll);M&&9<=S&&b();if(Rd){Db(a);var n=function(){R(window,"mouseup",n);setTimeout(c,20)};E(window,"mouseup",n)}else setTimeout(c,50)}};W.prototype.readOnlyChanged=function(a){a||this.reset();this.textarea.disabled="nocursor"==a};W.prototype.setUneditable=function(){};W.prototype.needsContentAttribute=
!1;(function(a){function b(b,e,g,h){a.defaults[b]=e;g&&(c[b]=h?function(a,b,c){c!=zb&&g(a,b,c)}:g)}var c=a.optionHandlers;a.defineOption=b;a.Init=zb;b("value","",function(a,b){return a.setValue(b)},!0);b("mode",null,function(a,b){a.doc.modeOption=b;Hd(a)},!0);b("indentUnit",2,Hd,!0);b("indentWithTabs",!1);b("smartIndent",!0);b("tabSize",4,function(a){Tb(a);Kb(a);ka(a)},!0);b("lineSeparator",null,function(a,b){if(a.doc.lineSep=b){var c=[],h=a.doc.first;a.doc.iter(function(a){for(var d=0;;){var l=a.text.indexOf(b,
d);if(-1==l)break;d=l+b.length;c.push(w(h,l))}h++});for(var l=c.length-1;0<=l;l--)vb(a.doc,b,c[l],w(c[l].line,c[l].ch+b.length))}});b("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200c\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");c!=zb&&a.refresh()});b("specialCharPlaceholder",rg,function(a){return a.refresh()},!0);b("electricChars",!0);b("inputStyle",Sb?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");
},!0);b("spellcheck",!1,function(a,b){return a.getInputField().spellcheck=b},!0);b("autocorrect",!1,function(a,b){return a.getInputField().autocorrect=b},!0);b("autocapitalize",!1,function(a,b){return a.getInputField().autocapitalize=b},!0);b("rtlMoveVisually",!lh);b("wholeLineUpdateBefore",!0);b("theme","default",function(a){Rf(a);Rb(a)},!0);b("keyMap","default",function(a,b,c){b=Oc(b);(c=c!=zb&&Oc(c))&&c.detach&&c.detach(a,b);b.attach&&b.attach(a,c||null)});b("extraKeys",null);b("configureMouse",
null);b("lineWrapping",!1,eh,!0);b("gutters",[],function(a,b){a.display.gutterSpecs=Fd(b,a.options.lineNumbers);Rb(a)},!0);b("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?wd(a.display)+"px":"0";a.refresh()},!0);b("coverGutterNextToScrollbar",!1,function(a){return qb(a)},!0);b("scrollbarStyle","native",function(a){Ue(a);qb(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0);b("lineNumbers",!1,function(a,b){a.display.gutterSpecs=
Fd(a.options.gutters,b);Rb(a)},!0);b("firstLineNumber",1,Rb,!0);b("lineNumberFormatter",function(a){return a},Rb,!0);b("showCursorWhenSelecting",!1,Lb,!0);b("resetSelectionOnContextMenu",!0);b("lineWiseCopyCut",!0);b("pasteLinesPerSelection",!0);b("selectionsMayTouch",!1);b("readOnly",!1,function(a,b){"nocursor"==b&&(Mb(a),a.display.input.blur());a.display.input.readOnlyChanged(b)});b("screenReaderLabel",null,function(a,b){a.display.input.screenReaderLabelChanged(""===b?null:b)});b("disableInput",
!1,function(a,b){b||a.display.input.reset()},!0);b("dragDrop",!0,dh);b("allowDropFileTypes",null);b("cursorBlinkRate",530);b("cursorScrollMargin",0);b("cursorHeight",1,Lb,!0);b("singleCursorHeightPerLine",!0,Lb,!0);b("workTime",100);b("workDelay",100);b("flattenSpans",!0,Tb,!0);b("addModeClass",!1,Tb,!0);b("pollInterval",100);b("undoDepth",200,function(a,b){return a.doc.history.undoDepth=b});b("historyEventDelay",1250);b("viewportMargin",10,function(a){return a.refresh()},!0);b("maxHighlightLength",
1E4,Tb,!0);b("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()});b("tabindex",null,function(a,b){return a.display.input.getField().tabIndex=b||""});b("autofocus",null);b("direction","ltr",function(a,b){return a.doc.setDirection(b)},!0);b("phrases",null)})(T);(function(a){var b=a.optionHandlers,c=a.helpers={};a.prototype={constructor:a,focus:function(){window.focus();this.display.input.focus()},setOption:function(a,c){var g=this.options,h=g[a];if(g[a]!=c||"mode"==a)g[a]=c,b.hasOwnProperty(a)&&
ba(this,b[a])(this,c,h),X(this,"optionChange",this,a)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](Oc(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:ha(function(b,c){var g=b.token?b:a.getMode(this.options,b);if(g.startState)throw Error("Overlays may not be stateful.");oc(this.state.overlays,{mode:g,modeSpec:b,
opaque:c&&c.opaque,priority:c&&c.priority||0},function(a){return a.priority});this.state.modeGen++;ka(this)}),removeOverlay:ha(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var h=b[c].modeSpec;if(h==a||"string"==typeof a&&h.name==a){b.splice(c,1);this.state.modeGen++;ka(this);break}}}),indentLine:ha(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");Eb(this.doc,a)&&ec(this,a,b,c)}),indentSelection:ha(function(a){for(var b=
this.doc.sel.ranges,c=-1,h=0;h<b.length;h++){var l=b[h];if(l.empty())l.head.line>c&&(ec(this,l.head.line,a,!0),c=l.head.line,h==this.doc.sel.primIndex&&pb(this));else{for(var f=l.from(),l=l.to(),k=Math.max(c,f.line),c=Math.min(this.lastLine(),l.line-(l.ch?0:1))+1,l=k;l<c;++l)ec(this,l,a);l=this.doc.sel.ranges;0==f.ch&&b.length==l.length&&0<l[h].from().ch&&Ld(this.doc,h,new N(f,l[h].to()),Ea)}}}),getTokenAt:function(a,b){return ge(this,a,b)},getLineTokens:function(a,b){return ge(this,w(a),b,!0)},getTokenTypeAt:function(a){a=
L(this.doc,a);var b=ee(this,D(this.doc,a.line)),c=0,h=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var l=c+h>>1;if((l?b[2*l-1]:0)>=a)h=l;else if(b[2*l+1]<a)c=l+1;else{b=b[2*l+2];break}}c=b?b.indexOf("overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var g=[];if(!c.hasOwnProperty(b))return g;var h=c[b],
l=this.getModeAt(a);if("string"==typeof l[b])h[l[b]]&&g.push(h[l[b]]);else if(l[b])for(var f=0;f<l[b].length;f++){var k=h[l[b][f]];k&&g.push(k)}else l.helperType&&h[l.helperType]?g.push(h[l.helperType]):h[l.name]&&g.push(h[l.name]);for(f=0;f<h._global.length;f++)k=h._global[f],k.pred(l,this)&&-1==v(g,k.val)&&g.push(k.val);return g},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return Fb(this,a+1,b).state},cursorCoords:function(a,
b){var c;c=this.doc.sel.primary();c=null==a?c.head:"object"==typeof a?L(this.doc,a):a?c.from():c.to();return wa(this,c,b||"page")},charCoords:function(a,b){return sd(this,L(this.doc,a),b||"page")},coordsChar:function(a,b){a=Fe(this,a,b||"page");return ud(this,a.left,a.top)},lineAtHeight:function(a,b){a=Fe(this,{top:a,left:0},b||"page").top;return Va(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b,c){var h=!1;if("number"==typeof a){var l=this.doc.first+this.doc.size-1;a<this.doc.first?
a=this.doc.first:a>l&&(a=l,h=!0);a=D(this.doc,a)}return zc(this,a,{top:0,left:0},b||"page",c||h).top+(h?this.doc.height-Ca(a):0)},defaultTextHeight:function(){return ob(this.display)},defaultCharWidth:function(){return nb(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,h,l){var f=this.display;a=wa(this,L(this.doc,a));var k=a.bottom,t=a.left;b.style.position="absolute";b.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(b);
f.sizer.appendChild(b);if("over"==h)k=a.top;else if("above"==h||"near"==h){var m=Math.max(f.wrapper.clientHeight,this.doc.height),n=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==h||a.bottom+b.offsetHeight>m)&&a.top>b.offsetHeight?k=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=m&&(k=a.bottom);t+b.offsetWidth>n&&(t=n-b.offsetWidth)}b.style.top=k+"px";b.style.left=b.style.right="";"right"==l?(t=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==l?t=0:"middle"==l&&(t=(f.sizer.clientWidth-
b.offsetWidth)/2),b.style.left=t+"px");c&&(a=Ad(this,{left:t,top:k,right:t+b.offsetWidth,bottom:k+b.offsetHeight}),null!=a.scrollTop&&Ob(this,a.scrollTop),null!=a.scrollLeft&&bb(this,a.scrollLeft))},triggerOnKeyDown:ha(Lf),triggerOnKeyPress:ha(Nf),triggerOnKeyUp:Mf,triggerOnMouseDown:ha(Of),execCommand:function(a){if(ac.hasOwnProperty(a))return ac[a].call(null,this)},triggerElectric:ha(function(a){Vf(this,a)}),findPosH:function(a,b,c,h){var l=1;0>b&&(l=-1,b=-b);a=L(this.doc,a);for(var f=0;f<b&&(a=
Xd(this.doc,a,l,c,h),!a.hitSide);++f);return a},moveH:ha(function(a,b){var c=this;this.extendSelectionsBy(function(h){return c.display.shift||c.doc.extend||h.empty()?Xd(c.doc,h.head,a,b,c.options.rtlMoveVisually):0>a?h.from():h.to()},ic)}),deleteH:ha(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):yb(this,function(h){var l=Xd(c,h.head,a,b,!1);return 0>a?{from:l,to:h.head}:{from:h.head,to:l}})}),findPosV:function(a,b,c,h){var l=1;0>b&&(l=-1,b=-b);
var f=L(this.doc,a);for(a=0;a<b&&(f=wa(this,f,"div"),null==h?h=f.left:f.left=h,f=$f(this,f,l,c),!f.hitSide);++a);return f},moveV:ha(function(a,b){var c=this,h=this.doc,l=[],f=!this.display.shift&&!h.extend&&h.sel.somethingSelected();h.extendSelectionsBy(function(k){if(f)return 0>a?k.from():k.to();var t=wa(c,k.head,"div");null!=k.goalColumn&&(t.left=k.goalColumn);l.push(t.left);var m=$f(c,t,a,b);"page"==b&&k==h.sel.primary()&&Ec(c,sd(c,m,"div").top-t.top);return m},ic);if(l.length)for(var k=0;k<h.sel.ranges.length;k++)h.sel.ranges[k].goalColumn=
l[k]}),findWordAt:function(a){var b=D(this.doc,a.line).text,c=a.ch,h=a.ch;if(b){var l=this.getHelper(a,"wordChars");"before"!=a.sticky&&h!=b.length||!c?++h:--c;for(var f=b.charAt(c),f=H(f,l)?function(a){return H(a,l)}:/\s/.test(f)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!H(a)};0<c&&f(b.charAt(c-1));)--c;for(;h<b.length&&f(b.charAt(h));)++h}return new N(w(a.line,c),w(a.line,h))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?
B(this.display.cursorDiv,"CodeMirror-overwrite"):ab(this.display.cursorDiv,"CodeMirror-overwrite"),X(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==m()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ha(function(a,b){Nb(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-Da(this)-this.display.barHeight,width:a.scrollWidth-Da(this)-
this.display.barWidth,clientHeight:nd(this),clientWidth:Wa(this)}},scrollIntoView:ha(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:w(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;if(null!=a.from.line){var c=a;Fc(this);this.curOp.scrollToPos=c}else Qe(this,a.from,a.to,a.margin)}),setSize:ha(function(a,b){var c=this,h=function(a){return"number"==typeof a||/^\d+$/.test(String(a))?
a+"px":a};null!=a&&(this.display.wrapper.style.width=h(a));null!=b&&(this.display.wrapper.style.height=h(b));this.options.lineWrapping&&Ce(this);var l=this.display.viewFrom;this.doc.iter(l,this.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){Na(c,l,"widget");break}++l});this.curOp.forceUpdate=!0;X(this,"refresh",this)}),operation:function(a){return ma(this,a)},startOperation:function(){return cb(this)},endOperation:function(){return db(this)},
refresh:ha(function(){var a=this.display.cachedTextHeight;ka(this);this.curOp.forceUpdate=!0;Kb(this);Nb(this,this.doc.scrollLeft,this.doc.scrollTop);Ed(this.display);(null==a||.5<Math.abs(a-ob(this.display))||this.options.lineWrapping)&&xd(this);X(this,"refresh",this)}),swapDoc:ha(function(a){var b=this.doc;b.cm=null;this.state.selectingText&&this.state.selectingText();df(this,a);Kb(this);this.display.input.reset();Nb(this,a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;ea(this,"swapDoc",this,
b);return b}),phrase:function(a){var b=this.options.phrases;return b&&Object.prototype.hasOwnProperty.call(b,a)?b[a]:a},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};hb(a);a.registerHelper=function(b,e,g){c.hasOwnProperty(b)||(c[b]=a[b]={_global:[]});c[b][e]=g};a.registerGlobalHelper=function(b,e,g,h){a.registerHelper(b,
e,h);c[b]._global.push({pred:g,val:h})}})(T);var oh="iter insert remove copy getEditor constructor".split(" "),mc;for(mc in la.prototype)la.prototype.hasOwnProperty(mc)&&0>v(oh,mc)&&(T.prototype[mc]=function(a){return function(){return a.apply(this.doc,arguments)}}(la.prototype[mc]));hb(la);T.inputStyles={textarea:W,contenteditable:P};T.defineMode=function(a){T.defaults.mode||"null"==a||(T.defaults.mode=a);ig.apply(this,arguments)};T.defineMIME=function(a,b){ib[a]=b};T.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}});
T.defineMIME("text/plain","null");T.defineExtension=function(a,b){T.prototype[a]=b};T.defineDocExtension=function(a,b){la.prototype[a]=b};T.fromTextArea=function(a,b){function c(){a.value=f.getValue()}b=b?k(b):{};b.value=a.value;!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=m();b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}var e;if(a.form&&(E(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var g=
a.form;e=g.submit;try{var h=g.submit=function(){c();g.submit=e;g.submit();g.submit=h}}catch(l){}}b.finishInit=function(d){d.save=c;d.getTextArea=function(){return a};d.toTextArea=function(){d.toTextArea=isNaN;c();a.parentNode.removeChild(d.getWrapperElement());a.style.display="";a.form&&(R(a.form,"submit",c),b.leaveSubmitMethodAlone||"function"!=typeof a.form.submit||(a.form.submit=e))}};a.style.display="none";var f=T(function(b){return a.parentNode.insertBefore(b,a.nextSibling)},b);return f};(function(a){a.off=
R;a.on=E;a.wheelEventPixels=Eg;a.Doc=la;a.splitLines=Wd;a.countColumn=I;a.findColumn=J;a.isWordChar=C;a.Pass=Qc;a.signal=X;a.Line=rb;a.changeEnd=Oa;a.scrollbarModel=Ve;a.Pos=w;a.cmpPos=K;a.modes=Xc;a.mimeModes=ib;a.resolveMode=qc;a.getMode=Yc;a.modeExtensions=jb;a.extendMode=jg;a.copyState=Ta;a.startState=ae;a.innerMode=Zc;a.commands=ac;a.keyMap=$b;a.keyName=Gf;a.isModifierKey=Df;a.lookupKey=xb;a.normalizeKeyMap=Qg;a.StringStream=Y;a.SharedTextMarker=Zb;a.TextMarker=Qa;a.LineWidget=Yb;a.e_preventDefault=
ja;a.e_stopPropagation=Zd;a.e_stop=Db;a.addClass=B;a.contains=A;a.rmClass=ab;a.keyNames=Ra})(T);T.version="5.57.0";return T});
(function(Q){"object"==typeof exports&&"object"==typeof module?Q(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],Q):Q(CodeMirror)})(function(Q){var da={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,
dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,
caseFold:!0},Z={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};Q.defineMode("xml",function(r,y){function A(k,t){function C(f){t.tokenize=f;return f(k,t)}var H=k.next();if("\x3c"==H){if(k.eat("!"))return k.eat("[")?k.match("CDATA[")?C(n("atom","]]\x3e")):null:k.match("--")?C(n("comment","--\x3e")):k.match("DOCTYPE",!0,!0)?(k.eatWhile(/[\w\._\-]/),C(f(1))):null;if(k.eat("?"))return k.eatWhile(/[\w\._\-]/),
t.tokenize=n("meta","?\x3e"),"meta";Ka=k.eat("/")?"closeTag":"openTag";t.tokenize=m;return"tag bracket"}if("\x26"==H)return(k.eat("#")?k.eat("x")?k.eatWhile(/[a-fA-F\d]/)&&k.eat(";"):k.eatWhile(/[\d]/)&&k.eat(";"):k.eatWhile(/[\w\.\-:]/)&&k.eat(";"))?"atom":"error";k.eatWhile(/[^&<]/);return null}function m(f,k){var t=f.next();if("\x3e"==t||"/"==t&&f.eat("\x3e"))return k.tokenize=A,Ka="\x3e"==t?"endTag":"selfcloseTag","tag bracket";if("\x3d"==t)return Ka="equals",null;if("\x3c"==t)return k.tokenize=
A,k.state=J,k.tagName=k.tagStart=null,(t=k.tokenize(f,k))?t+" tag error":"tag error";if(/[\'\"]/.test(t))return k.tokenize=B(t),k.stringStartCol=f.column(),k.tokenize(f,k);f.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}function B(f){var k=function(k,t){for(;!k.eol();)if(k.next()==f){t.tokenize=m;break}return"string"};k.isInAttribute=!0;return k}function n(f,k){return function(t,m){for(;!t.eol();){if(t.match(k)){m.tokenize=A;break}t.next()}return f}}function f(k){return function(t,
m){for(var n;null!=(n=t.next());){if("\x3c"==n)return m.tokenize=f(k+1),m.tokenize(t,m);if("\x3e"==n)if(1==k){m.tokenize=A;break}else return m.tokenize=f(k-1),m.tokenize(t,m)}return"meta"}}function k(f,k,t){this.prev=f.context;this.tagName=k;this.indent=f.indented;this.startOfLine=t;if(V.doNotIndent.hasOwnProperty(k)||f.context&&f.context.noIndent)this.noIndent=!0}function I(f){f.context&&(f.context=f.context.prev)}function v(f,k){for(var t;f.context;){t=f.context.tagName;if(!V.contextGrabbers.hasOwnProperty(t)||
!V.contextGrabbers[t].hasOwnProperty(k))break;I(f)}}function J(f,k,t){return"openTag"==f?(t.tagStart=k.column(),G):"closeTag"==f?z:J}function G(f,k,t){if("word"==f)return t.tagName=k.current(),U="tag",ua;if(V.allowMissingTagName&&"endTag"==f)return U="tag bracket",ua(f,k,t);U="error";return G}function z(f,k,t){if("word"==f){f=k.current();t.context&&t.context.tagName!=f&&V.implicitlyClosed.hasOwnProperty(t.context.tagName)&&I(t);if(t.context&&t.context.tagName==f||!1===V.matchClosing)return U="tag",
Fa;U="tag error";return oc}if(V.allowMissingTagName&&"endTag"==f)return U="tag bracket",Fa(f,k,t);U="error";return oc}function Fa(f,k,t){if("endTag"!=f)return U="error",Fa;I(t);return J}function oc(f,k,t){U="error";return Fa(f,k,t)}function ua(f,m,n){if("word"==f)return U="attribute",t;if("endTag"==f||"selfcloseTag"==f){m=n.tagName;var C=n.tagStart;n.tagName=n.tagStart=null;"selfcloseTag"==f||V.autoSelfClosers.hasOwnProperty(m)?v(n,m):(v(n,m),n.context=new k(n,m,C==n.indented));return J}U="error";
return ua}function t(f,k,t){if("equals"==f)return C;V.allowMissing||(U="error");return ua(f,k,t)}function C(f,k,t){if("string"==f)return H;if("word"==f&&V.allowUnquoted)return U="string",ua;U="error";return ua(f,k,t)}function H(f,k,t){return"string"==f?H:ua(f,k,t)}var gb=r.indentUnit,V={},Bb=y.htmlMode?da:Z,ra;for(ra in Bb)V[ra]=Bb[ra];for(ra in y)V[ra]=y[ra];var Ka,U;A.isInText=!0;return{startState:function(f){var k={tokenize:A,state:J,indented:f||0,tagName:null,tagStart:null,context:null};null!=
f&&(k.baseIndent=f);return k},token:function(f,k){!k.tagName&&f.sol()&&(k.indented=f.indentation());if(f.eatSpace())return null;Ka=null;var t=k.tokenize(f,k);(t||Ka)&&"comment"!=t&&(U=null,k.state=k.state(Ka||t,f,k),U&&(t="error"==U?t+" error":U));return t},indent:function(f,k,t){var n=f.context;if(f.tokenize.isInAttribute)return f.tagStart==f.indented?f.stringStartCol+1:f.indented+gb;if(n&&n.noIndent)return Q.Pass;if(f.tokenize!=m&&f.tokenize!=A)return t?t.match(/^(\s*)/)[0].length:0;if(f.tagName)return!1!==
V.multilineTagIndentPastTag?f.tagStart+f.tagName.length+2:f.tagStart+gb*(V.multilineTagIndentFactor||1);if(V.alignCDATA&&/<!\[CDATA\[/.test(k))return 0;if((k=k&&/^<(\/)?([\w_:\.-]*)/.exec(k))&&k[1])for(;n;)if(n.tagName==k[2]){n=n.prev;break}else if(V.implicitlyClosed.hasOwnProperty(n.tagName))n=n.prev;else break;else if(k)for(;n;)if((t=V.contextGrabbers[n.tagName])&&t.hasOwnProperty(k[2]))n=n.prev;else break;for(;n&&n.prev&&!n.startOfLine;)n=n.prev;return n?n.indent+gb:f.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,
blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:V.htmlMode?"html":"xml",helperType:V.htmlMode?"html":"xml",skipAttribute:function(f){f.state==C&&(f.state=ua)},xmlCurrentTag:function(f){return f.tagName?{name:f.tagName,close:"closeTag"==f.type}:null},xmlCurrentContext:function(f){var k=[];for(f=f.context;f;f=f.prev)f.tagName&&k.push(f.tagName);return k.reverse()}}});Q.defineMIME("text/xml","xml");Q.defineMIME("application/xml","xml");Q.mimeModes.hasOwnProperty("text/html")||Q.defineMIME("text/html",
{name:"xml",htmlMode:!0})});
(function(){var Q=function(r){function y(m){if(A[m])return A[m].exports;var B=A[m]={i:m,l:!1,exports:{}};r[m].call(B.exports,B,B.exports,y);B.l=!0;return B.exports}var A={};y.m=r;y.c=A;y.d=function(m,B,n){y.o(m,B)||Object.defineProperty(m,B,{enumerable:!0,get:n})};y.r=function(m){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"});Object.defineProperty(m,"__esModule",{value:!0})};y.t=function(m,B){B&1&&(m=y(m));if(B&8||B&4&&"object"===typeof m&&
m&&m.__esModule)return m;var n=Object.create(null);y.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:m});if(B&2&&"string"!=typeof m)for(var f in m)y.d(n,f,function(f){return m[f]}.bind(null,f));return n};y.n=function(m){var B=m&&m.__esModule?function(){return m["default"]}:function(){return m};y.d(B,"a",B);return B};y.o=function(m,B){return Object.prototype.hasOwnProperty.call(m,B)};y.p="";return y(y.s=18)}([,,function(r,y,A){function m(f){this.__parent=f;this.__character_count=0;this.__indent_count=
-1;this.__wrap_point_character_count=this.__wrap_point_index=this.__alignment_count=0;this.__wrap_point_indent_count=-1;this.__wrap_point_alignment_count=0;this.__items=[]}function B(f,k){this.__cache=[""];this.__indent_size=f.indent_size;this.__indent_string=f.indent_char;f.indent_with_tabs||(this.__indent_string=Array(f.indent_size+1).join(f.indent_char));k=k||"";0<f.indent_level&&(k=Array(f.indent_level+1).join(this.__indent_string));this.__base_string=k;this.__base_string_length=k.length}function n(f,
k){this.__indent_cache=new B(f,k);this.raw=!1;this._end_with_newline=f.end_with_newline;this.indent_size=f.indent_size;this.wrap_line_length=f.wrap_line_length;this.indent_empty_lines=f.indent_empty_lines;this.__lines=[];this.current_line=this.previous_line=null;this.next_line=new m(this);this.previous_token_wrapped=this.non_breaking_space=this.space_before_token=!1;this.__add_outputline()}m.prototype.clone_empty=function(){var f=new m(this.__parent);f.set_indent(this.__indent_count,this.__alignment_count);
return f};m.prototype.item=function(f){return 0>f?this.__items[this.__items.length+f]:this.__items[f]};m.prototype.has_match=function(f){for(var k=this.__items.length-1;0<=k;k--)if(this.__items[k].match(f))return!0;return!1};m.prototype.set_indent=function(f,k){this.is_empty()&&(this.__indent_count=f||0,this.__alignment_count=k||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))};m.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&
(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)};m.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count};m.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();
var f=this.__parent.current_line;f.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count);f.__items=this.__items.slice(this.__wrap_point_index);this.__items=this.__items.slice(0,this.__wrap_point_index);f.__character_count+=this.__character_count-this.__wrap_point_character_count;this.__character_count=this.__wrap_point_character_count;" "===f.__items[0]&&(f.__items.splice(0,1),--f.__character_count);return!0}return!1};m.prototype.is_empty=function(){return 0===this.__items.length};
m.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]};m.prototype.push=function(f){this.__items.push(f);var k=f.lastIndexOf("\n");this.__character_count=-1!==k?f.length-k:this.__character_count+f.length};m.prototype.pop=function(){var f=null;this.is_empty()||(f=this.__items.pop(),this.__character_count-=f.length);return f};m.prototype._remove_indent=function(){0<this.__indent_count&&(--this.__indent_count,this.__character_count-=this.__parent.indent_size)};m.prototype._remove_wrap_indent=
function(){0<this.__wrap_point_indent_count&&--this.__wrap_point_indent_count};m.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),--this.__character_count};m.prototype.toString=function(){var f="";this.is_empty()?this.__parent.indent_empty_lines&&(f=this.__parent.get_indent_string(this.__indent_count)):(f=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),f+=this.__items.join(""));return f};B.prototype.get_indent_size=function(f,k){var n=this.__base_string_length;
0>f&&(n=0);n+=f*this.__indent_size;return n+=k||0};B.prototype.get_indent_string=function(f,k){var n=this.__base_string;0>f&&(f=0,n="");k=(k||0)+f*this.__indent_size;this.__ensure_cache(k);return n+=this.__cache[k]};B.prototype.__ensure_cache=function(f){for(;f>=this.__cache.length;)this.__add_column()};B.prototype.__add_column=function(){var f=this.__cache.length,k=0,k="";this.__indent_size&&f>=this.__indent_size&&(k=Math.floor(f/this.__indent_size),f-=k*this.__indent_size,k=Array(k+1).join(this.__indent_string));
f&&(k+=Array(f+1).join(" "));this.__cache.push(k)};n.prototype.__add_outputline=function(){this.previous_line=this.current_line;this.current_line=this.next_line.clone_empty();this.__lines.push(this.current_line)};n.prototype.get_line_number=function(){return this.__lines.length};n.prototype.get_indent_string=function(f,k){return this.__indent_cache.get_indent_string(f,k)};n.prototype.get_indent_size=function(f,k){return this.__indent_cache.get_indent_size(f,k)};n.prototype.is_empty=function(){return!this.previous_line&&
this.current_line.is_empty()};n.prototype.add_new_line=function(f){if(this.is_empty()||!f&&this.just_added_newline())return!1;this.raw||this.__add_outputline();return!0};n.prototype.get_code=function(f){this.trim(!0);var k=this.current_line.pop();k&&("\n"===k[k.length-1]&&(k=k.replace(/\n+$/g,"")),this.current_line.push(k));this._end_with_newline&&this.__add_outputline();k=this.__lines.join("\n");"\n"!==f&&(k=k.replace(/[\n]/g,f));return k};n.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()};
n.prototype.set_indent=function(f,k){f=f||0;k=k||0;this.next_line.set_indent(f,k);if(1<this.__lines.length)return this.current_line.set_indent(f,k),!0;this.current_line.set_indent();return!1};n.prototype.add_raw_token=function(f){for(var k=0;k<f.newlines;k++)this.__add_outputline();this.current_line.set_indent(-1);this.current_line.push(f.whitespace_before);this.current_line.push(f.text);this.previous_token_wrapped=this.non_breaking_space=this.space_before_token=!1};n.prototype.add_token=function(f){this.__add_space_before_token();
this.current_line.push(f);this.non_breaking_space=this.space_before_token=!1;this.previous_token_wrapped=this.current_line._allow_wrap()};n.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))};n.prototype.remove_indent=function(f){for(var k=this.__lines.length;f<k;)this.__lines[f]._remove_indent(),f++;this.current_line._remove_wrap_indent()};n.prototype.trim=function(f){f=void 0===
f?!1:f;for(this.current_line.trim();f&&1<this.__lines.length&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=1<this.__lines.length?this.__lines[this.__lines.length-2]:null};n.prototype.just_added_newline=function(){return this.current_line.is_empty()};n.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()};n.prototype.ensure_empty_line_above=
function(f,k){for(var n=this.__lines.length-2;0<=n;){var v=this.__lines[n];if(v.is_empty())break;else if(0!==v.item(0).indexOf(f)&&v.item(-1)!==k){this.__lines.splice(n+1,0,new m(this));this.previous_line=this.__lines[this.__lines.length-2];break}n--}};r.exports.Output=n},function(r,y,A){r.exports.Token=function(m,B,n,f){this.type=m;this.text=B;this.comments_before=null;this.newlines=n||0;this.whitespace_before=f||"";this.directives=this.closed=this.opened=this.previous=this.next=this.parent=null}},
,,function(r,y,A){function m(f,k){this.raw_options=B(f,k);this.disabled=this._get_boolean("disabled");this.eol=this._get_characters("eol","auto");this.end_with_newline=this._get_boolean("end_with_newline");this.indent_size=this._get_number("indent_size",4);this.indent_char=this._get_characters("indent_char"," ");this.indent_level=this._get_number("indent_level");this.preserve_newlines=this._get_boolean("preserve_newlines",!0);this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786);
this.preserve_newlines||(this.max_preserve_newlines=0);if(this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char))this.indent_char="\t",1===this.indent_size&&(this.indent_size=4);this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char"));this.indent_empty_lines=this._get_boolean("indent_empty_lines");this.templating=this._get_selection_list("templating","auto none django erb handlebars php".split(" "),["auto"])}function B(f,k){var m={};f=n(f);
for(var v in f)v!==k&&(m[v]=f[v]);if(k&&f[k])for(v in f[k])m[v]=f[k][v];return m}function n(f){var k={},n;for(n in f){var m=n.replace(/-/g,"_");k[m]=f[n]}return k}m.prototype._get_array=function(f,k){var n=this.raw_options[f],m=k||[];"object"===typeof n?null!==n&&"function"===typeof n.concat&&(m=n.concat()):"string"===typeof n&&(m=n.split(/[^a-zA-Z0-9_\/\-]+/));return m};m.prototype._get_boolean=function(f,k){var n=this.raw_options[f];return void 0===n?!!k:!!n};m.prototype._get_characters=function(f,
k){var n=this.raw_options[f],m=k||"";"string"===typeof n&&(m=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t"));return m};m.prototype._get_number=function(f,k){var n=this.raw_options[f];k=parseInt(k,10);isNaN(k)&&(k=0);n=parseInt(n,10);isNaN(n)&&(n=k);return n};m.prototype._get_selection=function(f,k,n){n=this._get_selection_list(f,k,n);if(1!==n.length)throw Error("Invalid Option Value: The option '"+f+"' can only be one of the following values:\n"+k+"\nYou passed in: '"+this.raw_options[f]+
"'");return n[0]};m.prototype._get_selection_list=function(f,k,n){if(!k||0===k.length)throw Error("Selection list cannot be empty.");n=n||[k[0]];if(!this._is_valid_selection(n,k))throw Error("Invalid Default Value!");n=this._get_array(f,n);if(!this._is_valid_selection(n,k))throw Error("Invalid Option Value: The option '"+f+"' can contain only the following values:\n"+k+"\nYou passed in: '"+this.raw_options[f]+"'");return n};m.prototype._is_valid_selection=function(f,k){return f.length&&k.length&&
!f.some(function(f){return-1===k.indexOf(f)})};r.exports.Options=m;r.exports.normalizeOpts=n;r.exports.mergeOpts=B},,function(r,y,A){function m(n){this.__input=n||"";this.__input_length=this.__input.length;this.__position=0}var B=RegExp.prototype.hasOwnProperty("sticky");m.prototype.restart=function(){this.__position=0};m.prototype.back=function(){0<this.__position&&--this.__position};m.prototype.hasNext=function(){return this.__position<this.__input_length};m.prototype.next=function(){var n=null;
this.hasNext()&&(n=this.__input.charAt(this.__position),this.__position+=1);return n};m.prototype.peek=function(n){var f=null;n=(n||0)+this.__position;0<=n&&n<this.__input_length&&(f=this.__input.charAt(n));return f};m.prototype.__match=function(n,f){n.lastIndex=f;var k=n.exec(this.__input);!k||B&&n.sticky||k.index!==f&&(k=null);return k};m.prototype.test=function(n,f){f=(f||0)+this.__position;return 0<=f&&f<this.__input_length?!!this.__match(n,f):!1};m.prototype.testChar=function(n,f){var k=this.peek(f);
n.lastIndex=0;return null!==k&&n.test(k)};m.prototype.match=function(n){(n=this.__match(n,this.__position))?this.__position+=n[0].length:n=null;return n};m.prototype.read=function(n,f,k){var m="",v;n&&(v=this.match(n))&&(m+=v[0]);!f||!v&&n||(m+=this.readUntil(f,k));return m};m.prototype.readUntil=function(n,f){var k="",m=this.__position;n.lastIndex=this.__position;(k=n.exec(this.__input))?(m=k.index,f&&(m+=k[0].length)):m=this.__input_length;k=this.__input.substring(this.__position,m);this.__position=
m;return k};m.prototype.readUntilAfter=function(n){return this.readUntil(n,!0)};m.prototype.get_regexp=function(n,f){var k=null,m="g";f&&B&&(m="y");"string"===typeof n&&""!==n?k=new RegExp(n,m):n&&(k=new RegExp(n.source,m));return k};m.prototype.get_literal_regexp=function(n){return RegExp(n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26"))};m.prototype.peekUntilAfter=function(n){var f=this.__position;n=this.readUntilAfter(n);this.__position=f;return n};m.prototype.lookBack=function(n){var f=this.__position-
1;return f>=n.length&&this.__input.substring(f-n.length,f).toLowerCase()===n};r.exports.InputScanner=m},function(r,y,A){var m=A(8).InputScanner,B=A(3).Token,n=A(10).TokenStream,f=A(11).WhitespacePattern,k={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"};y=function(k,n){this._input=new m(k);this._options=n||{};this.__tokens=null;this._patterns={};this._patterns.whitespace=new f(this._input)};y.prototype.tokenize=function(){this._input.restart();this.__tokens=new n;this._reset();for(var f,m=new B(k.START,
""),r=null,G=[],z=new n;m.type!==k.EOF;){for(f=this._get_next_token(m,r);this._is_comment(f);)z.add(f),f=this._get_next_token(m,r);z.isEmpty()||(f.comments_before=z,z=new n);f.parent=r;this._is_opening(f)?(G.push(r),r=f):r&&this._is_closing(f,r)&&(f.opened=r,r.closed=f,r=G.pop(),f.parent=r);f.previous=m;m.next=f;this.__tokens.add(f);m=f}return this.__tokens};y.prototype._is_first_token=function(){return this.__tokens.isEmpty()};y.prototype._reset=function(){};y.prototype._get_next_token=function(f,
n){this._readWhitespace();var m=this._input.read(/.+/g);return m?this._create_token(k.RAW,m):this._create_token(k.EOF,"")};y.prototype._is_comment=function(f){return!1};y.prototype._is_opening=function(f){return!1};y.prototype._is_closing=function(f,k){return!1};y.prototype._create_token=function(f,k){return new B(f,k,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)};y.prototype._readWhitespace=function(){return this._patterns.whitespace.read()};r.exports.Tokenizer=
y;r.exports.TOKEN=k},function(r,y,A){function m(m){this.__tokens=[];this.__tokens_length=this.__tokens.length;this.__position=0;this.__parent_token=m}m.prototype.restart=function(){this.__position=0};m.prototype.isEmpty=function(){return 0===this.__tokens_length};m.prototype.hasNext=function(){return this.__position<this.__tokens_length};m.prototype.next=function(){var m=null;this.hasNext()&&(m=this.__tokens[this.__position],this.__position+=1);return m};m.prototype.peek=function(m){var n=null;m=
(m||0)+this.__position;0<=m&&m<this.__tokens_length&&(n=this.__tokens[m]);return n};m.prototype.add=function(m){this.__parent_token&&(m.parent=this.__parent_token);this.__tokens.push(m);this.__tokens_length+=1};r.exports.TokenStream=m},function(r,y,A){function m(n,f){B.call(this,n,f);f?this._line_regexp=this._input.get_regexp(f._line_regexp):this.__set_whitespace_patterns("","");this.newline_count=0;this.whitespace_before_token=""}var B=A(12).Pattern;m.prototype=new B;m.prototype.__set_whitespace_patterns=
function(n,f){f+="\\n\\r";this._match_pattern=this._input.get_regexp("["+(n+"\\t ")+f+"]+",!0);this._newline_regexp=this._input.get_regexp("\\r\\n|["+f+"]")};m.prototype.read=function(){this.newline_count=0;this.whitespace_before_token="";var n=this._input.read(this._match_pattern);if(" "===n)this.whitespace_before_token=" ";else if(n){var f=this.__split(this._newline_regexp,n);this.newline_count=f.length-1;this.whitespace_before_token=f[this.newline_count]}return n};m.prototype.matching=function(n,
f){var k=this._create();k.__set_whitespace_patterns(n,f);k._update();return k};m.prototype._create=function(){return new m(this._input,this)};m.prototype.__split=function(n,f){for(var k=n.lastIndex=0,m=[],v=n.exec(f);v;)m.push(f.substring(k,v.index)),k=v.index+v[0].length,v=n.exec(f);k<f.length?m.push(f.substring(k,f.length)):m.push("");return m};r.exports.WhitespacePattern=m},function(r,y,A){function m(m,n){this._input=m;this._until_pattern=this._match_pattern=this._starting_pattern=null;this._until_after=
!1;n&&(this._starting_pattern=this._input.get_regexp(n._starting_pattern,!0),this._match_pattern=this._input.get_regexp(n._match_pattern,!0),this._until_pattern=this._input.get_regexp(n._until_pattern),this._until_after=n._until_after)}m.prototype.read=function(){var m=this._input.read(this._starting_pattern);if(!this._starting_pattern||m)m+=this._input.read(this._match_pattern,this._until_pattern,this._until_after);return m};m.prototype.read_match=function(){return this._input.match(this._match_pattern)};
m.prototype.until_after=function(m){var n=this._create();n._until_after=!0;n._until_pattern=this._input.get_regexp(m);n._update();return n};m.prototype.until=function(m){var n=this._create();n._until_after=!1;n._until_pattern=this._input.get_regexp(m);n._update();return n};m.prototype.starting_with=function(m){var n=this._create();n._starting_pattern=this._input.get_regexp(m,!0);n._update();return n};m.prototype.matching=function(m){var n=this._create();n._match_pattern=this._input.get_regexp(m,!0);
n._update();return n};m.prototype._create=function(){return new m(this._input,this)};m.prototype._update=function(){};r.exports.Pattern=m},function(r,y,A){function m(m,n){m="string"===typeof m?m:m.source;n="string"===typeof n?n:n.source;this.__directives_block_pattern=new RegExp(m+/ beautify( \w+[:]\w+)+ /.source+n,"g");this.__directive_pattern=/ (\w+)[:](\w+)/g;this.__directives_end_ignore_pattern=new RegExp(m+/\sbeautify\signore:end\s/.source+n,"g")}m.prototype.get_directives=function(m){if(!m.match(this.__directives_block_pattern))return null;
var n={};this.__directive_pattern.lastIndex=0;for(var f=this.__directive_pattern.exec(m);f;)n[f[1]]=f[2],f=this.__directive_pattern.exec(m);return n};m.prototype.readIgnored=function(m){return m.readUntilAfter(this.__directives_end_ignore_pattern)};r.exports.Directives=m},function(r,y,A){function m(f,k){B.call(this,f,k);this.__template_pattern=null;this._disabled=Object.assign({},n);this._excluded=Object.assign({},n);k&&(this.__template_pattern=this._input.get_regexp(k.__template_pattern),this._excluded=
Object.assign(this._excluded,k._excluded),this._disabled=Object.assign(this._disabled,k._disabled));var m=new B(f);this.__patterns={handlebars_comment:m.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:m.starting_with(/{{{/).until_after(/}}}/),handlebars:m.starting_with(/{{/).until_after(/}}/),php:m.starting_with(/<\?(?:[=]|php)/).until_after(/\?>/),erb:m.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:m.starting_with(/{%/).until_after(/%}/),django_value:m.starting_with(/{{/).until_after(/}}/),
django_comment:m.starting_with(/{#/).until_after(/#}/)}}var B=A(12).Pattern,n={django:!1,erb:!1,handlebars:!1,php:!1};m.prototype=new B;m.prototype._create=function(){return new m(this._input,this)};m.prototype._update=function(){this.__set_templated_pattern()};m.prototype.disable=function(f){var k=this._create();k._disabled[f]=!0;k._update();return k};m.prototype.read_options=function(f){var k=this._create(),m;for(m in n)k._disabled[m]=-1===f.templating.indexOf(m);k._update();return k};m.prototype.exclude=
function(f){var k=this._create();k._excluded[f]=!0;k._update();return k};m.prototype.read=function(){for(var f="",f=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern),k=this._read_template();k;)k=this._match_pattern?k+this._input.read(this._match_pattern):k+this._input.readUntil(this.__template_pattern),f+=k,k=this._read_template();this._until_after&&(f+=this._input.readUntilAfter(this._until_pattern));return f};m.prototype.__set_templated_pattern=
function(){var f=[];this._disabled.php||f.push(this.__patterns.php._starting_pattern.source);this._disabled.handlebars||f.push(this.__patterns.handlebars._starting_pattern.source);this._disabled.erb||f.push(this.__patterns.erb._starting_pattern.source);this._disabled.django||(f.push(this.__patterns.django._starting_pattern.source),f.push(this.__patterns.django_value._starting_pattern.source),f.push(this.__patterns.django_comment._starting_pattern.source));this._until_pattern&&f.push(this._until_pattern.source);
this.__template_pattern=this._input.get_regexp("(?:"+f.join("|")+")")};m.prototype._read_template=function(){var f="",k=this._input.peek();"\x3c"===k?(k=this._input.peek(1),this._disabled.php||this._excluded.php||"?"!==k||(f=f||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==k||(f=f||this.__patterns.erb.read())):"{"===k&&(this._disabled.handlebars||this._excluded.handlebars||(f=(f=(f=f||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||
this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(f=f||this.__patterns.django_value.read()),this._excluded.django||(f=(f=f||this.__patterns.django_comment.read())||this.__patterns.django.read())));return f};r.exports.TemplatablePattern=m},,,,function(r,y,A){var m=A(19).Beautifier,B=A(20).Options;r.exports=function(n,f,k,r){return(new m(n,f,k,r)).beautify()};r.exports.defaultOptions=function(){return new B}},function(r,y,A){function m(f,k,
m){this.parent=f||null;this.tag=k?k.tag_name:"";this.indent_level=m||0;this.parser_token=k||null}function B(f){this._printer=f;this._current_frame=null}function n(k,m,n,v){this._source_text=k||"";m=m||{};this._js_beautify=n;this._css_beautify=v;this._tag_stack=null;this._options=new f(m,"html");this._is_wrap_attributes_force="force"===this._options.wrap_attributes.substr(0,5);this._is_wrap_attributes_force_expand_multiline="force-expand-multiline"===this._options.wrap_attributes;this._is_wrap_attributes_force_aligned=
"force-aligned"===this._options.wrap_attributes;this._is_wrap_attributes_aligned_multiple="aligned-multiple"===this._options.wrap_attributes;this._is_wrap_attributes_preserve="preserve"===this._options.wrap_attributes.substr(0,8);this._is_wrap_attributes_preserve_aligned="preserve-aligned"===this._options.wrap_attributes}var f=A(20).Options,k=A(2).Output,I=A(21).Tokenizer,v=A(21).TOKEN,J=/\r\n|[\r\n]/,G=/\r\n|[\r\n]/g,z=function(f,m){this.alignment_size=this.indent_level=0;this.max_preserve_newlines=
f.max_preserve_newlines;this.preserve_newlines=f.preserve_newlines;this._output=new k(f,m)};z.prototype.current_line_has_match=function(f){return this._output.current_line.has_match(f)};z.prototype.set_space_before_token=function(f,k){this._output.space_before_token=f;this._output.non_breaking_space=k};z.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size);this._output.set_wrap_point()};z.prototype.add_raw_token=function(f){this._output.add_raw_token(f)};
z.prototype.print_preserved_newlines=function(f){var k=0;f.type!==v.TEXT&&f.previous.type!==v.TEXT&&(k=f.newlines?1:0);this.preserve_newlines&&(k=f.newlines<this.max_preserve_newlines+1?f.newlines:this.max_preserve_newlines+1);for(f=0;f<k;f++)this.print_newline(0<f);return 0!==k};z.prototype.traverse_whitespace=function(f){return f.whitespace_before||f.newlines?(this.print_preserved_newlines(f)||(this._output.space_before_token=!0),!0):!1};z.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped};
z.prototype.print_newline=function(f){this._output.add_new_line(f)};z.prototype.print_token=function(f){f.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(f.text))};z.prototype.indent=function(){this.indent_level++};z.prototype.get_full_indent=function(f){f=this.indent_level+(f||0);return 1>f?"":this._output.get_indent_string(f)};B.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null};B.prototype.record_tag=
function(f){this._current_frame=new m(this._current_frame,f,this._printer.indent_level)};B.prototype._try_pop_frame=function(f){var k=null;f&&(k=f.parser_token,this._printer.indent_level=f.indent_level,this._current_frame=f.parent);return k};B.prototype._get_frame=function(f,k){for(var m=this._current_frame;m&&-1===f.indexOf(m.tag);){if(k&&-1!==k.indexOf(m.tag)){m=null;break}m=m.parent}return m};B.prototype.try_pop=function(f,k){var m=this._get_frame([f],k);return this._try_pop_frame(m)};B.prototype.indent_to_tag=
function(f){if(f=this._get_frame(f))this._printer.indent_level=f.indent_level};n.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var f=this._source_text,k=this._options.eol;"auto"===this._options.eol&&(k="\n",f&&J.test(f)&&(k=f.match(J)[0]));var f=f.replace(G,"\n"),m=f.match(/^[\t ]*/)[0],n={text:"",type:""},r=new Q,m=new z(this._options,m),f=(new I(f,this._options)).tokenize();this._tag_stack=new B(m);for(var A=null,y=f.next();y.type!==v.EOF;)y.type===v.TAG_OPEN||
y.type===v.COMMENT?r=A=this._handle_tag_open(m,y,r,n):y.type===v.ATTRIBUTE||y.type===v.EQUALS||y.type===v.VALUE||y.type===v.TEXT&&!r.tag_complete?A=this._handle_inside_tag(m,y,r,f):y.type===v.TAG_CLOSE?A=this._handle_tag_close(m,y,r):y.type===v.TEXT?A=this._handle_text(m,y,r):m.add_raw_token(y),n=A,y=f.next();return m._output.get_code(k)};n.prototype._handle_tag_close=function(f,k,m){var n={text:k.text,type:k.type};f.alignment_size=0;m.tag_complete=!0;f.set_space_before_token(k.newlines||""!==k.whitespace_before,
!0);m.is_unformatted?f.add_raw_token(k):("\x3c"===m.tag_start_char&&(f.set_space_before_token("/"===k.text[0],!0),this._is_wrap_attributes_force_expand_multiline&&m.has_wrapped_attrs&&f.print_newline(!1)),f.print_token(k));!m.indent_content||m.is_unformatted||m.is_content_unformatted||(f.indent(),m.indent_content=!1);m.is_inline_element||m.is_unformatted||m.is_content_unformatted||f.set_wrap_point();return n};n.prototype._handle_inside_tag=function(f,k,m,n){var r=m.has_wrapped_attrs,z={text:k.text,
type:k.type};f.set_space_before_token(k.newlines||""!==k.whitespace_before,!0);if(m.is_unformatted)f.add_raw_token(k);else if("{"===m.tag_start_char&&k.type===v.TEXT)f.print_preserved_newlines(k)?(k.newlines=0,f.add_raw_token(k)):f.print_token(k);else{k.type===v.ATTRIBUTE?(f.set_space_before_token(!0),m.attr_count+=1):k.type===v.EQUALS?f.set_space_before_token(!1):k.type===v.VALUE&&k.previous.type===v.EQUALS&&f.set_space_before_token(!1);if(k.type===v.ATTRIBUTE&&"\x3c"===m.tag_start_char){if(this._is_wrap_attributes_preserve||
this._is_wrap_attributes_preserve_aligned)f.traverse_whitespace(k),r=r||0!==k.newlines;if(this._is_wrap_attributes_force){var G=1<m.attr_count;if(this._is_wrap_attributes_force_expand_multiline&&1===m.attr_count){var G=!0,J=0,y;do{y=n.peek(J);if(y.type===v.ATTRIBUTE){G=!1;break}J+=1}while(4>J&&y.type!==v.EOF&&y.type!==v.TAG_CLOSE);G=!G}G&&(f.print_newline(!1),r=!0)}}f.print_token(k);r=r||f.previous_token_wrapped();m.has_wrapped_attrs=r}return z};n.prototype._handle_text=function(f,k,m){var n={text:k.text,
type:"TK_CONTENT"};m.custom_beautifier_name?this._print_custom_beatifier_text(f,k,m):m.is_unformatted||m.is_content_unformatted?f.add_raw_token(k):(f.traverse_whitespace(k),f.print_token(k));return n};n.prototype._print_custom_beatifier_text=function(f,k,m){var r=this;if(""!==k.text){var v=k.text,z,G=1,J="",y="";"javascript"===m.custom_beautifier_name&&"function"===typeof this._js_beautify?z=this._js_beautify:"css"===m.custom_beautifier_name&&"function"===typeof this._css_beautify?z=this._css_beautify:
"html"===m.custom_beautifier_name&&(z=function(f,k){return(new n(f,k,r._js_beautify,r._css_beautify)).beautify()});"keep"===this._options.indent_scripts?G=0:"separate"===this._options.indent_scripts&&(G=-f.indent_level);G=f.get_full_indent(G);v=v.replace(/\n[ \t]*$/,"");if("html"!==m.custom_beautifier_name&&"\x3c"===v[0]&&v.match(/^(\x3c!--|<!\[CDATA\[)/)){m=/^(\x3c!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(--\x3e|]]\x3e)$/.exec(v);if(!m){f.add_raw_token(k);return}J=G+m[1]+"\n";v=m[4];m[5]&&(y=
G+m[5]);v=v.replace(/\n[ \t]*$/,"");if(m[2]||-1!==m[3].indexOf("\n"))if(m=m[3].match(/[ \t]+$/))k.whitespace_before=m[0]}v&&(z?(m=function(){this.eol="\n"},m.prototype=this._options.raw_options,m=new m,v=z(G+v,m)):((z=k.whitespace_before)&&(v=v.replace(new RegExp("\n("+z+")?","g"),"\n")),v=G+v.replace(/\n/g,"\n"+G)));J&&(v=v?J+v+"\n"+y:J+y);f.print_newline(!1);v&&(k.text=v,k.whitespace_before="",k.newlines=0,f.add_raw_token(k),f.print_newline(!0))}};n.prototype._handle_tag_open=function(f,k,m,n){var r=
this._get_tag_open_token(k);!m.is_unformatted&&!m.is_content_unformatted||m.is_empty_element||k.type!==v.TAG_OPEN||0!==k.text.indexOf("\x3c/")?(f.traverse_whitespace(k),this._set_tag_position(f,k,r,m,n),r.is_inline_element||f.set_wrap_point(),f.print_token(k)):(f.add_raw_token(k),r.start_tag_token=this._tag_stack.try_pop(r.tag_name));if(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)r.alignment_size=k.text.length+1;r.tag_complete||
r.is_unformatted||(f.alignment_size=r.alignment_size);return r};var Q=function(f,k){this.parent=f||null;this.text="";this.type="TK_TAG_OPEN";this.tag_name="";this.multiline_content=this.indent_content=this.is_end_tag=this.is_start_tag=this.is_empty_element=this.is_content_unformatted=this.is_unformatted=this.is_inline_element=!1;this.start_tag_token=this.custom_beautifier_name=null;this.attr_count=0;this.has_wrapped_attrs=!1;this.alignment_size=0;this.tag_complete=!1;this.tag_check=this.tag_start_char=
"";if(k){var m;this.tag_start_char=k.text[0];this.text=k.text;"\x3c"===this.tag_start_char?this.tag_check=(m=k.text.match(/^<([^\s>]*)/))?m[1]:"":(this.tag_check=(m=k.text.match(/^{{(?:[\^]|#\*?)?([^\s}]+)/))?m[1]:"","{{#\x3e"===k.text&&"\x3e"===this.tag_check&&null!==k.next&&(this.tag_check=k.next.text));this.tag_check=this.tag_check.toLowerCase();k.type===v.COMMENT&&(this.tag_complete=!0);this.tag_name=(this.is_start_tag="/"!==this.tag_check.charAt(0))?this.tag_check:this.tag_check.substr(1);this.is_end_tag=
(this.is_end_tag=!this.is_start_tag||k.closed&&"/\x3e"===k.closed.text)||"{"===this.tag_start_char&&(3>this.text.length||/[^#\^]/.test(this.text.charAt(2)))}else this.tag_complete=!0};n.prototype._get_tag_open_token=function(f){f=new Q(this._tag_stack.get_parser_token(),f);f.alignment_size=this._options.wrap_attributes_indent_size;f.is_end_tag=f.is_end_tag||-1!==this._options.void_elements.indexOf(f.tag_check);f.is_empty_element=f.tag_complete||f.is_start_tag&&f.is_end_tag;f.is_unformatted=!f.tag_complete&&
-1!==this._options.unformatted.indexOf(f.tag_check);f.is_content_unformatted=!f.is_empty_element&&-1!==this._options.content_unformatted.indexOf(f.tag_check);f.is_inline_element=-1!==this._options.inline.indexOf(f.tag_name)||"{"===f.tag_start_char;return f};n.prototype._set_tag_position=function(f,k,m,n,r){if(!m.is_empty_element)if(m.is_end_tag)m.start_tag_token=this._tag_stack.try_pop(m.tag_name);else if(this._do_optional_end_element(m)&&(m.is_inline_element||f.print_newline(!1)),this._tag_stack.record_tag(m),
!("script"!==m.tag_name&&"style"!==m.tag_name||m.is_unformatted||m.is_content_unformatted)){var z=m.tag_check,G=null,J=null;if(k.closed){"script"===z?G="text/javascript":"style"===z&&(G="text/css");for(var z=null,y=k.next;y.type!==v.EOF&&k.closed!==y;){if(y.type===v.ATTRIBUTE&&"type"===y.text){y.next&&y.next.type===v.EQUALS&&y.next.next&&y.next.next.type===v.VALUE&&(z=y.next.next.text);break}y=y.next}G=z||G;-1<G.search("text/css")?J="css":-1<G.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)?
J="javascript":-1<G.search(/(text|application|dojo)\/(x-)?(html)/)?J="html":-1<G.search(/test\/null/)&&(J="null");k=J}else k=null;m.custom_beautifier_name=k}-1!==this._options.extra_liners.indexOf(m.tag_check)&&(f.print_newline(!1),f._output.just_added_blankline()||f.print_newline(!0));if(m.is_empty_element)"{"===m.tag_start_char&&"else"===m.tag_check&&(this._tag_stack.indent_to_tag(["if","unless","each"]),m.indent_content=!0,f.current_line_has_match(/{{#if/)||f.print_newline(!1)),"!--"===m.tag_name&&
r.type===v.TAG_CLOSE&&n.is_end_tag&&-1===m.text.indexOf("\n")||(m.is_inline_element||m.is_unformatted||f.print_newline(!1),this._calcluate_parent_multiline(f,m));else if(m.is_end_tag){k=!1;k=(k=m.start_tag_token&&m.start_tag_token.multiline_content)||!m.is_inline_element&&!(n.is_inline_element||n.is_unformatted)&&!(r.type===v.TAG_CLOSE&&m.start_tag_token===n)&&"TK_CONTENT"!==r.type;if(m.is_content_unformatted||m.is_unformatted)k=!1;k&&f.print_newline(!1)}else m.indent_content=!m.custom_beautifier_name,
"\x3c"===m.tag_start_char&&("html"===m.tag_name?m.indent_content=this._options.indent_inner_html:"head"===m.tag_name?m.indent_content=this._options.indent_head_inner_html:"body"===m.tag_name&&(m.indent_content=this._options.indent_body_inner_html)),m.is_inline_element||m.is_unformatted||"TK_CONTENT"===r.type&&!m.is_content_unformatted||f.print_newline(!1),this._calcluate_parent_multiline(f,m)};n.prototype._calcluate_parent_multiline=function(f,k){!k.parent||!f._output.just_added_newline()||(k.is_inline_element||
k.is_unformatted)&&k.parent.is_inline_element||(k.parent.multiline_content=!0)};var Z="address article aside blockquote details div dl fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 header hr main nav ol p pre section table ul".split(" "),da="a audio del ins map noscript video".split(" ");n.prototype._do_optional_end_element=function(f){var k=null;if(!f.is_empty_element&&f.is_start_tag&&f.parent){if("body"===f.tag_name)k=k||this._tag_stack.try_pop("head");else if("li"===f.tag_name)k=k||
this._tag_stack.try_pop("li",["ol","ul"]);else if("dd"===f.tag_name||"dt"===f.tag_name)k=(k=k||this._tag_stack.try_pop("dt",["dl"]))||this._tag_stack.try_pop("dd",["dl"]);else if("p"===f.parent.tag_name&&-1!==Z.indexOf(f.tag_name)){var m=f.parent.parent;m&&-1!==da.indexOf(m.tag_name)||(k=k||this._tag_stack.try_pop("p"))}else if("rp"===f.tag_name||"rt"===f.tag_name)k=(k=k||this._tag_stack.try_pop("rt",["ruby","rtc"]))||this._tag_stack.try_pop("rp",["ruby","rtc"]);else if("optgroup"===f.tag_name)k=
k||this._tag_stack.try_pop("optgroup",["select"]);else if("option"===f.tag_name)k=k||this._tag_stack.try_pop("option",["select","datalist","optgroup"]);else if("colgroup"===f.tag_name)k=k||this._tag_stack.try_pop("caption",["table"]);else if("thead"===f.tag_name)k=(k=k||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]);else if("tbody"===f.tag_name||"tfoot"===f.tag_name)k=(k=(k=(k=k||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",
["table"]))||this._tag_stack.try_pop("thead",["table"]))||this._tag_stack.try_pop("tbody",["table"]);else if("tr"===f.tag_name)k=(k=(k=k||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"]);else if("th"===f.tag_name||"td"===f.tag_name)k=(k=k||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]))||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]);f.parent=this._tag_stack.get_parser_token();
return k}};r.exports.Beautifier=n},function(r,y,A){function m(m){B.call(this,m,"html");1===this.templating.length&&"auto"===this.templating[0]&&(this.templating=["django","erb","handlebars","php"]);this.indent_inner_html=this._get_boolean("indent_inner_html");this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0);this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0);this.indent_handlebars=this._get_boolean("indent_handlebars",!0);this.wrap_attributes=this._get_selection("wrap_attributes",
"auto force force-aligned force-expand-multiline aligned-multiple preserve preserve-aligned".split(" "));this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size);this.extra_liners=this._get_array("extra_liners",["head","body","/html"]);this.inline=this._get_array("inline","a abbr area audio b bdi bdo br button canvas cite code data datalist del dfn em embed i iframe img input ins kbd keygen label map mark math meter noscript object output progress q ruby s samp select small span strong sub sup svg template textarea time u var video wbr text acronym big strike tt".split(" "));
this.void_elements=this._get_array("void_elements","area base br col embed hr img input keygen link menuitem meta param source track wbr !doctype ?xml basefont isindex".split(" "));this.unformatted=this._get_array("unformatted",[]);this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]);this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter");this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}var B=A(6).Options;
m.prototype=new B;r.exports.Options=m},function(r,y,A){var m=A(9).Tokenizer;y=A(9).TOKEN;var B=A(13).Directives,n=A(14).TemplatablePattern,f=A(12).Pattern,k={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:y.START,RAW:y.RAW,EOF:y.EOF},I=new B(/<\!--/,/--\x3e/);A=function(k,r){m.call(this,k,r);this._current_tag_name="";var G=(new n(this._input)).read_options(this._options),z=
new f(this._input);this.__patterns={word:G.until(/[\n\r\t <]/),single_quote:G.until_after(/'/),double_quote:G.until_after(/"/),attribute:G.until(/[\n\r\t =>]|\/>/),element_name:G.until(/[\n\r\t >\/]/),handlebars_comment:z.starting_with(/{{!--/).until_after(/--}}/),handlebars:z.starting_with(/{{/).until_after(/}}/),handlebars_open:z.until(/[\n\r\t }]/),handlebars_raw_close:z.until(/}}/),comment:z.starting_with(/\x3c!--/).until_after(/--\x3e/),cdata:z.starting_with(/<!\[CDATA\[/).until_after(/]]\x3e/),
conditional_comment:z.starting_with(/<!\[/).until_after(/]>/),processing:z.starting_with(/<\?/).until_after(/\?>/)};this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars"));this._unformatted_content_delimiter=null;this._options.unformatted_content_delimiter&&(G=this._input.get_literal_regexp(this._options.unformatted_content_delimiter),this.__patterns.unformatted_content_delimiter=z.matching(G).until_after(G))};A.prototype=new m;A.prototype._is_comment=function(f){return!1};
A.prototype._is_opening=function(f){return f.type===k.TAG_OPEN};A.prototype._is_closing=function(f,m){return f.type===k.TAG_CLOSE&&m&&(("\x3e"===f.text||"/\x3e"===f.text)&&"\x3c"===m.text[0]||"}}"===f.text&&"{"===m.text[0]&&"{"===m.text[1])};A.prototype._reset=function(){this._current_tag_name=""};A.prototype._get_next_token=function(f,m){var n=null;this._readWhitespace();var r=this._input.peek();return null===r?this._create_token(k.EOF,""):n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_open_handlebars(r,
m))||this._read_attribute(r,f,m))||this._read_close(r,m))||this._read_raw_content(r,f,m))||this._read_content_word(r))||this._read_comment_or_cdata(r))||this._read_processing(r))||this._read_open(r,m))||this._create_token(k.UNKNOWN,this._input.next())};A.prototype._read_comment_or_cdata=function(f){var m=null,n=null,r=null;"\x3c"===f&&("!"===this._input.peek(1)&&((n=this.__patterns.comment.read())?(r=I.get_directives(n))&&"start"===r.ignore&&(n+=I.readIgnored(this._input)):n=this.__patterns.cdata.read()),
n&&(m=this._create_token(k.COMMENT,n),m.directives=r));return m};A.prototype._read_processing=function(f){var m=null,n=null;if("\x3c"===f){f=this._input.peek(1);if("!"===f||"?"===f)n=(n=this.__patterns.conditional_comment.read())||this.__patterns.processing.read();n&&(m=this._create_token(k.COMMENT,n),m.directives=null)}return m};A.prototype._read_open=function(f,m){var n=null,n=null;m||"\x3c"!==f||(n=this._input.next(),"/"===this._input.peek()&&(n+=this._input.next()),n+=this.__patterns.element_name.read(),
n=this._create_token(k.TAG_OPEN,n));return n};A.prototype._read_open_handlebars=function(f,m){var n=null,n=null;!m&&this._options.indent_handlebars&&"{"===f&&"{"===this._input.peek(1)&&("!"===this._input.peek(2)?(n=(n=this.__patterns.handlebars_comment.read())||this.__patterns.handlebars.read(),n=this._create_token(k.COMMENT,n)):(n=this.__patterns.handlebars_open.read(),n=this._create_token(k.TAG_OPEN,n)));return n};A.prototype._read_close=function(f,m){var n=null,n=null;m&&("\x3c"===m.text[0]&&("\x3e"===
f||"/"===f&&"\x3e"===this._input.peek(1))?(n=this._input.next(),"/"===f&&(n+=this._input.next()),n=this._create_token(k.TAG_CLOSE,n)):"{"===m.text[0]&&"}"===f&&"}"===this._input.peek(1)&&(this._input.next(),this._input.next(),n=this._create_token(k.TAG_CLOSE,"}}")));return n};A.prototype._read_attribute=function(f,m,n){var r=null,y="";n&&"\x3c"===n.text[0]&&("\x3d"===f?r=this._create_token(k.EQUALS,this._input.next()):'"'===f||"'"===f?(m=this._input.next(),m='"'===f?m+this.__patterns.double_quote.read():
m+this.__patterns.single_quote.read(),r=this._create_token(k.VALUE,m)):(y=this.__patterns.attribute.read())&&(r=m.type===k.EQUALS?this._create_token(k.VALUE,y):this._create_token(k.ATTRIBUTE,y)));return r};A.prototype._is_content_unformatted=function(f){return-1===this._options.void_elements.indexOf(f)&&(-1!==this._options.content_unformatted.indexOf(f)||-1!==this._options.unformatted.indexOf(f))};A.prototype._read_raw_content=function(f,m,n){var r="";if(n&&"{"===n.text[0])r=this.__patterns.handlebars_raw_close.read();
else if(m.type===k.TAG_CLOSE&&"\x3c"===m.opened.text[0]&&"/"!==m.text[0])if(m=m.opened.text.substr(1).toLowerCase(),"script"===m||"style"===m){if(f=this._read_comment_or_cdata(f))return f.type=k.TEXT,f;r=this._input.readUntil(new RegExp("\x3c/"+m+"[\\n\\r\\t ]*?\x3e","ig"))}else this._is_content_unformatted(m)&&(r=this._input.readUntil(new RegExp("\x3c/"+m+"[\\n\\r\\t ]*?\x3e","ig")));return r?this._create_token(k.TEXT,r):null};A.prototype._read_content_word=function(f){var m="";this._options.unformatted_content_delimiter&&
f===this._options.unformatted_content_delimiter[0]&&(m=this.__patterns.unformatted_content_delimiter.read());m||(m=this.__patterns.word.read());if(m)return this._create_token(k.TEXT,m)};r.exports.Tokenizer=A;r.exports.TOKEN=k}]);if("function"===typeof define&&define.amd)define(["require","./beautify","./beautify-css"],function(r){var y=r("./beautify"),A=r("./beautify-css");return{html_beautify:function(m,r){return Q(m,r,y.js_beautify,A.css_beautify)}}});else if("undefined"!==typeof exports){var da=
require("./beautify.js"),Z=require("./beautify-css.js");exports.html_beautify=function(r,y){return Q(r,y,da.js_beautify,Z.css_beautify)}}else"undefined"!==typeof window?window.html_beautify=function(r,y){return Q(r,y,window.js_beautify,window.css_beautify)}:"undefined"!==typeof global&&(global.html_beautify=function(r,y){return Q(r,y,global.js_beautify,global.css_beautify)})})();